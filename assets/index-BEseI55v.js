(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();var xh={exports:{}},da={},Ph={exports:{}},ke={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm;function Kw(){if(Pm)return ke;Pm=1;var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),E=Symbol.iterator;function I(P){return P===null||typeof P!="object"?null:(P=E&&P[E]||P["@@iterator"],typeof P=="function"?P:null)}var L={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,$={};function F(P,H,le){this.props=P,this.context=H,this.refs=$,this.updater=le||L}F.prototype.isReactComponent={},F.prototype.setState=function(P,H){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,H,"setState")},F.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function J(){}J.prototype=F.prototype;function ne(P,H,le){this.props=P,this.context=H,this.refs=$,this.updater=le||L}var Q=ne.prototype=new J;Q.constructor=ne,W(Q,F.prototype),Q.isPureReactComponent=!0;var oe=Array.isArray,ge=Object.prototype.hasOwnProperty,ye={current:null},x={key:!0,ref:!0,__self:!0,__source:!0};function S(P,H,le){var pe,Se={},Re=null,Ue=null;if(H!=null)for(pe in H.ref!==void 0&&(Ue=H.ref),H.key!==void 0&&(Re=""+H.key),H)ge.call(H,pe)&&!x.hasOwnProperty(pe)&&(Se[pe]=H[pe]);var De=arguments.length-2;if(De===1)Se.children=le;else if(1<De){for(var $e=Array(De),jt=0;jt<De;jt++)$e[jt]=arguments[jt+2];Se.children=$e}if(P&&P.defaultProps)for(pe in De=P.defaultProps,De)Se[pe]===void 0&&(Se[pe]=De[pe]);return{$$typeof:r,type:P,key:Re,ref:Ue,props:Se,_owner:ye.current}}function C(P,H){return{$$typeof:r,type:P.type,key:H,ref:P.ref,props:P.props,_owner:P._owner}}function D(P){return typeof P=="object"&&P!==null&&P.$$typeof===r}function k(P){var H={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(le){return H[le]})}var b=/\/+/g;function R(P,H){return typeof P=="object"&&P!==null&&P.key!=null?k(""+P.key):H.toString(36)}function Me(P,H,le,pe,Se){var Re=typeof P;(Re==="undefined"||Re==="boolean")&&(P=null);var Ue=!1;if(P===null)Ue=!0;else switch(Re){case"string":case"number":Ue=!0;break;case"object":switch(P.$$typeof){case r:case e:Ue=!0}}if(Ue)return Ue=P,Se=Se(Ue),P=pe===""?"."+R(Ue,0):pe,oe(Se)?(le="",P!=null&&(le=P.replace(b,"$&/")+"/"),Me(Se,H,le,"",function(jt){return jt})):Se!=null&&(D(Se)&&(Se=C(Se,le+(!Se.key||Ue&&Ue.key===Se.key?"":(""+Se.key).replace(b,"$&/")+"/")+P)),H.push(Se)),1;if(Ue=0,pe=pe===""?".":pe+":",oe(P))for(var De=0;De<P.length;De++){Re=P[De];var $e=pe+R(Re,De);Ue+=Me(Re,H,le,$e,Se)}else if($e=I(P),typeof $e=="function")for(P=$e.call(P),De=0;!(Re=P.next()).done;)Re=Re.value,$e=pe+R(Re,De++),Ue+=Me(Re,H,le,$e,Se);else if(Re==="object")throw H=String(P),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.");return Ue}function ve(P,H,le){if(P==null)return P;var pe=[],Se=0;return Me(P,pe,"","",function(Re){return H.call(le,Re,Se++)}),pe}function Ne(P){if(P._status===-1){var H=P._result;H=H(),H.then(function(le){(P._status===0||P._status===-1)&&(P._status=1,P._result=le)},function(le){(P._status===0||P._status===-1)&&(P._status=2,P._result=le)}),P._status===-1&&(P._status=0,P._result=H)}if(P._status===1)return P._result.default;throw P._result}var Ce={current:null},Z={transition:null},se={ReactCurrentDispatcher:Ce,ReactCurrentBatchConfig:Z,ReactCurrentOwner:ye};function ie(){throw Error("act(...) is not supported in production builds of React.")}return ke.Children={map:ve,forEach:function(P,H,le){ve(P,function(){H.apply(this,arguments)},le)},count:function(P){var H=0;return ve(P,function(){H++}),H},toArray:function(P){return ve(P,function(H){return H})||[]},only:function(P){if(!D(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},ke.Component=F,ke.Fragment=t,ke.Profiler=o,ke.PureComponent=ne,ke.StrictMode=s,ke.Suspense=g,ke.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,ke.act=ie,ke.cloneElement=function(P,H,le){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var pe=W({},P.props),Se=P.key,Re=P.ref,Ue=P._owner;if(H!=null){if(H.ref!==void 0&&(Re=H.ref,Ue=ye.current),H.key!==void 0&&(Se=""+H.key),P.type&&P.type.defaultProps)var De=P.type.defaultProps;for($e in H)ge.call(H,$e)&&!x.hasOwnProperty($e)&&(pe[$e]=H[$e]===void 0&&De!==void 0?De[$e]:H[$e])}var $e=arguments.length-2;if($e===1)pe.children=le;else if(1<$e){De=Array($e);for(var jt=0;jt<$e;jt++)De[jt]=arguments[jt+2];pe.children=De}return{$$typeof:r,type:P.type,key:Se,ref:Re,props:pe,_owner:Ue}},ke.createContext=function(P){return P={$$typeof:h,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:l,_context:P},P.Consumer=P},ke.createElement=S,ke.createFactory=function(P){var H=S.bind(null,P);return H.type=P,H},ke.createRef=function(){return{current:null}},ke.forwardRef=function(P){return{$$typeof:d,render:P}},ke.isValidElement=D,ke.lazy=function(P){return{$$typeof:v,_payload:{_status:-1,_result:P},_init:Ne}},ke.memo=function(P,H){return{$$typeof:y,type:P,compare:H===void 0?null:H}},ke.startTransition=function(P){var H=Z.transition;Z.transition={};try{P()}finally{Z.transition=H}},ke.unstable_act=ie,ke.useCallback=function(P,H){return Ce.current.useCallback(P,H)},ke.useContext=function(P){return Ce.current.useContext(P)},ke.useDebugValue=function(){},ke.useDeferredValue=function(P){return Ce.current.useDeferredValue(P)},ke.useEffect=function(P,H){return Ce.current.useEffect(P,H)},ke.useId=function(){return Ce.current.useId()},ke.useImperativeHandle=function(P,H,le){return Ce.current.useImperativeHandle(P,H,le)},ke.useInsertionEffect=function(P,H){return Ce.current.useInsertionEffect(P,H)},ke.useLayoutEffect=function(P,H){return Ce.current.useLayoutEffect(P,H)},ke.useMemo=function(P,H){return Ce.current.useMemo(P,H)},ke.useReducer=function(P,H,le){return Ce.current.useReducer(P,H,le)},ke.useRef=function(P){return Ce.current.useRef(P)},ke.useState=function(P){return Ce.current.useState(P)},ke.useSyncExternalStore=function(P,H,le){return Ce.current.useSyncExternalStore(P,H,le)},ke.useTransition=function(){return Ce.current.useTransition()},ke.version="18.3.1",ke}var km;function Ef(){return km||(km=1,Ph.exports=Kw()),Ph.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm;function Yw(){if(Nm)return da;Nm=1;var r=Ef(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function h(d,g,y){var v,E={},I=null,L=null;y!==void 0&&(I=""+y),g.key!==void 0&&(I=""+g.key),g.ref!==void 0&&(L=g.ref);for(v in g)s.call(g,v)&&!l.hasOwnProperty(v)&&(E[v]=g[v]);if(d&&d.defaultProps)for(v in g=d.defaultProps,g)E[v]===void 0&&(E[v]=g[v]);return{$$typeof:e,type:d,key:I,ref:L,props:E,_owner:o.current}}return da.Fragment=t,da.jsx=h,da.jsxs=h,da}var Dm;function Xw(){return Dm||(Dm=1,xh.exports=Yw()),xh.exports}var U=Xw(),au={},kh={exports:{}},Gt={},Nh={exports:{}},Dh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vm;function Jw(){return Vm||(Vm=1,(function(r){function e(Z,se){var ie=Z.length;Z.push(se);e:for(;0<ie;){var P=ie-1>>>1,H=Z[P];if(0<o(H,se))Z[P]=se,Z[ie]=H,ie=P;else break e}}function t(Z){return Z.length===0?null:Z[0]}function s(Z){if(Z.length===0)return null;var se=Z[0],ie=Z.pop();if(ie!==se){Z[0]=ie;e:for(var P=0,H=Z.length,le=H>>>1;P<le;){var pe=2*(P+1)-1,Se=Z[pe],Re=pe+1,Ue=Z[Re];if(0>o(Se,ie))Re<H&&0>o(Ue,Se)?(Z[P]=Ue,Z[Re]=ie,P=Re):(Z[P]=Se,Z[pe]=ie,P=pe);else if(Re<H&&0>o(Ue,ie))Z[P]=Ue,Z[Re]=ie,P=Re;else break e}}return se}function o(Z,se){var ie=Z.sortIndex-se.sortIndex;return ie!==0?ie:Z.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var h=Date,d=h.now();r.unstable_now=function(){return h.now()-d}}var g=[],y=[],v=1,E=null,I=3,L=!1,W=!1,$=!1,F=typeof setTimeout=="function"?setTimeout:null,J=typeof clearTimeout=="function"?clearTimeout:null,ne=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Q(Z){for(var se=t(y);se!==null;){if(se.callback===null)s(y);else if(se.startTime<=Z)s(y),se.sortIndex=se.expirationTime,e(g,se);else break;se=t(y)}}function oe(Z){if($=!1,Q(Z),!W)if(t(g)!==null)W=!0,Ne(ge);else{var se=t(y);se!==null&&Ce(oe,se.startTime-Z)}}function ge(Z,se){W=!1,$&&($=!1,J(S),S=-1),L=!0;var ie=I;try{for(Q(se),E=t(g);E!==null&&(!(E.expirationTime>se)||Z&&!k());){var P=E.callback;if(typeof P=="function"){E.callback=null,I=E.priorityLevel;var H=P(E.expirationTime<=se);se=r.unstable_now(),typeof H=="function"?E.callback=H:E===t(g)&&s(g),Q(se)}else s(g);E=t(g)}if(E!==null)var le=!0;else{var pe=t(y);pe!==null&&Ce(oe,pe.startTime-se),le=!1}return le}finally{E=null,I=ie,L=!1}}var ye=!1,x=null,S=-1,C=5,D=-1;function k(){return!(r.unstable_now()-D<C)}function b(){if(x!==null){var Z=r.unstable_now();D=Z;var se=!0;try{se=x(!0,Z)}finally{se?R():(ye=!1,x=null)}}else ye=!1}var R;if(typeof ne=="function")R=function(){ne(b)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,ve=Me.port2;Me.port1.onmessage=b,R=function(){ve.postMessage(null)}}else R=function(){F(b,0)};function Ne(Z){x=Z,ye||(ye=!0,R())}function Ce(Z,se){S=F(function(){Z(r.unstable_now())},se)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Z){Z.callback=null},r.unstable_continueExecution=function(){W||L||(W=!0,Ne(ge))},r.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<Z?Math.floor(1e3/Z):5},r.unstable_getCurrentPriorityLevel=function(){return I},r.unstable_getFirstCallbackNode=function(){return t(g)},r.unstable_next=function(Z){switch(I){case 1:case 2:case 3:var se=3;break;default:se=I}var ie=I;I=se;try{return Z()}finally{I=ie}},r.unstable_pauseExecution=function(){},r.unstable_requestPaint=function(){},r.unstable_runWithPriority=function(Z,se){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var ie=I;I=Z;try{return se()}finally{I=ie}},r.unstable_scheduleCallback=function(Z,se,ie){var P=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?P+ie:P):ie=P,Z){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=ie+H,Z={id:v++,callback:se,priorityLevel:Z,startTime:ie,expirationTime:H,sortIndex:-1},ie>P?(Z.sortIndex=ie,e(y,Z),t(g)===null&&Z===t(y)&&($?(J(S),S=-1):$=!0,Ce(oe,ie-P))):(Z.sortIndex=H,e(g,Z),W||L||(W=!0,Ne(ge))),Z},r.unstable_shouldYield=k,r.unstable_wrapCallback=function(Z){var se=I;return function(){var ie=I;I=se;try{return Z.apply(this,arguments)}finally{I=ie}}}})(Dh)),Dh}var Lm;function Zw(){return Lm||(Lm=1,Nh.exports=Jw()),Nh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm;function e0(){if(bm)return Gt;bm=1;var r=Ef(),e=Zw();function t(n){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+n,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+n+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(n,i){h(n,i),h(n+"Capture",i)}function h(n,i){for(o[n]=i,n=0;n<i.length;n++)s.add(i[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},E={};function I(n){return g.call(E,n)?!0:g.call(v,n)?!1:y.test(n)?E[n]=!0:(v[n]=!0,!1)}function L(n,i,a,c){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return c?!1:a!==null?!a.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function W(n,i,a,c){if(i===null||typeof i>"u"||L(n,i,a,c))return!0;if(c)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function $(n,i,a,c,f,p,w){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=c,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=n,this.type=i,this.sanitizeURL=p,this.removeEmptyString=w}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){F[n]=new $(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var i=n[0];F[i]=new $(i,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){F[n]=new $(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){F[n]=new $(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){F[n]=new $(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){F[n]=new $(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){F[n]=new $(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){F[n]=new $(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){F[n]=new $(n,5,!1,n.toLowerCase(),null,!1,!1)});var J=/[\-:]([a-z])/g;function ne(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var i=n.replace(J,ne);F[i]=new $(i,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var i=n.replace(J,ne);F[i]=new $(i,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var i=n.replace(J,ne);F[i]=new $(i,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){F[n]=new $(n,1,!1,n.toLowerCase(),null,!1,!1)}),F.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){F[n]=new $(n,1,!1,n.toLowerCase(),null,!0,!0)});function Q(n,i,a,c){var f=F.hasOwnProperty(i)?F[i]:null;(f!==null?f.type!==0:c||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(W(i,a,f,c)&&(a=null),c||f===null?I(i)&&(a===null?n.removeAttribute(i):n.setAttribute(i,""+a)):f.mustUseProperty?n[f.propertyName]=a===null?f.type===3?!1:"":a:(i=f.attributeName,c=f.attributeNamespace,a===null?n.removeAttribute(i):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,c?n.setAttributeNS(c,i,a):n.setAttribute(i,a))))}var oe=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ge=Symbol.for("react.element"),ye=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),k=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),Me=Symbol.for("react.suspense_list"),ve=Symbol.for("react.memo"),Ne=Symbol.for("react.lazy"),Ce=Symbol.for("react.offscreen"),Z=Symbol.iterator;function se(n){return n===null||typeof n!="object"?null:(n=Z&&n[Z]||n["@@iterator"],typeof n=="function"?n:null)}var ie=Object.assign,P;function H(n){if(P===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);P=i&&i[1]||""}return`
`+P+n}var le=!1;function pe(n,i){if(!n||le)return"";le=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(B){var c=B}Reflect.construct(n,[],i)}else{try{i.call()}catch(B){c=B}n.call(i.prototype)}else{try{throw Error()}catch(B){c=B}n()}}catch(B){if(B&&c&&typeof B.stack=="string"){for(var f=B.stack.split(`
`),p=c.stack.split(`
`),w=f.length-1,A=p.length-1;1<=w&&0<=A&&f[w]!==p[A];)A--;for(;1<=w&&0<=A;w--,A--)if(f[w]!==p[A]){if(w!==1||A!==1)do if(w--,A--,0>A||f[w]!==p[A]){var N=`
`+f[w].replace(" at new "," at ");return n.displayName&&N.includes("<anonymous>")&&(N=N.replace("<anonymous>",n.displayName)),N}while(1<=w&&0<=A);break}}}finally{le=!1,Error.prepareStackTrace=a}return(n=n?n.displayName||n.name:"")?H(n):""}function Se(n){switch(n.tag){case 5:return H(n.type);case 16:return H("Lazy");case 13:return H("Suspense");case 19:return H("SuspenseList");case 0:case 2:case 15:return n=pe(n.type,!1),n;case 11:return n=pe(n.type.render,!1),n;case 1:return n=pe(n.type,!0),n;default:return""}}function Re(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case x:return"Fragment";case ye:return"Portal";case C:return"Profiler";case S:return"StrictMode";case R:return"Suspense";case Me:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case k:return(n.displayName||"Context")+".Consumer";case D:return(n._context.displayName||"Context")+".Provider";case b:var i=n.render;return n=n.displayName,n||(n=i.displayName||i.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ve:return i=n.displayName||null,i!==null?i:Re(n.type)||"Memo";case Ne:i=n._payload,n=n._init;try{return Re(n(i))}catch{}}return null}function Ue(n){var i=n.type;switch(n.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=i.render,n=n.displayName||n.name||"",i.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Re(i);case 8:return i===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function De(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $e(n){var i=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function jt(n){var i=$e(n)?"checked":"value",a=Object.getOwnPropertyDescriptor(n.constructor.prototype,i),c=""+n[i];if(!n.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,p=a.set;return Object.defineProperty(n,i,{configurable:!0,get:function(){return f.call(this)},set:function(w){c=""+w,p.call(this,w)}}),Object.defineProperty(n,i,{enumerable:a.enumerable}),{getValue:function(){return c},setValue:function(w){c=""+w},stopTracking:function(){n._valueTracker=null,delete n[i]}}}}function us(n){n._valueTracker||(n._valueTracker=jt(n))}function vo(n){if(!n)return!1;var i=n._valueTracker;if(!i)return!0;var a=i.getValue(),c="";return n&&(c=$e(n)?n.checked?"true":"false":n.value),n=c,n!==a?(i.setValue(n),!0):!1}function Dr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function cs(n,i){var a=i.checked;return ie({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??n._wrapperState.initialChecked})}function Wa(n,i){var a=i.defaultValue==null?"":i.defaultValue,c=i.checked!=null?i.checked:i.defaultChecked;a=De(i.value!=null?i.value:a),n._wrapperState={initialChecked:c,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function hs(n,i){i=i.checked,i!=null&&Q(n,"checked",i,!1)}function Ii(n,i){hs(n,i);var a=De(i.value),c=i.type;if(a!=null)c==="number"?(a===0&&n.value===""||n.value!=a)&&(n.value=""+a):n.value!==""+a&&(n.value=""+a);else if(c==="submit"||c==="reset"){n.removeAttribute("value");return}i.hasOwnProperty("value")?ct(n,i.type,a):i.hasOwnProperty("defaultValue")&&ct(n,i.type,De(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(n.defaultChecked=!!i.defaultChecked)}function wo(n,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var c=i.type;if(!(c!=="submit"&&c!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+n._wrapperState.initialValue,a||i===n.value||(n.value=i),n.defaultValue=i}a=n.name,a!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,a!==""&&(n.name=a)}function ct(n,i,a){(i!=="number"||Dr(n.ownerDocument)!==n)&&(a==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+a&&(n.defaultValue=""+a))}var ot=Array.isArray;function vn(n,i,a,c){if(n=n.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<n.length;a++)f=i.hasOwnProperty("$"+n[a].value),n[a].selected!==f&&(n[a].selected=f),f&&c&&(n[a].defaultSelected=!0)}else{for(a=""+De(a),i=null,f=0;f<n.length;f++){if(n[f].value===a){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}i!==null||n[f].disabled||(i=n[f])}i!==null&&(i.selected=!0)}}function Eo(n,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return ie({},i,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function To(n,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(ot(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}n._wrapperState={initialValue:De(a)}}function Ga(n,i){var a=De(i.value),c=De(i.defaultValue);a!=null&&(a=""+a,a!==n.value&&(n.value=a),i.defaultValue==null&&n.defaultValue!==a&&(n.defaultValue=a)),c!=null&&(n.defaultValue=""+c)}function Vr(n){var i=n.textContent;i===n._wrapperState.initialValue&&i!==""&&i!==null&&(n.value=i)}function Io(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fs(n,i){return n==null||n==="http://www.w3.org/1999/xhtml"?Io(i):n==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Lr,Qa=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,c,f){MSApp.execUnsafeLocalFunction(function(){return n(i,a,c,f)})}:n})(function(n,i){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=i;else{for(Lr=Lr||document.createElement("div"),Lr.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Lr.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;i.firstChild;)n.appendChild(i.firstChild)}});function Si(n,i){if(i){var a=n.firstChild;if(a&&a===n.lastChild&&a.nodeType===3){a.nodeValue=i;return}}n.textContent=i}var br={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ka=["Webkit","ms","Moz","O"];Object.keys(br).forEach(function(n){Ka.forEach(function(i){i=i+n.charAt(0).toUpperCase()+n.substring(1),br[i]=br[n]})});function Mr(n,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||br.hasOwnProperty(n)&&br[n]?(""+i).trim():i+"px"}function ds(n,i){n=n.style;for(var a in i)if(i.hasOwnProperty(a)){var c=a.indexOf("--")===0,f=Mr(a,i[a],c);a==="float"&&(a="cssFloat"),c?n.setProperty(a,f):n[a]=f}}var So=ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wn(n,i){if(i){if(So[n]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,n));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function ps(n,i){if(n.indexOf("-")===-1)return typeof i.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Or=null;function ms(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var or=null,ar=null,it=null;function Ao(n){if(n=Jo(n)){if(typeof or!="function")throw Error(t(280));var i=n.stateNode;i&&(i=Tl(i),or(n.stateNode,n.type,i))}}function Fr(n){ar?it?it.push(n):it=[n]:ar=n}function jr(){if(ar){var n=ar,i=it;if(it=ar=null,Ao(n),i)for(n=0;n<i.length;n++)Ao(i[n])}}function Ya(n,i){return n(i)}function Xa(){}var Dn=!1;function Ja(n,i,a){if(Dn)return n(i,a);Dn=!0;try{return Ya(n,i,a)}finally{Dn=!1,(ar!==null||it!==null)&&(Xa(),jr())}}function Ai(n,i){var a=n.stateNode;if(a===null)return null;var c=Tl(a);if(c===null)return null;a=c[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var Ur=!1;if(d)try{var Br={};Object.defineProperty(Br,"passive",{get:function(){Ur=!0}}),window.addEventListener("test",Br,Br),window.removeEventListener("test",Br,Br)}catch{Ur=!1}function Za(n,i,a,c,f,p,w,A,N){var B=Array.prototype.slice.call(arguments,3);try{i.apply(a,B)}catch(X){this.onError(X)}}var lr=!1,Vn=null,gs=!1,un=null,el={onError:function(n){lr=!0,Vn=n}};function tl(n,i,a,c,f,p,w,A,N){lr=!1,Vn=null,Za.apply(el,arguments)}function Co(n,i,a,c,f,p,w,A,N){if(tl.apply(this,arguments),lr){if(lr){var B=Vn;lr=!1,Vn=null}else throw Error(t(198));gs||(gs=!0,un=B)}}function En(n){var i=n,a=n;if(n.alternate)for(;i.return;)i=i.return;else{n=i;do i=n,(i.flags&4098)!==0&&(a=i.return),n=i.return;while(n)}return i.tag===3?a:null}function Ro(n){if(n.tag===13){var i=n.memoizedState;if(i===null&&(n=n.alternate,n!==null&&(i=n.memoizedState)),i!==null)return i.dehydrated}return null}function nl(n){if(En(n)!==n)throw Error(t(188))}function rl(n){var i=n.alternate;if(!i){if(i=En(n),i===null)throw Error(t(188));return i!==n?null:n}for(var a=n,c=i;;){var f=a.return;if(f===null)break;var p=f.alternate;if(p===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===p.child){for(p=f.child;p;){if(p===a)return nl(f),n;if(p===c)return nl(f),i;p=p.sibling}throw Error(t(188))}if(a.return!==c.return)a=f,c=p;else{for(var w=!1,A=f.child;A;){if(A===a){w=!0,a=f,c=p;break}if(A===c){w=!0,c=f,a=p;break}A=A.sibling}if(!w){for(A=p.child;A;){if(A===a){w=!0,a=p,c=f;break}if(A===c){w=!0,c=p,a=f;break}A=A.sibling}if(!w)throw Error(t(189))}}if(a.alternate!==c)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?n:i}function il(n){return n=rl(n),n!==null?Ci(n):null}function Ci(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var i=Ci(n);if(i!==null)return i;n=n.sibling}return null}var xo=e.unstable_scheduleCallback,ys=e.unstable_cancelCallback,Ri=e.unstable_shouldYield,ur=e.unstable_requestPaint,Ke=e.unstable_now,sc=e.unstable_getCurrentPriorityLevel,_s=e.unstable_ImmediatePriority,Po=e.unstable_UserBlockingPriority,xi=e.unstable_NormalPriority,ko=e.unstable_LowPriority,vs=e.unstable_IdlePriority,Pi=null,Xt=null;function sl(n){if(Xt&&typeof Xt.onCommitFiberRoot=="function")try{Xt.onCommitFiberRoot(Pi,n,void 0,(n.current.flags&128)===128)}catch{}}var Jt=Math.clz32?Math.clz32:ki,Ln=Math.log,cn=Math.LN2;function ki(n){return n>>>=0,n===0?32:31-(Ln(n)/cn|0)|0}var bn=64,zr=4194304;function ze(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function cr(n,i){var a=n.pendingLanes;if(a===0)return 0;var c=0,f=n.suspendedLanes,p=n.pingedLanes,w=a&268435455;if(w!==0){var A=w&~f;A!==0?c=ze(A):(p&=w,p!==0&&(c=ze(p)))}else w=a&~f,w!==0?c=ze(w):p!==0&&(c=ze(p));if(c===0)return 0;if(i!==0&&i!==c&&(i&f)===0&&(f=c&-c,p=i&-i,f>=p||f===16&&(p&4194240)!==0))return i;if((c&4)!==0&&(c|=a&16),i=n.entangledLanes,i!==0)for(n=n.entanglements,i&=c;0<i;)a=31-Jt(i),f=1<<a,c|=n[a],i&=~f;return c}function Ni(n,i){switch(n){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Di(n,i){for(var a=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,p=n.pendingLanes;0<p;){var w=31-Jt(p),A=1<<w,N=f[w];N===-1?((A&a)===0||(A&c)!==0)&&(f[w]=Ni(A,i)):N<=i&&(n.expiredLanes|=A),p&=~A}}function No(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Do(){var n=bn;return bn<<=1,(bn&4194240)===0&&(bn=64),n}function Vo(n){for(var i=[],a=0;31>a;a++)i.push(n);return i}function Vi(n,i,a){n.pendingLanes|=i,i!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,i=31-Jt(i),n[i]=a}function oc(n,i){var a=n.pendingLanes&~i;n.pendingLanes=i,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=i,n.mutableReadLanes&=i,n.entangledLanes&=i,i=n.entanglements;var c=n.eventTimes;for(n=n.expirationTimes;0<a;){var f=31-Jt(a),p=1<<f;i[f]=0,c[f]=-1,n[f]=-1,a&=~p}}function Lo(n,i){var a=n.entangledLanes|=i;for(n=n.entanglements;a;){var c=31-Jt(a),f=1<<c;f&i|n[c]&i&&(n[c]|=i),a&=~f}}var be=0;function Mn(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var bo,ws,Mo,Oo,Fo,On=!1,Es=[],Fn=null,jn=null,St=null,Li=new Map,hr=new Map,Zt=[],ol="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $r(n,i){switch(n){case"focusin":case"focusout":Fn=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":St=null;break;case"pointerover":case"pointerout":Li.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":hr.delete(i.pointerId)}}function Tn(n,i,a,c,f,p){return n===null||n.nativeEvent!==p?(n={blockedOn:i,domEventName:a,eventSystemFlags:c,nativeEvent:p,targetContainers:[f]},i!==null&&(i=Jo(i),i!==null&&ws(i)),n):(n.eventSystemFlags|=c,i=n.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),n)}function al(n,i,a,c,f){switch(i){case"focusin":return Fn=Tn(Fn,n,i,a,c,f),!0;case"dragenter":return jn=Tn(jn,n,i,a,c,f),!0;case"mouseover":return St=Tn(St,n,i,a,c,f),!0;case"pointerover":var p=f.pointerId;return Li.set(p,Tn(Li.get(p)||null,n,i,a,c,f)),!0;case"gotpointercapture":return p=f.pointerId,hr.set(p,Tn(hr.get(p)||null,n,i,a,c,f)),!0}return!1}function Ts(n){var i=Fi(n.target);if(i!==null){var a=En(i);if(a!==null){if(i=a.tag,i===13){if(i=Ro(a),i!==null){n.blockedOn=i,Fo(n.priority,function(){Mo(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){n.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}n.blockedOn=null}function We(n){if(n.blockedOn!==null)return!1;for(var i=n.targetContainers;0<i.length;){var a=Is(n.domEventName,n.eventSystemFlags,i[0],n.nativeEvent);if(a===null){a=n.nativeEvent;var c=new a.constructor(a.type,a);Or=c,a.target.dispatchEvent(c),Or=null}else return i=Jo(a),i!==null&&ws(i),n.blockedOn=a,!1;i.shift()}return!0}function ll(n,i,a){We(n)&&a.delete(i)}function ac(){On=!1,Fn!==null&&We(Fn)&&(Fn=null),jn!==null&&We(jn)&&(jn=null),St!==null&&We(St)&&(St=null),Li.forEach(ll),hr.forEach(ll)}function qr(n,i){n.blockedOn===i&&(n.blockedOn=null,On||(On=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ac)))}function Hr(n){function i(f){return qr(f,n)}if(0<Es.length){qr(Es[0],n);for(var a=1;a<Es.length;a++){var c=Es[a];c.blockedOn===n&&(c.blockedOn=null)}}for(Fn!==null&&qr(Fn,n),jn!==null&&qr(jn,n),St!==null&&qr(St,n),Li.forEach(i),hr.forEach(i),a=0;a<Zt.length;a++)c=Zt[a],c.blockedOn===n&&(c.blockedOn=null);for(;0<Zt.length&&(a=Zt[0],a.blockedOn===null);)Ts(a),a.blockedOn===null&&Zt.shift()}var fr=oe.ReactCurrentBatchConfig,dr=!0;function Un(n,i,a,c){var f=be,p=fr.transition;fr.transition=null;try{be=1,jo(n,i,a,c)}finally{be=f,fr.transition=p}}function ul(n,i,a,c){var f=be,p=fr.transition;fr.transition=null;try{be=4,jo(n,i,a,c)}finally{be=f,fr.transition=p}}function jo(n,i,a,c){if(dr){var f=Is(n,i,a,c);if(f===null)_c(n,i,c,Bn,a),$r(n,c);else if(al(f,n,i,a,c))c.stopPropagation();else if($r(n,c),i&4&&-1<ol.indexOf(n)){for(;f!==null;){var p=Jo(f);if(p!==null&&bo(p),p=Is(n,i,a,c),p===null&&_c(n,i,c,Bn,a),p===f)break;f=p}f!==null&&c.stopPropagation()}else _c(n,i,c,null,a)}}var Bn=null;function Is(n,i,a,c){if(Bn=null,n=ms(c),n=Fi(n),n!==null)if(i=En(n),i===null)n=null;else if(a=i.tag,a===13){if(n=Ro(i),n!==null)return n;n=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null);return Bn=n,null}function Ss(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sc()){case _s:return 1;case Po:return 4;case xi:case ko:return 16;case vs:return 536870912;default:return 16}default:return 16}}var en=null,As=null,pr=null;function cl(){if(pr)return pr;var n,i=As,a=i.length,c,f="value"in en?en.value:en.textContent,p=f.length;for(n=0;n<a&&i[n]===f[n];n++);var w=a-n;for(c=1;c<=w&&i[a-c]===f[p-c];c++);return pr=f.slice(n,1<c?1-c:void 0)}function bi(n){var i=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&i===13&&(n=13)):n=i,n===10&&(n=13),32<=n||n===13?n:0}function zn(){return!0}function Uo(){return!1}function Nt(n){function i(a,c,f,p,w){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=p,this.target=w,this.currentTarget=null;for(var A in n)n.hasOwnProperty(A)&&(a=n[A],this[A]=a?a(p):p[A]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?zn:Uo,this.isPropagationStopped=Uo,this}return ie(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=zn)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=zn)},persist:function(){},isPersistent:zn}),i}var $n={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mi=Nt($n),Wr=ie({},$n,{view:0,detail:0}),Cs=Nt(Wr),Rs,xs,tn,Oi=ie({},Wr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xe,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==tn&&(tn&&n.type==="mousemove"?(Rs=n.screenX-tn.screenX,xs=n.screenY-tn.screenY):xs=Rs=0,tn=n),Rs)},movementY:function(n){return"movementY"in n?n.movementY:xs}}),Bo=Nt(Oi),hl=ie({},Oi,{dataTransfer:0}),fl=Nt(hl),Ps=ie({},Wr,{relatedTarget:0}),At=Nt(Ps),dl=ie({},$n,{animationName:0,elapsedTime:0,pseudoElement:0}),pl=Nt(dl),Gr=ie({},$n,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),u=Nt(Gr),m=ie({},$n,{data:0}),_=Nt(m),T={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},O={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},z={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function re(n){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(n):(n=z[n])?!!i[n]:!1}function xe(){return re}var at=ie({},Wr,{key:function(n){if(n.key){var i=T[n.key]||n.key;if(i!=="Unidentified")return i}return n.type==="keypress"?(n=bi(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?O[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xe,charCode:function(n){return n.type==="keypress"?bi(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?bi(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),He=Nt(at),ht=ie({},Oi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nn=Nt(ht),mr=ie({},Wr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xe}),qn=Nt(mr),Hn=ie({},$n,{propertyName:0,elapsedTime:0,pseudoElement:0}),ks=Nt(Hn),zo=ie({},Oi,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),$v=Nt(zo),qv=[9,13,27,32],lc=d&&"CompositionEvent"in window,$o=null;d&&"documentMode"in document&&($o=document.documentMode);var Hv=d&&"TextEvent"in window&&!$o,Ed=d&&(!lc||$o&&8<$o&&11>=$o),Td=" ",Id=!1;function Sd(n,i){switch(n){case"keyup":return qv.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ad(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Ns=!1;function Wv(n,i){switch(n){case"compositionend":return Ad(i);case"keypress":return i.which!==32?null:(Id=!0,Td);case"textInput":return n=i.data,n===Td&&Id?null:n;default:return null}}function Gv(n,i){if(Ns)return n==="compositionend"||!lc&&Sd(n,i)?(n=cl(),pr=As=en=null,Ns=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ed&&i.locale!=="ko"?null:i.data;default:return null}}var Qv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cd(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i==="input"?!!Qv[n.type]:i==="textarea"}function Rd(n,i,a,c){Fr(c),i=vl(i,"onChange"),0<i.length&&(a=new Mi("onChange","change",null,a,c),n.push({event:a,listeners:i}))}var qo=null,Ho=null;function Kv(n){Hd(n,0)}function ml(n){var i=Ms(n);if(vo(i))return n}function Yv(n,i){if(n==="change")return i}var xd=!1;if(d){var uc;if(d){var cc="oninput"in document;if(!cc){var Pd=document.createElement("div");Pd.setAttribute("oninput","return;"),cc=typeof Pd.oninput=="function"}uc=cc}else uc=!1;xd=uc&&(!document.documentMode||9<document.documentMode)}function kd(){qo&&(qo.detachEvent("onpropertychange",Nd),Ho=qo=null)}function Nd(n){if(n.propertyName==="value"&&ml(Ho)){var i=[];Rd(i,Ho,n,ms(n)),Ja(Kv,i)}}function Xv(n,i,a){n==="focusin"?(kd(),qo=i,Ho=a,qo.attachEvent("onpropertychange",Nd)):n==="focusout"&&kd()}function Jv(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ml(Ho)}function Zv(n,i){if(n==="click")return ml(i)}function ew(n,i){if(n==="input"||n==="change")return ml(i)}function tw(n,i){return n===i&&(n!==0||1/n===1/i)||n!==n&&i!==i}var In=typeof Object.is=="function"?Object.is:tw;function Wo(n,i){if(In(n,i))return!0;if(typeof n!="object"||n===null||typeof i!="object"||i===null)return!1;var a=Object.keys(n),c=Object.keys(i);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!g.call(i,f)||!In(n[f],i[f]))return!1}return!0}function Dd(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Vd(n,i){var a=Dd(n);n=0;for(var c;a;){if(a.nodeType===3){if(c=n+a.textContent.length,n<=i&&c>=i)return{node:a,offset:i-n};n=c}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Dd(a)}}function Ld(n,i){return n&&i?n===i?!0:n&&n.nodeType===3?!1:i&&i.nodeType===3?Ld(n,i.parentNode):"contains"in n?n.contains(i):n.compareDocumentPosition?!!(n.compareDocumentPosition(i)&16):!1:!1}function bd(){for(var n=window,i=Dr();i instanceof n.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)n=i.contentWindow;else break;i=Dr(n.document)}return i}function hc(n){var i=n&&n.nodeName&&n.nodeName.toLowerCase();return i&&(i==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||i==="textarea"||n.contentEditable==="true")}function nw(n){var i=bd(),a=n.focusedElem,c=n.selectionRange;if(i!==a&&a&&a.ownerDocument&&Ld(a.ownerDocument.documentElement,a)){if(c!==null&&hc(a)){if(i=c.start,n=c.end,n===void 0&&(n=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(n,a.value.length);else if(n=(i=a.ownerDocument||document)&&i.defaultView||window,n.getSelection){n=n.getSelection();var f=a.textContent.length,p=Math.min(c.start,f);c=c.end===void 0?p:Math.min(c.end,f),!n.extend&&p>c&&(f=c,c=p,p=f),f=Vd(a,p);var w=Vd(a,c);f&&w&&(n.rangeCount!==1||n.anchorNode!==f.node||n.anchorOffset!==f.offset||n.focusNode!==w.node||n.focusOffset!==w.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),n.removeAllRanges(),p>c?(n.addRange(i),n.extend(w.node,w.offset)):(i.setEnd(w.node,w.offset),n.addRange(i)))}}for(i=[],n=a;n=n.parentNode;)n.nodeType===1&&i.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)n=i[a],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var rw=d&&"documentMode"in document&&11>=document.documentMode,Ds=null,fc=null,Go=null,dc=!1;function Md(n,i,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;dc||Ds==null||Ds!==Dr(c)||(c=Ds,"selectionStart"in c&&hc(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Go&&Wo(Go,c)||(Go=c,c=vl(fc,"onSelect"),0<c.length&&(i=new Mi("onSelect","select",null,i,a),n.push({event:i,listeners:c}),i.target=Ds)))}function gl(n,i){var a={};return a[n.toLowerCase()]=i.toLowerCase(),a["Webkit"+n]="webkit"+i,a["Moz"+n]="moz"+i,a}var Vs={animationend:gl("Animation","AnimationEnd"),animationiteration:gl("Animation","AnimationIteration"),animationstart:gl("Animation","AnimationStart"),transitionend:gl("Transition","TransitionEnd")},pc={},Od={};d&&(Od=document.createElement("div").style,"AnimationEvent"in window||(delete Vs.animationend.animation,delete Vs.animationiteration.animation,delete Vs.animationstart.animation),"TransitionEvent"in window||delete Vs.transitionend.transition);function yl(n){if(pc[n])return pc[n];if(!Vs[n])return n;var i=Vs[n],a;for(a in i)if(i.hasOwnProperty(a)&&a in Od)return pc[n]=i[a];return n}var Fd=yl("animationend"),jd=yl("animationiteration"),Ud=yl("animationstart"),Bd=yl("transitionend"),zd=new Map,$d="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(n,i){zd.set(n,i),l(i,[n])}for(var mc=0;mc<$d.length;mc++){var gc=$d[mc],iw=gc.toLowerCase(),sw=gc[0].toUpperCase()+gc.slice(1);Qr(iw,"on"+sw)}Qr(Fd,"onAnimationEnd"),Qr(jd,"onAnimationIteration"),Qr(Ud,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(Bd,"onTransitionEnd"),h("onMouseEnter",["mouseout","mouseover"]),h("onMouseLeave",["mouseout","mouseover"]),h("onPointerEnter",["pointerout","pointerover"]),h("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ow=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qo));function qd(n,i,a){var c=n.type||"unknown-event";n.currentTarget=a,Co(c,i,void 0,n),n.currentTarget=null}function Hd(n,i){i=(i&4)!==0;for(var a=0;a<n.length;a++){var c=n[a],f=c.event;c=c.listeners;e:{var p=void 0;if(i)for(var w=c.length-1;0<=w;w--){var A=c[w],N=A.instance,B=A.currentTarget;if(A=A.listener,N!==p&&f.isPropagationStopped())break e;qd(f,A,B),p=N}else for(w=0;w<c.length;w++){if(A=c[w],N=A.instance,B=A.currentTarget,A=A.listener,N!==p&&f.isPropagationStopped())break e;qd(f,A,B),p=N}}}if(gs)throw n=un,gs=!1,un=null,n}function Ye(n,i){var a=i[Sc];a===void 0&&(a=i[Sc]=new Set);var c=n+"__bubble";a.has(c)||(Wd(i,n,2,!1),a.add(c))}function yc(n,i,a){var c=0;i&&(c|=4),Wd(a,n,c,i)}var _l="_reactListening"+Math.random().toString(36).slice(2);function Ko(n){if(!n[_l]){n[_l]=!0,s.forEach(function(a){a!=="selectionchange"&&(ow.has(a)||yc(a,!1,n),yc(a,!0,n))});var i=n.nodeType===9?n:n.ownerDocument;i===null||i[_l]||(i[_l]=!0,yc("selectionchange",!1,i))}}function Wd(n,i,a,c){switch(Ss(i)){case 1:var f=Un;break;case 4:f=ul;break;default:f=jo}a=f.bind(null,i,a,n),f=void 0,!Ur||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(i,a,{capture:!0,passive:f}):n.addEventListener(i,a,!0):f!==void 0?n.addEventListener(i,a,{passive:f}):n.addEventListener(i,a,!1)}function _c(n,i,a,c,f){var p=c;if((i&1)===0&&(i&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var A=c.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(w===4)for(w=c.return;w!==null;){var N=w.tag;if((N===3||N===4)&&(N=w.stateNode.containerInfo,N===f||N.nodeType===8&&N.parentNode===f))return;w=w.return}for(;A!==null;){if(w=Fi(A),w===null)return;if(N=w.tag,N===5||N===6){c=p=w;continue e}A=A.parentNode}}c=c.return}Ja(function(){var B=p,X=ms(a),ee=[];e:{var Y=zd.get(n);if(Y!==void 0){var ue=Mi,fe=n;switch(n){case"keypress":if(bi(a)===0)break e;case"keydown":case"keyup":ue=He;break;case"focusin":fe="focus",ue=At;break;case"focusout":fe="blur",ue=At;break;case"beforeblur":case"afterblur":ue=At;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Bo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=fl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=qn;break;case Fd:case jd:case Ud:ue=pl;break;case Bd:ue=ks;break;case"scroll":ue=Cs;break;case"wheel":ue=$v;break;case"copy":case"cut":case"paste":ue=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=nn}var de=(i&4)!==0,lt=!de&&n==="scroll",M=de?Y!==null?Y+"Capture":null:Y;de=[];for(var V=B,j;V!==null;){j=V;var te=j.stateNode;if(j.tag===5&&te!==null&&(j=te,M!==null&&(te=Ai(V,M),te!=null&&de.push(Yo(V,te,j)))),lt)break;V=V.return}0<de.length&&(Y=new ue(Y,fe,null,a,X),ee.push({event:Y,listeners:de}))}}if((i&7)===0){e:{if(Y=n==="mouseover"||n==="pointerover",ue=n==="mouseout"||n==="pointerout",Y&&a!==Or&&(fe=a.relatedTarget||a.fromElement)&&(Fi(fe)||fe[gr]))break e;if((ue||Y)&&(Y=X.window===X?X:(Y=X.ownerDocument)?Y.defaultView||Y.parentWindow:window,ue?(fe=a.relatedTarget||a.toElement,ue=B,fe=fe?Fi(fe):null,fe!==null&&(lt=En(fe),fe!==lt||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ue=null,fe=B),ue!==fe)){if(de=Bo,te="onMouseLeave",M="onMouseEnter",V="mouse",(n==="pointerout"||n==="pointerover")&&(de=nn,te="onPointerLeave",M="onPointerEnter",V="pointer"),lt=ue==null?Y:Ms(ue),j=fe==null?Y:Ms(fe),Y=new de(te,V+"leave",ue,a,X),Y.target=lt,Y.relatedTarget=j,te=null,Fi(X)===B&&(de=new de(M,V+"enter",fe,a,X),de.target=j,de.relatedTarget=lt,te=de),lt=te,ue&&fe)t:{for(de=ue,M=fe,V=0,j=de;j;j=Ls(j))V++;for(j=0,te=M;te;te=Ls(te))j++;for(;0<V-j;)de=Ls(de),V--;for(;0<j-V;)M=Ls(M),j--;for(;V--;){if(de===M||M!==null&&de===M.alternate)break t;de=Ls(de),M=Ls(M)}de=null}else de=null;ue!==null&&Gd(ee,Y,ue,de,!1),fe!==null&&lt!==null&&Gd(ee,lt,fe,de,!0)}}e:{if(Y=B?Ms(B):window,ue=Y.nodeName&&Y.nodeName.toLowerCase(),ue==="select"||ue==="input"&&Y.type==="file")var me=Yv;else if(Cd(Y))if(xd)me=ew;else{me=Jv;var we=Xv}else(ue=Y.nodeName)&&ue.toLowerCase()==="input"&&(Y.type==="checkbox"||Y.type==="radio")&&(me=Zv);if(me&&(me=me(n,B))){Rd(ee,me,a,X);break e}we&&we(n,Y,B),n==="focusout"&&(we=Y._wrapperState)&&we.controlled&&Y.type==="number"&&ct(Y,"number",Y.value)}switch(we=B?Ms(B):window,n){case"focusin":(Cd(we)||we.contentEditable==="true")&&(Ds=we,fc=B,Go=null);break;case"focusout":Go=fc=Ds=null;break;case"mousedown":dc=!0;break;case"contextmenu":case"mouseup":case"dragend":dc=!1,Md(ee,a,X);break;case"selectionchange":if(rw)break;case"keydown":case"keyup":Md(ee,a,X)}var Ee;if(lc)e:{switch(n){case"compositionstart":var Ie="onCompositionStart";break e;case"compositionend":Ie="onCompositionEnd";break e;case"compositionupdate":Ie="onCompositionUpdate";break e}Ie=void 0}else Ns?Sd(n,a)&&(Ie="onCompositionEnd"):n==="keydown"&&a.keyCode===229&&(Ie="onCompositionStart");Ie&&(Ed&&a.locale!=="ko"&&(Ns||Ie!=="onCompositionStart"?Ie==="onCompositionEnd"&&Ns&&(Ee=cl()):(en=X,As="value"in en?en.value:en.textContent,Ns=!0)),we=vl(B,Ie),0<we.length&&(Ie=new _(Ie,n,null,a,X),ee.push({event:Ie,listeners:we}),Ee?Ie.data=Ee:(Ee=Ad(a),Ee!==null&&(Ie.data=Ee)))),(Ee=Hv?Wv(n,a):Gv(n,a))&&(B=vl(B,"onBeforeInput"),0<B.length&&(X=new _("onBeforeInput","beforeinput",null,a,X),ee.push({event:X,listeners:B}),X.data=Ee))}Hd(ee,i)})}function Yo(n,i,a){return{instance:n,listener:i,currentTarget:a}}function vl(n,i){for(var a=i+"Capture",c=[];n!==null;){var f=n,p=f.stateNode;f.tag===5&&p!==null&&(f=p,p=Ai(n,a),p!=null&&c.unshift(Yo(n,p,f)),p=Ai(n,i),p!=null&&c.push(Yo(n,p,f))),n=n.return}return c}function Ls(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function Gd(n,i,a,c,f){for(var p=i._reactName,w=[];a!==null&&a!==c;){var A=a,N=A.alternate,B=A.stateNode;if(N!==null&&N===c)break;A.tag===5&&B!==null&&(A=B,f?(N=Ai(a,p),N!=null&&w.unshift(Yo(a,N,A))):f||(N=Ai(a,p),N!=null&&w.push(Yo(a,N,A)))),a=a.return}w.length!==0&&n.push({event:i,listeners:w})}var aw=/\r\n?/g,lw=/\u0000|\uFFFD/g;function Qd(n){return(typeof n=="string"?n:""+n).replace(aw,`
`).replace(lw,"")}function wl(n,i,a){if(i=Qd(i),Qd(n)!==i&&a)throw Error(t(425))}function El(){}var vc=null,wc=null;function Ec(n,i){return n==="textarea"||n==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Tc=typeof setTimeout=="function"?setTimeout:void 0,uw=typeof clearTimeout=="function"?clearTimeout:void 0,Kd=typeof Promise=="function"?Promise:void 0,cw=typeof queueMicrotask=="function"?queueMicrotask:typeof Kd<"u"?function(n){return Kd.resolve(null).then(n).catch(hw)}:Tc;function hw(n){setTimeout(function(){throw n})}function Ic(n,i){var a=i,c=0;do{var f=a.nextSibling;if(n.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(c===0){n.removeChild(f),Hr(i);return}c--}else a!=="$"&&a!=="$?"&&a!=="$!"||c++;a=f}while(a);Hr(i)}function Kr(n){for(;n!=null;n=n.nextSibling){var i=n.nodeType;if(i===1||i===3)break;if(i===8){if(i=n.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return n}function Yd(n){n=n.previousSibling;for(var i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return n;i--}else a==="/$"&&i++}n=n.previousSibling}return null}var bs=Math.random().toString(36).slice(2),Wn="__reactFiber$"+bs,Xo="__reactProps$"+bs,gr="__reactContainer$"+bs,Sc="__reactEvents$"+bs,fw="__reactListeners$"+bs,dw="__reactHandles$"+bs;function Fi(n){var i=n[Wn];if(i)return i;for(var a=n.parentNode;a;){if(i=a[gr]||a[Wn]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(n=Yd(n);n!==null;){if(a=n[Wn])return a;n=Yd(n)}return i}n=a,a=n.parentNode}return null}function Jo(n){return n=n[Wn]||n[gr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ms(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(t(33))}function Tl(n){return n[Xo]||null}var Ac=[],Os=-1;function Yr(n){return{current:n}}function Xe(n){0>Os||(n.current=Ac[Os],Ac[Os]=null,Os--)}function Ge(n,i){Os++,Ac[Os]=n.current,n.current=i}var Xr={},Dt=Yr(Xr),zt=Yr(!1),ji=Xr;function Fs(n,i){var a=n.type.contextTypes;if(!a)return Xr;var c=n.stateNode;if(c&&c.__reactInternalMemoizedUnmaskedChildContext===i)return c.__reactInternalMemoizedMaskedChildContext;var f={},p;for(p in a)f[p]=i[p];return c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=f),f}function $t(n){return n=n.childContextTypes,n!=null}function Il(){Xe(zt),Xe(Dt)}function Xd(n,i,a){if(Dt.current!==Xr)throw Error(t(168));Ge(Dt,i),Ge(zt,a)}function Jd(n,i,a){var c=n.stateNode;if(i=i.childContextTypes,typeof c.getChildContext!="function")return a;c=c.getChildContext();for(var f in c)if(!(f in i))throw Error(t(108,Ue(n)||"Unknown",f));return ie({},a,c)}function Sl(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Xr,ji=Dt.current,Ge(Dt,n),Ge(zt,zt.current),!0}function Zd(n,i,a){var c=n.stateNode;if(!c)throw Error(t(169));a?(n=Jd(n,i,ji),c.__reactInternalMemoizedMergedChildContext=n,Xe(zt),Xe(Dt),Ge(Dt,n)):Xe(zt),Ge(zt,a)}var yr=null,Al=!1,Cc=!1;function ep(n){yr===null?yr=[n]:yr.push(n)}function pw(n){Al=!0,ep(n)}function Jr(){if(!Cc&&yr!==null){Cc=!0;var n=0,i=be;try{var a=yr;for(be=1;n<a.length;n++){var c=a[n];do c=c(!0);while(c!==null)}yr=null,Al=!1}catch(f){throw yr!==null&&(yr=yr.slice(n+1)),xo(_s,Jr),f}finally{be=i,Cc=!1}}return null}var js=[],Us=0,Cl=null,Rl=0,hn=[],fn=0,Ui=null,_r=1,vr="";function Bi(n,i){js[Us++]=Rl,js[Us++]=Cl,Cl=n,Rl=i}function tp(n,i,a){hn[fn++]=_r,hn[fn++]=vr,hn[fn++]=Ui,Ui=n;var c=_r;n=vr;var f=32-Jt(c)-1;c&=~(1<<f),a+=1;var p=32-Jt(i)+f;if(30<p){var w=f-f%5;p=(c&(1<<w)-1).toString(32),c>>=w,f-=w,_r=1<<32-Jt(i)+f|a<<f|c,vr=p+n}else _r=1<<p|a<<f|c,vr=n}function Rc(n){n.return!==null&&(Bi(n,1),tp(n,1,0))}function xc(n){for(;n===Cl;)Cl=js[--Us],js[Us]=null,Rl=js[--Us],js[Us]=null;for(;n===Ui;)Ui=hn[--fn],hn[fn]=null,vr=hn[--fn],hn[fn]=null,_r=hn[--fn],hn[fn]=null}var rn=null,sn=null,Ze=!1,Sn=null;function np(n,i){var a=gn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=n,i=n.deletions,i===null?(n.deletions=[a],n.flags|=16):i.push(a)}function rp(n,i){switch(n.tag){case 5:var a=n.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(n.stateNode=i,rn=n,sn=Kr(i.firstChild),!0):!1;case 6:return i=n.pendingProps===""||i.nodeType!==3?null:i,i!==null?(n.stateNode=i,rn=n,sn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=Ui!==null?{id:_r,overflow:vr}:null,n.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=gn(18,null,null,0),a.stateNode=i,a.return=n,n.child=a,rn=n,sn=null,!0):!1;default:return!1}}function Pc(n){return(n.mode&1)!==0&&(n.flags&128)===0}function kc(n){if(Ze){var i=sn;if(i){var a=i;if(!rp(n,i)){if(Pc(n))throw Error(t(418));i=Kr(a.nextSibling);var c=rn;i&&rp(n,i)?np(c,a):(n.flags=n.flags&-4097|2,Ze=!1,rn=n)}}else{if(Pc(n))throw Error(t(418));n.flags=n.flags&-4097|2,Ze=!1,rn=n}}}function ip(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;rn=n}function xl(n){if(n!==rn)return!1;if(!Ze)return ip(n),Ze=!0,!1;var i;if((i=n.tag!==3)&&!(i=n.tag!==5)&&(i=n.type,i=i!=="head"&&i!=="body"&&!Ec(n.type,n.memoizedProps)),i&&(i=sn)){if(Pc(n))throw sp(),Error(t(418));for(;i;)np(n,i),i=Kr(i.nextSibling)}if(ip(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(t(317));e:{for(n=n.nextSibling,i=0;n;){if(n.nodeType===8){var a=n.data;if(a==="/$"){if(i===0){sn=Kr(n.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}n=n.nextSibling}sn=null}}else sn=rn?Kr(n.stateNode.nextSibling):null;return!0}function sp(){for(var n=sn;n;)n=Kr(n.nextSibling)}function Bs(){sn=rn=null,Ze=!1}function Nc(n){Sn===null?Sn=[n]:Sn.push(n)}var mw=oe.ReactCurrentBatchConfig;function Zo(n,i,a){if(n=a.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var c=a.stateNode}if(!c)throw Error(t(147,n));var f=c,p=""+n;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===p?i.ref:(i=function(w){var A=f.refs;w===null?delete A[p]:A[p]=w},i._stringRef=p,i)}if(typeof n!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,n))}return n}function Pl(n,i){throw n=Object.prototype.toString.call(i),Error(t(31,n==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":n))}function op(n){var i=n._init;return i(n._payload)}function ap(n){function i(M,V){if(n){var j=M.deletions;j===null?(M.deletions=[V],M.flags|=16):j.push(V)}}function a(M,V){if(!n)return null;for(;V!==null;)i(M,V),V=V.sibling;return null}function c(M,V){for(M=new Map;V!==null;)V.key!==null?M.set(V.key,V):M.set(V.index,V),V=V.sibling;return M}function f(M,V){return M=oi(M,V),M.index=0,M.sibling=null,M}function p(M,V,j){return M.index=j,n?(j=M.alternate,j!==null?(j=j.index,j<V?(M.flags|=2,V):j):(M.flags|=2,V)):(M.flags|=1048576,V)}function w(M){return n&&M.alternate===null&&(M.flags|=2),M}function A(M,V,j,te){return V===null||V.tag!==6?(V=Th(j,M.mode,te),V.return=M,V):(V=f(V,j),V.return=M,V)}function N(M,V,j,te){var me=j.type;return me===x?X(M,V,j.props.children,te,j.key):V!==null&&(V.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ne&&op(me)===V.type)?(te=f(V,j.props),te.ref=Zo(M,V,j),te.return=M,te):(te=Zl(j.type,j.key,j.props,null,M.mode,te),te.ref=Zo(M,V,j),te.return=M,te)}function B(M,V,j,te){return V===null||V.tag!==4||V.stateNode.containerInfo!==j.containerInfo||V.stateNode.implementation!==j.implementation?(V=Ih(j,M.mode,te),V.return=M,V):(V=f(V,j.children||[]),V.return=M,V)}function X(M,V,j,te,me){return V===null||V.tag!==7?(V=Ki(j,M.mode,te,me),V.return=M,V):(V=f(V,j),V.return=M,V)}function ee(M,V,j){if(typeof V=="string"&&V!==""||typeof V=="number")return V=Th(""+V,M.mode,j),V.return=M,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case ge:return j=Zl(V.type,V.key,V.props,null,M.mode,j),j.ref=Zo(M,null,V),j.return=M,j;case ye:return V=Ih(V,M.mode,j),V.return=M,V;case Ne:var te=V._init;return ee(M,te(V._payload),j)}if(ot(V)||se(V))return V=Ki(V,M.mode,j,null),V.return=M,V;Pl(M,V)}return null}function Y(M,V,j,te){var me=V!==null?V.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return me!==null?null:A(M,V,""+j,te);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ge:return j.key===me?N(M,V,j,te):null;case ye:return j.key===me?B(M,V,j,te):null;case Ne:return me=j._init,Y(M,V,me(j._payload),te)}if(ot(j)||se(j))return me!==null?null:X(M,V,j,te,null);Pl(M,j)}return null}function ue(M,V,j,te,me){if(typeof te=="string"&&te!==""||typeof te=="number")return M=M.get(j)||null,A(V,M,""+te,me);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case ge:return M=M.get(te.key===null?j:te.key)||null,N(V,M,te,me);case ye:return M=M.get(te.key===null?j:te.key)||null,B(V,M,te,me);case Ne:var we=te._init;return ue(M,V,j,we(te._payload),me)}if(ot(te)||se(te))return M=M.get(j)||null,X(V,M,te,me,null);Pl(V,te)}return null}function fe(M,V,j,te){for(var me=null,we=null,Ee=V,Ie=V=0,Tt=null;Ee!==null&&Ie<j.length;Ie++){Ee.index>Ie?(Tt=Ee,Ee=null):Tt=Ee.sibling;var Be=Y(M,Ee,j[Ie],te);if(Be===null){Ee===null&&(Ee=Tt);break}n&&Ee&&Be.alternate===null&&i(M,Ee),V=p(Be,V,Ie),we===null?me=Be:we.sibling=Be,we=Be,Ee=Tt}if(Ie===j.length)return a(M,Ee),Ze&&Bi(M,Ie),me;if(Ee===null){for(;Ie<j.length;Ie++)Ee=ee(M,j[Ie],te),Ee!==null&&(V=p(Ee,V,Ie),we===null?me=Ee:we.sibling=Ee,we=Ee);return Ze&&Bi(M,Ie),me}for(Ee=c(M,Ee);Ie<j.length;Ie++)Tt=ue(Ee,M,Ie,j[Ie],te),Tt!==null&&(n&&Tt.alternate!==null&&Ee.delete(Tt.key===null?Ie:Tt.key),V=p(Tt,V,Ie),we===null?me=Tt:we.sibling=Tt,we=Tt);return n&&Ee.forEach(function(ai){return i(M,ai)}),Ze&&Bi(M,Ie),me}function de(M,V,j,te){var me=se(j);if(typeof me!="function")throw Error(t(150));if(j=me.call(j),j==null)throw Error(t(151));for(var we=me=null,Ee=V,Ie=V=0,Tt=null,Be=j.next();Ee!==null&&!Be.done;Ie++,Be=j.next()){Ee.index>Ie?(Tt=Ee,Ee=null):Tt=Ee.sibling;var ai=Y(M,Ee,Be.value,te);if(ai===null){Ee===null&&(Ee=Tt);break}n&&Ee&&ai.alternate===null&&i(M,Ee),V=p(ai,V,Ie),we===null?me=ai:we.sibling=ai,we=ai,Ee=Tt}if(Be.done)return a(M,Ee),Ze&&Bi(M,Ie),me;if(Ee===null){for(;!Be.done;Ie++,Be=j.next())Be=ee(M,Be.value,te),Be!==null&&(V=p(Be,V,Ie),we===null?me=Be:we.sibling=Be,we=Be);return Ze&&Bi(M,Ie),me}for(Ee=c(M,Ee);!Be.done;Ie++,Be=j.next())Be=ue(Ee,M,Ie,Be.value,te),Be!==null&&(n&&Be.alternate!==null&&Ee.delete(Be.key===null?Ie:Be.key),V=p(Be,V,Ie),we===null?me=Be:we.sibling=Be,we=Be);return n&&Ee.forEach(function(Qw){return i(M,Qw)}),Ze&&Bi(M,Ie),me}function lt(M,V,j,te){if(typeof j=="object"&&j!==null&&j.type===x&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case ge:e:{for(var me=j.key,we=V;we!==null;){if(we.key===me){if(me=j.type,me===x){if(we.tag===7){a(M,we.sibling),V=f(we,j.props.children),V.return=M,M=V;break e}}else if(we.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===Ne&&op(me)===we.type){a(M,we.sibling),V=f(we,j.props),V.ref=Zo(M,we,j),V.return=M,M=V;break e}a(M,we);break}else i(M,we);we=we.sibling}j.type===x?(V=Ki(j.props.children,M.mode,te,j.key),V.return=M,M=V):(te=Zl(j.type,j.key,j.props,null,M.mode,te),te.ref=Zo(M,V,j),te.return=M,M=te)}return w(M);case ye:e:{for(we=j.key;V!==null;){if(V.key===we)if(V.tag===4&&V.stateNode.containerInfo===j.containerInfo&&V.stateNode.implementation===j.implementation){a(M,V.sibling),V=f(V,j.children||[]),V.return=M,M=V;break e}else{a(M,V);break}else i(M,V);V=V.sibling}V=Ih(j,M.mode,te),V.return=M,M=V}return w(M);case Ne:return we=j._init,lt(M,V,we(j._payload),te)}if(ot(j))return fe(M,V,j,te);if(se(j))return de(M,V,j,te);Pl(M,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,V!==null&&V.tag===6?(a(M,V.sibling),V=f(V,j),V.return=M,M=V):(a(M,V),V=Th(j,M.mode,te),V.return=M,M=V),w(M)):a(M,V)}return lt}var zs=ap(!0),lp=ap(!1),kl=Yr(null),Nl=null,$s=null,Dc=null;function Vc(){Dc=$s=Nl=null}function Lc(n){var i=kl.current;Xe(kl),n._currentValue=i}function bc(n,i,a){for(;n!==null;){var c=n.alternate;if((n.childLanes&i)!==i?(n.childLanes|=i,c!==null&&(c.childLanes|=i)):c!==null&&(c.childLanes&i)!==i&&(c.childLanes|=i),n===a)break;n=n.return}}function qs(n,i){Nl=n,Dc=$s=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&i)!==0&&(qt=!0),n.firstContext=null)}function dn(n){var i=n._currentValue;if(Dc!==n)if(n={context:n,memoizedValue:i,next:null},$s===null){if(Nl===null)throw Error(t(308));$s=n,Nl.dependencies={lanes:0,firstContext:n}}else $s=$s.next=n;return i}var zi=null;function Mc(n){zi===null?zi=[n]:zi.push(n)}function up(n,i,a,c){var f=i.interleaved;return f===null?(a.next=a,Mc(i)):(a.next=f.next,f.next=a),i.interleaved=a,wr(n,c)}function wr(n,i){n.lanes|=i;var a=n.alternate;for(a!==null&&(a.lanes|=i),a=n,n=n.return;n!==null;)n.childLanes|=i,a=n.alternate,a!==null&&(a.childLanes|=i),a=n,n=n.return;return a.tag===3?a.stateNode:null}var Zr=!1;function Oc(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cp(n,i){n=n.updateQueue,i.updateQueue===n&&(i.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Er(n,i){return{eventTime:n,lane:i,tag:0,payload:null,callback:null,next:null}}function ei(n,i,a){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(je&2)!==0){var f=c.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),c.pending=i,wr(n,a)}return f=c.interleaved,f===null?(i.next=i,Mc(c)):(i.next=f.next,f.next=i),c.interleaved=i,wr(n,a)}function Dl(n,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Lo(n,a)}}function hp(n,i){var a=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,p=null;if(a=a.firstBaseUpdate,a!==null){do{var w={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};p===null?f=p=w:p=p.next=w,a=a.next}while(a!==null);p===null?f=p=i:p=p.next=i}else f=p=i;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:p,shared:c.shared,effects:c.effects},n.updateQueue=a;return}n=a.lastBaseUpdate,n===null?a.firstBaseUpdate=i:n.next=i,a.lastBaseUpdate=i}function Vl(n,i,a,c){var f=n.updateQueue;Zr=!1;var p=f.firstBaseUpdate,w=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var N=A,B=N.next;N.next=null,w===null?p=B:w.next=B,w=N;var X=n.alternate;X!==null&&(X=X.updateQueue,A=X.lastBaseUpdate,A!==w&&(A===null?X.firstBaseUpdate=B:A.next=B,X.lastBaseUpdate=N))}if(p!==null){var ee=f.baseState;w=0,X=B=N=null,A=p;do{var Y=A.lane,ue=A.eventTime;if((c&Y)===Y){X!==null&&(X=X.next={eventTime:ue,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var fe=n,de=A;switch(Y=i,ue=a,de.tag){case 1:if(fe=de.payload,typeof fe=="function"){ee=fe.call(ue,ee,Y);break e}ee=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=de.payload,Y=typeof fe=="function"?fe.call(ue,ee,Y):fe,Y==null)break e;ee=ie({},ee,Y);break e;case 2:Zr=!0}}A.callback!==null&&A.lane!==0&&(n.flags|=64,Y=f.effects,Y===null?f.effects=[A]:Y.push(A))}else ue={eventTime:ue,lane:Y,tag:A.tag,payload:A.payload,callback:A.callback,next:null},X===null?(B=X=ue,N=ee):X=X.next=ue,w|=Y;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;Y=A,A=Y.next,Y.next=null,f.lastBaseUpdate=Y,f.shared.pending=null}}while(!0);if(X===null&&(N=ee),f.baseState=N,f.firstBaseUpdate=B,f.lastBaseUpdate=X,i=f.shared.interleaved,i!==null){f=i;do w|=f.lane,f=f.next;while(f!==i)}else p===null&&(f.shared.lanes=0);Hi|=w,n.lanes=w,n.memoizedState=ee}}function fp(n,i,a){if(n=i.effects,i.effects=null,n!==null)for(i=0;i<n.length;i++){var c=n[i],f=c.callback;if(f!==null){if(c.callback=null,c=a,typeof f!="function")throw Error(t(191,f));f.call(c)}}}var ea={},Gn=Yr(ea),ta=Yr(ea),na=Yr(ea);function $i(n){if(n===ea)throw Error(t(174));return n}function Fc(n,i){switch(Ge(na,i),Ge(ta,n),Ge(Gn,ea),n=i.nodeType,n){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:fs(null,"");break;default:n=n===8?i.parentNode:i,i=n.namespaceURI||null,n=n.tagName,i=fs(i,n)}Xe(Gn),Ge(Gn,i)}function Hs(){Xe(Gn),Xe(ta),Xe(na)}function dp(n){$i(na.current);var i=$i(Gn.current),a=fs(i,n.type);i!==a&&(Ge(ta,n),Ge(Gn,a))}function jc(n){ta.current===n&&(Xe(Gn),Xe(ta))}var et=Yr(0);function Ll(n){for(var i=n;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Uc=[];function Bc(){for(var n=0;n<Uc.length;n++)Uc[n]._workInProgressVersionPrimary=null;Uc.length=0}var bl=oe.ReactCurrentDispatcher,zc=oe.ReactCurrentBatchConfig,qi=0,tt=null,yt=null,wt=null,Ml=!1,ra=!1,ia=0,gw=0;function Vt(){throw Error(t(321))}function $c(n,i){if(i===null)return!1;for(var a=0;a<i.length&&a<n.length;a++)if(!In(n[a],i[a]))return!1;return!0}function qc(n,i,a,c,f,p){if(qi=p,tt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,bl.current=n===null||n.memoizedState===null?ww:Ew,n=a(c,f),ra){p=0;do{if(ra=!1,ia=0,25<=p)throw Error(t(301));p+=1,wt=yt=null,i.updateQueue=null,bl.current=Tw,n=a(c,f)}while(ra)}if(bl.current=jl,i=yt!==null&&yt.next!==null,qi=0,wt=yt=tt=null,Ml=!1,i)throw Error(t(300));return n}function Hc(){var n=ia!==0;return ia=0,n}function Qn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?tt.memoizedState=wt=n:wt=wt.next=n,wt}function pn(){if(yt===null){var n=tt.alternate;n=n!==null?n.memoizedState:null}else n=yt.next;var i=wt===null?tt.memoizedState:wt.next;if(i!==null)wt=i,yt=n;else{if(n===null)throw Error(t(310));yt=n,n={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},wt===null?tt.memoizedState=wt=n:wt=wt.next=n}return wt}function sa(n,i){return typeof i=="function"?i(n):i}function Wc(n){var i=pn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=yt,f=c.baseQueue,p=a.pending;if(p!==null){if(f!==null){var w=f.next;f.next=p.next,p.next=w}c.baseQueue=f=p,a.pending=null}if(f!==null){p=f.next,c=c.baseState;var A=w=null,N=null,B=p;do{var X=B.lane;if((qi&X)===X)N!==null&&(N=N.next={lane:0,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),c=B.hasEagerState?B.eagerState:n(c,B.action);else{var ee={lane:X,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null};N===null?(A=N=ee,w=c):N=N.next=ee,tt.lanes|=X,Hi|=X}B=B.next}while(B!==null&&B!==p);N===null?w=c:N.next=A,In(c,i.memoizedState)||(qt=!0),i.memoizedState=c,i.baseState=w,i.baseQueue=N,a.lastRenderedState=c}if(n=a.interleaved,n!==null){f=n;do p=f.lane,tt.lanes|=p,Hi|=p,f=f.next;while(f!==n)}else f===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Gc(n){var i=pn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=n;var c=a.dispatch,f=a.pending,p=i.memoizedState;if(f!==null){a.pending=null;var w=f=f.next;do p=n(p,w.action),w=w.next;while(w!==f);In(p,i.memoizedState)||(qt=!0),i.memoizedState=p,i.baseQueue===null&&(i.baseState=p),a.lastRenderedState=p}return[p,c]}function pp(){}function mp(n,i){var a=tt,c=pn(),f=i(),p=!In(c.memoizedState,f);if(p&&(c.memoizedState=f,qt=!0),c=c.queue,Qc(_p.bind(null,a,c,n),[n]),c.getSnapshot!==i||p||wt!==null&&wt.memoizedState.tag&1){if(a.flags|=2048,oa(9,yp.bind(null,a,c,f,i),void 0,null),Et===null)throw Error(t(349));(qi&30)!==0||gp(a,i,f)}return f}function gp(n,i,a){n.flags|=16384,n={getSnapshot:i,value:a},i=tt.updateQueue,i===null?(i={lastEffect:null,stores:null},tt.updateQueue=i,i.stores=[n]):(a=i.stores,a===null?i.stores=[n]:a.push(n))}function yp(n,i,a,c){i.value=a,i.getSnapshot=c,vp(i)&&wp(n)}function _p(n,i,a){return a(function(){vp(i)&&wp(n)})}function vp(n){var i=n.getSnapshot;n=n.value;try{var a=i();return!In(n,a)}catch{return!0}}function wp(n){var i=wr(n,1);i!==null&&xn(i,n,1,-1)}function Ep(n){var i=Qn();return typeof n=="function"&&(n=n()),i.memoizedState=i.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:n},i.queue=n,n=n.dispatch=vw.bind(null,tt,n),[i.memoizedState,n]}function oa(n,i,a,c){return n={tag:n,create:i,destroy:a,deps:c,next:null},i=tt.updateQueue,i===null?(i={lastEffect:null,stores:null},tt.updateQueue=i,i.lastEffect=n.next=n):(a=i.lastEffect,a===null?i.lastEffect=n.next=n:(c=a.next,a.next=n,n.next=c,i.lastEffect=n)),n}function Tp(){return pn().memoizedState}function Ol(n,i,a,c){var f=Qn();tt.flags|=n,f.memoizedState=oa(1|i,a,void 0,c===void 0?null:c)}function Fl(n,i,a,c){var f=pn();c=c===void 0?null:c;var p=void 0;if(yt!==null){var w=yt.memoizedState;if(p=w.destroy,c!==null&&$c(c,w.deps)){f.memoizedState=oa(i,a,p,c);return}}tt.flags|=n,f.memoizedState=oa(1|i,a,p,c)}function Ip(n,i){return Ol(8390656,8,n,i)}function Qc(n,i){return Fl(2048,8,n,i)}function Sp(n,i){return Fl(4,2,n,i)}function Ap(n,i){return Fl(4,4,n,i)}function Cp(n,i){if(typeof i=="function")return n=n(),i(n),function(){i(null)};if(i!=null)return n=n(),i.current=n,function(){i.current=null}}function Rp(n,i,a){return a=a!=null?a.concat([n]):null,Fl(4,4,Cp.bind(null,i,n),a)}function Kc(){}function xp(n,i){var a=pn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&$c(i,c[1])?c[0]:(a.memoizedState=[n,i],n)}function Pp(n,i){var a=pn();i=i===void 0?null:i;var c=a.memoizedState;return c!==null&&i!==null&&$c(i,c[1])?c[0]:(n=n(),a.memoizedState=[n,i],n)}function kp(n,i,a){return(qi&21)===0?(n.baseState&&(n.baseState=!1,qt=!0),n.memoizedState=a):(In(a,i)||(a=Do(),tt.lanes|=a,Hi|=a,n.baseState=!0),i)}function yw(n,i){var a=be;be=a!==0&&4>a?a:4,n(!0);var c=zc.transition;zc.transition={};try{n(!1),i()}finally{be=a,zc.transition=c}}function Np(){return pn().memoizedState}function _w(n,i,a){var c=ii(n);if(a={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null},Dp(n))Vp(i,a);else if(a=up(n,i,a,c),a!==null){var f=Bt();xn(a,n,c,f),Lp(a,i,c)}}function vw(n,i,a){var c=ii(n),f={lane:c,action:a,hasEagerState:!1,eagerState:null,next:null};if(Dp(n))Vp(i,f);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=i.lastRenderedReducer,p!==null))try{var w=i.lastRenderedState,A=p(w,a);if(f.hasEagerState=!0,f.eagerState=A,In(A,w)){var N=i.interleaved;N===null?(f.next=f,Mc(i)):(f.next=N.next,N.next=f),i.interleaved=f;return}}catch{}finally{}a=up(n,i,f,c),a!==null&&(f=Bt(),xn(a,n,c,f),Lp(a,i,c))}}function Dp(n){var i=n.alternate;return n===tt||i!==null&&i===tt}function Vp(n,i){ra=Ml=!0;var a=n.pending;a===null?i.next=i:(i.next=a.next,a.next=i),n.pending=i}function Lp(n,i,a){if((a&4194240)!==0){var c=i.lanes;c&=n.pendingLanes,a|=c,i.lanes=a,Lo(n,a)}}var jl={readContext:dn,useCallback:Vt,useContext:Vt,useEffect:Vt,useImperativeHandle:Vt,useInsertionEffect:Vt,useLayoutEffect:Vt,useMemo:Vt,useReducer:Vt,useRef:Vt,useState:Vt,useDebugValue:Vt,useDeferredValue:Vt,useTransition:Vt,useMutableSource:Vt,useSyncExternalStore:Vt,useId:Vt,unstable_isNewReconciler:!1},ww={readContext:dn,useCallback:function(n,i){return Qn().memoizedState=[n,i===void 0?null:i],n},useContext:dn,useEffect:Ip,useImperativeHandle:function(n,i,a){return a=a!=null?a.concat([n]):null,Ol(4194308,4,Cp.bind(null,i,n),a)},useLayoutEffect:function(n,i){return Ol(4194308,4,n,i)},useInsertionEffect:function(n,i){return Ol(4,2,n,i)},useMemo:function(n,i){var a=Qn();return i=i===void 0?null:i,n=n(),a.memoizedState=[n,i],n},useReducer:function(n,i,a){var c=Qn();return i=a!==void 0?a(i):i,c.memoizedState=c.baseState=i,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:i},c.queue=n,n=n.dispatch=_w.bind(null,tt,n),[c.memoizedState,n]},useRef:function(n){var i=Qn();return n={current:n},i.memoizedState=n},useState:Ep,useDebugValue:Kc,useDeferredValue:function(n){return Qn().memoizedState=n},useTransition:function(){var n=Ep(!1),i=n[0];return n=yw.bind(null,n[1]),Qn().memoizedState=n,[i,n]},useMutableSource:function(){},useSyncExternalStore:function(n,i,a){var c=tt,f=Qn();if(Ze){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Et===null)throw Error(t(349));(qi&30)!==0||gp(c,i,a)}f.memoizedState=a;var p={value:a,getSnapshot:i};return f.queue=p,Ip(_p.bind(null,c,p,n),[n]),c.flags|=2048,oa(9,yp.bind(null,c,p,a,i),void 0,null),a},useId:function(){var n=Qn(),i=Et.identifierPrefix;if(Ze){var a=vr,c=_r;a=(c&~(1<<32-Jt(c)-1)).toString(32)+a,i=":"+i+"R"+a,a=ia++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=gw++,i=":"+i+"r"+a.toString(32)+":";return n.memoizedState=i},unstable_isNewReconciler:!1},Ew={readContext:dn,useCallback:xp,useContext:dn,useEffect:Qc,useImperativeHandle:Rp,useInsertionEffect:Sp,useLayoutEffect:Ap,useMemo:Pp,useReducer:Wc,useRef:Tp,useState:function(){return Wc(sa)},useDebugValue:Kc,useDeferredValue:function(n){var i=pn();return kp(i,yt.memoizedState,n)},useTransition:function(){var n=Wc(sa)[0],i=pn().memoizedState;return[n,i]},useMutableSource:pp,useSyncExternalStore:mp,useId:Np,unstable_isNewReconciler:!1},Tw={readContext:dn,useCallback:xp,useContext:dn,useEffect:Qc,useImperativeHandle:Rp,useInsertionEffect:Sp,useLayoutEffect:Ap,useMemo:Pp,useReducer:Gc,useRef:Tp,useState:function(){return Gc(sa)},useDebugValue:Kc,useDeferredValue:function(n){var i=pn();return yt===null?i.memoizedState=n:kp(i,yt.memoizedState,n)},useTransition:function(){var n=Gc(sa)[0],i=pn().memoizedState;return[n,i]},useMutableSource:pp,useSyncExternalStore:mp,useId:Np,unstable_isNewReconciler:!1};function An(n,i){if(n&&n.defaultProps){i=ie({},i),n=n.defaultProps;for(var a in n)i[a]===void 0&&(i[a]=n[a]);return i}return i}function Yc(n,i,a,c){i=n.memoizedState,a=a(c,i),a=a==null?i:ie({},i,a),n.memoizedState=a,n.lanes===0&&(n.updateQueue.baseState=a)}var Ul={isMounted:function(n){return(n=n._reactInternals)?En(n)===n:!1},enqueueSetState:function(n,i,a){n=n._reactInternals;var c=Bt(),f=ii(n),p=Er(c,f);p.payload=i,a!=null&&(p.callback=a),i=ei(n,p,f),i!==null&&(xn(i,n,f,c),Dl(i,n,f))},enqueueReplaceState:function(n,i,a){n=n._reactInternals;var c=Bt(),f=ii(n),p=Er(c,f);p.tag=1,p.payload=i,a!=null&&(p.callback=a),i=ei(n,p,f),i!==null&&(xn(i,n,f,c),Dl(i,n,f))},enqueueForceUpdate:function(n,i){n=n._reactInternals;var a=Bt(),c=ii(n),f=Er(a,c);f.tag=2,i!=null&&(f.callback=i),i=ei(n,f,c),i!==null&&(xn(i,n,c,a),Dl(i,n,c))}};function bp(n,i,a,c,f,p,w){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,w):i.prototype&&i.prototype.isPureReactComponent?!Wo(a,c)||!Wo(f,p):!0}function Mp(n,i,a){var c=!1,f=Xr,p=i.contextType;return typeof p=="object"&&p!==null?p=dn(p):(f=$t(i)?ji:Dt.current,c=i.contextTypes,p=(c=c!=null)?Fs(n,f):Xr),i=new i(a,p),n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=Ul,n.stateNode=i,i._reactInternals=n,c&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=f,n.__reactInternalMemoizedMaskedChildContext=p),i}function Op(n,i,a,c){n=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,c),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,c),i.state!==n&&Ul.enqueueReplaceState(i,i.state,null)}function Xc(n,i,a,c){var f=n.stateNode;f.props=a,f.state=n.memoizedState,f.refs={},Oc(n);var p=i.contextType;typeof p=="object"&&p!==null?f.context=dn(p):(p=$t(i)?ji:Dt.current,f.context=Fs(n,p)),f.state=n.memoizedState,p=i.getDerivedStateFromProps,typeof p=="function"&&(Yc(n,i,p,a),f.state=n.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&Ul.enqueueReplaceState(f,f.state,null),Vl(n,a,f,c),f.state=n.memoizedState),typeof f.componentDidMount=="function"&&(n.flags|=4194308)}function Ws(n,i){try{var a="",c=i;do a+=Se(c),c=c.return;while(c);var f=a}catch(p){f=`
Error generating stack: `+p.message+`
`+p.stack}return{value:n,source:i,stack:f,digest:null}}function Jc(n,i,a){return{value:n,source:null,stack:a??null,digest:i??null}}function Zc(n,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var Iw=typeof WeakMap=="function"?WeakMap:Map;function Fp(n,i,a){a=Er(-1,a),a.tag=3,a.payload={element:null};var c=i.value;return a.callback=function(){Gl||(Gl=!0,ph=c),Zc(n,i)},a}function jp(n,i,a){a=Er(-1,a),a.tag=3;var c=n.type.getDerivedStateFromError;if(typeof c=="function"){var f=i.value;a.payload=function(){return c(f)},a.callback=function(){Zc(n,i)}}var p=n.stateNode;return p!==null&&typeof p.componentDidCatch=="function"&&(a.callback=function(){Zc(n,i),typeof c!="function"&&(ni===null?ni=new Set([this]):ni.add(this));var w=i.stack;this.componentDidCatch(i.value,{componentStack:w!==null?w:""})}),a}function Up(n,i,a){var c=n.pingCache;if(c===null){c=n.pingCache=new Iw;var f=new Set;c.set(i,f)}else f=c.get(i),f===void 0&&(f=new Set,c.set(i,f));f.has(a)||(f.add(a),n=Ow.bind(null,n,i,a),i.then(n,n))}function Bp(n){do{var i;if((i=n.tag===13)&&(i=n.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return n;n=n.return}while(n!==null);return null}function zp(n,i,a,c,f){return(n.mode&1)===0?(n===i?n.flags|=65536:(n.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Er(-1,1),i.tag=2,ei(a,i,1))),a.lanes|=1),n):(n.flags|=65536,n.lanes=f,n)}var Sw=oe.ReactCurrentOwner,qt=!1;function Ut(n,i,a,c){i.child=n===null?lp(i,null,a,c):zs(i,n.child,a,c)}function $p(n,i,a,c,f){a=a.render;var p=i.ref;return qs(i,f),c=qc(n,i,a,c,p,f),a=Hc(),n!==null&&!qt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,Tr(n,i,f)):(Ze&&a&&Rc(i),i.flags|=1,Ut(n,i,c,f),i.child)}function qp(n,i,a,c,f){if(n===null){var p=a.type;return typeof p=="function"&&!Eh(p)&&p.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=p,Hp(n,i,p,c,f)):(n=Zl(a.type,null,c,i,i.mode,f),n.ref=i.ref,n.return=i,i.child=n)}if(p=n.child,(n.lanes&f)===0){var w=p.memoizedProps;if(a=a.compare,a=a!==null?a:Wo,a(w,c)&&n.ref===i.ref)return Tr(n,i,f)}return i.flags|=1,n=oi(p,c),n.ref=i.ref,n.return=i,i.child=n}function Hp(n,i,a,c,f){if(n!==null){var p=n.memoizedProps;if(Wo(p,c)&&n.ref===i.ref)if(qt=!1,i.pendingProps=c=p,(n.lanes&f)!==0)(n.flags&131072)!==0&&(qt=!0);else return i.lanes=n.lanes,Tr(n,i,f)}return eh(n,i,a,c,f)}function Wp(n,i,a){var c=i.pendingProps,f=c.children,p=n!==null?n.memoizedState:null;if(c.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ge(Qs,on),on|=a;else{if((a&1073741824)===0)return n=p!==null?p.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:n,cachePool:null,transitions:null},i.updateQueue=null,Ge(Qs,on),on|=n,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},c=p!==null?p.baseLanes:a,Ge(Qs,on),on|=c}else p!==null?(c=p.baseLanes|a,i.memoizedState=null):c=a,Ge(Qs,on),on|=c;return Ut(n,i,f,a),i.child}function Gp(n,i){var a=i.ref;(n===null&&a!==null||n!==null&&n.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function eh(n,i,a,c,f){var p=$t(a)?ji:Dt.current;return p=Fs(i,p),qs(i,f),a=qc(n,i,a,c,p,f),c=Hc(),n!==null&&!qt?(i.updateQueue=n.updateQueue,i.flags&=-2053,n.lanes&=~f,Tr(n,i,f)):(Ze&&c&&Rc(i),i.flags|=1,Ut(n,i,a,f),i.child)}function Qp(n,i,a,c,f){if($t(a)){var p=!0;Sl(i)}else p=!1;if(qs(i,f),i.stateNode===null)zl(n,i),Mp(i,a,c),Xc(i,a,c,f),c=!0;else if(n===null){var w=i.stateNode,A=i.memoizedProps;w.props=A;var N=w.context,B=a.contextType;typeof B=="object"&&B!==null?B=dn(B):(B=$t(a)?ji:Dt.current,B=Fs(i,B));var X=a.getDerivedStateFromProps,ee=typeof X=="function"||typeof w.getSnapshotBeforeUpdate=="function";ee||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==c||N!==B)&&Op(i,w,c,B),Zr=!1;var Y=i.memoizedState;w.state=Y,Vl(i,c,w,f),N=i.memoizedState,A!==c||Y!==N||zt.current||Zr?(typeof X=="function"&&(Yc(i,a,X,c),N=i.memoizedState),(A=Zr||bp(i,a,A,c,Y,N,B))?(ee||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(i.flags|=4194308)):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=c,i.memoizedState=N),w.props=c,w.state=N,w.context=B,c=A):(typeof w.componentDidMount=="function"&&(i.flags|=4194308),c=!1)}else{w=i.stateNode,cp(n,i),A=i.memoizedProps,B=i.type===i.elementType?A:An(i.type,A),w.props=B,ee=i.pendingProps,Y=w.context,N=a.contextType,typeof N=="object"&&N!==null?N=dn(N):(N=$t(a)?ji:Dt.current,N=Fs(i,N));var ue=a.getDerivedStateFromProps;(X=typeof ue=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==ee||Y!==N)&&Op(i,w,c,N),Zr=!1,Y=i.memoizedState,w.state=Y,Vl(i,c,w,f);var fe=i.memoizedState;A!==ee||Y!==fe||zt.current||Zr?(typeof ue=="function"&&(Yc(i,a,ue,c),fe=i.memoizedState),(B=Zr||bp(i,a,B,c,Y,fe,N)||!1)?(X||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(c,fe,N),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(c,fe,N)),typeof w.componentDidUpdate=="function"&&(i.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),i.memoizedProps=c,i.memoizedState=fe),w.props=c,w.state=fe,w.context=N,c=B):(typeof w.componentDidUpdate!="function"||A===n.memoizedProps&&Y===n.memoizedState||(i.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===n.memoizedProps&&Y===n.memoizedState||(i.flags|=1024),c=!1)}return th(n,i,a,c,p,f)}function th(n,i,a,c,f,p){Gp(n,i);var w=(i.flags&128)!==0;if(!c&&!w)return f&&Zd(i,a,!1),Tr(n,i,p);c=i.stateNode,Sw.current=i;var A=w&&typeof a.getDerivedStateFromError!="function"?null:c.render();return i.flags|=1,n!==null&&w?(i.child=zs(i,n.child,null,p),i.child=zs(i,null,A,p)):Ut(n,i,A,p),i.memoizedState=c.state,f&&Zd(i,a,!0),i.child}function Kp(n){var i=n.stateNode;i.pendingContext?Xd(n,i.pendingContext,i.pendingContext!==i.context):i.context&&Xd(n,i.context,!1),Fc(n,i.containerInfo)}function Yp(n,i,a,c,f){return Bs(),Nc(f),i.flags|=256,Ut(n,i,a,c),i.child}var nh={dehydrated:null,treeContext:null,retryLane:0};function rh(n){return{baseLanes:n,cachePool:null,transitions:null}}function Xp(n,i,a){var c=i.pendingProps,f=et.current,p=!1,w=(i.flags&128)!==0,A;if((A=w)||(A=n!==null&&n.memoizedState===null?!1:(f&2)!==0),A?(p=!0,i.flags&=-129):(n===null||n.memoizedState!==null)&&(f|=1),Ge(et,f&1),n===null)return kc(i),n=i.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((i.mode&1)===0?i.lanes=1:n.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(w=c.children,n=c.fallback,p?(c=i.mode,p=i.child,w={mode:"hidden",children:w},(c&1)===0&&p!==null?(p.childLanes=0,p.pendingProps=w):p=eu(w,c,0,null),n=Ki(n,c,a,null),p.return=i,n.return=i,p.sibling=n,i.child=p,i.child.memoizedState=rh(a),i.memoizedState=nh,n):ih(i,w));if(f=n.memoizedState,f!==null&&(A=f.dehydrated,A!==null))return Aw(n,i,w,c,A,f,a);if(p){p=c.fallback,w=i.mode,f=n.child,A=f.sibling;var N={mode:"hidden",children:c.children};return(w&1)===0&&i.child!==f?(c=i.child,c.childLanes=0,c.pendingProps=N,i.deletions=null):(c=oi(f,N),c.subtreeFlags=f.subtreeFlags&14680064),A!==null?p=oi(A,p):(p=Ki(p,w,a,null),p.flags|=2),p.return=i,c.return=i,c.sibling=p,i.child=c,c=p,p=i.child,w=n.child.memoizedState,w=w===null?rh(a):{baseLanes:w.baseLanes|a,cachePool:null,transitions:w.transitions},p.memoizedState=w,p.childLanes=n.childLanes&~a,i.memoizedState=nh,c}return p=n.child,n=p.sibling,c=oi(p,{mode:"visible",children:c.children}),(i.mode&1)===0&&(c.lanes=a),c.return=i,c.sibling=null,n!==null&&(a=i.deletions,a===null?(i.deletions=[n],i.flags|=16):a.push(n)),i.child=c,i.memoizedState=null,c}function ih(n,i){return i=eu({mode:"visible",children:i},n.mode,0,null),i.return=n,n.child=i}function Bl(n,i,a,c){return c!==null&&Nc(c),zs(i,n.child,null,a),n=ih(i,i.pendingProps.children),n.flags|=2,i.memoizedState=null,n}function Aw(n,i,a,c,f,p,w){if(a)return i.flags&256?(i.flags&=-257,c=Jc(Error(t(422))),Bl(n,i,w,c)):i.memoizedState!==null?(i.child=n.child,i.flags|=128,null):(p=c.fallback,f=i.mode,c=eu({mode:"visible",children:c.children},f,0,null),p=Ki(p,f,w,null),p.flags|=2,c.return=i,p.return=i,c.sibling=p,i.child=c,(i.mode&1)!==0&&zs(i,n.child,null,w),i.child.memoizedState=rh(w),i.memoizedState=nh,p);if((i.mode&1)===0)return Bl(n,i,w,null);if(f.data==="$!"){if(c=f.nextSibling&&f.nextSibling.dataset,c)var A=c.dgst;return c=A,p=Error(t(419)),c=Jc(p,c,void 0),Bl(n,i,w,c)}if(A=(w&n.childLanes)!==0,qt||A){if(c=Et,c!==null){switch(w&-w){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(c.suspendedLanes|w))!==0?0:f,f!==0&&f!==p.retryLane&&(p.retryLane=f,wr(n,f),xn(c,n,f,-1))}return wh(),c=Jc(Error(t(421))),Bl(n,i,w,c)}return f.data==="$?"?(i.flags|=128,i.child=n.child,i=Fw.bind(null,n),f._reactRetry=i,null):(n=p.treeContext,sn=Kr(f.nextSibling),rn=i,Ze=!0,Sn=null,n!==null&&(hn[fn++]=_r,hn[fn++]=vr,hn[fn++]=Ui,_r=n.id,vr=n.overflow,Ui=i),i=ih(i,c.children),i.flags|=4096,i)}function Jp(n,i,a){n.lanes|=i;var c=n.alternate;c!==null&&(c.lanes|=i),bc(n.return,i,a)}function sh(n,i,a,c,f){var p=n.memoizedState;p===null?n.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f}:(p.isBackwards=i,p.rendering=null,p.renderingStartTime=0,p.last=c,p.tail=a,p.tailMode=f)}function Zp(n,i,a){var c=i.pendingProps,f=c.revealOrder,p=c.tail;if(Ut(n,i,c.children,a),c=et.current,(c&2)!==0)c=c&1|2,i.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=i.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Jp(n,a,i);else if(n.tag===19)Jp(n,a,i);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===i)break e;for(;n.sibling===null;){if(n.return===null||n.return===i)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}c&=1}if(Ge(et,c),(i.mode&1)===0)i.memoizedState=null;else switch(f){case"forwards":for(a=i.child,f=null;a!==null;)n=a.alternate,n!==null&&Ll(n)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),sh(i,!1,f,a,p);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(n=f.alternate,n!==null&&Ll(n)===null){i.child=f;break}n=f.sibling,f.sibling=a,a=f,f=n}sh(i,!0,a,null,p);break;case"together":sh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function zl(n,i){(i.mode&1)===0&&n!==null&&(n.alternate=null,i.alternate=null,i.flags|=2)}function Tr(n,i,a){if(n!==null&&(i.dependencies=n.dependencies),Hi|=i.lanes,(a&i.childLanes)===0)return null;if(n!==null&&i.child!==n.child)throw Error(t(153));if(i.child!==null){for(n=i.child,a=oi(n,n.pendingProps),i.child=a,a.return=i;n.sibling!==null;)n=n.sibling,a=a.sibling=oi(n,n.pendingProps),a.return=i;a.sibling=null}return i.child}function Cw(n,i,a){switch(i.tag){case 3:Kp(i),Bs();break;case 5:dp(i);break;case 1:$t(i.type)&&Sl(i);break;case 4:Fc(i,i.stateNode.containerInfo);break;case 10:var c=i.type._context,f=i.memoizedProps.value;Ge(kl,c._currentValue),c._currentValue=f;break;case 13:if(c=i.memoizedState,c!==null)return c.dehydrated!==null?(Ge(et,et.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Xp(n,i,a):(Ge(et,et.current&1),n=Tr(n,i,a),n!==null?n.sibling:null);Ge(et,et.current&1);break;case 19:if(c=(a&i.childLanes)!==0,(n.flags&128)!==0){if(c)return Zp(n,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Ge(et,et.current),c)break;return null;case 22:case 23:return i.lanes=0,Wp(n,i,a)}return Tr(n,i,a)}var em,oh,tm,nm;em=function(n,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)n.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},oh=function(){},tm=function(n,i,a,c){var f=n.memoizedProps;if(f!==c){n=i.stateNode,$i(Gn.current);var p=null;switch(a){case"input":f=cs(n,f),c=cs(n,c),p=[];break;case"select":f=ie({},f,{value:void 0}),c=ie({},c,{value:void 0}),p=[];break;case"textarea":f=Eo(n,f),c=Eo(n,c),p=[];break;default:typeof f.onClick!="function"&&typeof c.onClick=="function"&&(n.onclick=El)}wn(a,c);var w;a=null;for(B in f)if(!c.hasOwnProperty(B)&&f.hasOwnProperty(B)&&f[B]!=null)if(B==="style"){var A=f[B];for(w in A)A.hasOwnProperty(w)&&(a||(a={}),a[w]="")}else B!=="dangerouslySetInnerHTML"&&B!=="children"&&B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&B!=="autoFocus"&&(o.hasOwnProperty(B)?p||(p=[]):(p=p||[]).push(B,null));for(B in c){var N=c[B];if(A=f!=null?f[B]:void 0,c.hasOwnProperty(B)&&N!==A&&(N!=null||A!=null))if(B==="style")if(A){for(w in A)!A.hasOwnProperty(w)||N&&N.hasOwnProperty(w)||(a||(a={}),a[w]="");for(w in N)N.hasOwnProperty(w)&&A[w]!==N[w]&&(a||(a={}),a[w]=N[w])}else a||(p||(p=[]),p.push(B,a)),a=N;else B==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,A=A?A.__html:void 0,N!=null&&A!==N&&(p=p||[]).push(B,N)):B==="children"?typeof N!="string"&&typeof N!="number"||(p=p||[]).push(B,""+N):B!=="suppressContentEditableWarning"&&B!=="suppressHydrationWarning"&&(o.hasOwnProperty(B)?(N!=null&&B==="onScroll"&&Ye("scroll",n),p||A===N||(p=[])):(p=p||[]).push(B,N))}a&&(p=p||[]).push("style",a);var B=p;(i.updateQueue=B)&&(i.flags|=4)}},nm=function(n,i,a,c){a!==c&&(i.flags|=4)};function aa(n,i){if(!Ze)switch(n.tailMode){case"hidden":i=n.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?n.tail=null:a.sibling=null;break;case"collapsed":a=n.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Lt(n){var i=n.alternate!==null&&n.alternate.child===n.child,a=0,c=0;if(i)for(var f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&14680064,c|=f.flags&14680064,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=a,i}function Rw(n,i,a){var c=i.pendingProps;switch(xc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(i),null;case 1:return $t(i.type)&&Il(),Lt(i),null;case 3:return c=i.stateNode,Hs(),Xe(zt),Xe(Dt),Bc(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(n===null||n.child===null)&&(xl(i)?i.flags|=4:n===null||n.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Sn!==null&&(yh(Sn),Sn=null))),oh(n,i),Lt(i),null;case 5:jc(i);var f=$i(na.current);if(a=i.type,n!==null&&i.stateNode!=null)tm(n,i,a,c,f),n.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!c){if(i.stateNode===null)throw Error(t(166));return Lt(i),null}if(n=$i(Gn.current),xl(i)){c=i.stateNode,a=i.type;var p=i.memoizedProps;switch(c[Wn]=i,c[Xo]=p,n=(i.mode&1)!==0,a){case"dialog":Ye("cancel",c),Ye("close",c);break;case"iframe":case"object":case"embed":Ye("load",c);break;case"video":case"audio":for(f=0;f<Qo.length;f++)Ye(Qo[f],c);break;case"source":Ye("error",c);break;case"img":case"image":case"link":Ye("error",c),Ye("load",c);break;case"details":Ye("toggle",c);break;case"input":Wa(c,p),Ye("invalid",c);break;case"select":c._wrapperState={wasMultiple:!!p.multiple},Ye("invalid",c);break;case"textarea":To(c,p),Ye("invalid",c)}wn(a,p),f=null;for(var w in p)if(p.hasOwnProperty(w)){var A=p[w];w==="children"?typeof A=="string"?c.textContent!==A&&(p.suppressHydrationWarning!==!0&&wl(c.textContent,A,n),f=["children",A]):typeof A=="number"&&c.textContent!==""+A&&(p.suppressHydrationWarning!==!0&&wl(c.textContent,A,n),f=["children",""+A]):o.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&Ye("scroll",c)}switch(a){case"input":us(c),wo(c,p,!0);break;case"textarea":us(c),Vr(c);break;case"select":case"option":break;default:typeof p.onClick=="function"&&(c.onclick=El)}c=f,i.updateQueue=c,c!==null&&(i.flags|=4)}else{w=f.nodeType===9?f:f.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Io(a)),n==="http://www.w3.org/1999/xhtml"?a==="script"?(n=w.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof c.is=="string"?n=w.createElement(a,{is:c.is}):(n=w.createElement(a),a==="select"&&(w=n,c.multiple?w.multiple=!0:c.size&&(w.size=c.size))):n=w.createElementNS(n,a),n[Wn]=i,n[Xo]=c,em(n,i,!1,!1),i.stateNode=n;e:{switch(w=ps(a,c),a){case"dialog":Ye("cancel",n),Ye("close",n),f=c;break;case"iframe":case"object":case"embed":Ye("load",n),f=c;break;case"video":case"audio":for(f=0;f<Qo.length;f++)Ye(Qo[f],n);f=c;break;case"source":Ye("error",n),f=c;break;case"img":case"image":case"link":Ye("error",n),Ye("load",n),f=c;break;case"details":Ye("toggle",n),f=c;break;case"input":Wa(n,c),f=cs(n,c),Ye("invalid",n);break;case"option":f=c;break;case"select":n._wrapperState={wasMultiple:!!c.multiple},f=ie({},c,{value:void 0}),Ye("invalid",n);break;case"textarea":To(n,c),f=Eo(n,c),Ye("invalid",n);break;default:f=c}wn(a,f),A=f;for(p in A)if(A.hasOwnProperty(p)){var N=A[p];p==="style"?ds(n,N):p==="dangerouslySetInnerHTML"?(N=N?N.__html:void 0,N!=null&&Qa(n,N)):p==="children"?typeof N=="string"?(a!=="textarea"||N!=="")&&Si(n,N):typeof N=="number"&&Si(n,""+N):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(o.hasOwnProperty(p)?N!=null&&p==="onScroll"&&Ye("scroll",n):N!=null&&Q(n,p,N,w))}switch(a){case"input":us(n),wo(n,c,!1);break;case"textarea":us(n),Vr(n);break;case"option":c.value!=null&&n.setAttribute("value",""+De(c.value));break;case"select":n.multiple=!!c.multiple,p=c.value,p!=null?vn(n,!!c.multiple,p,!1):c.defaultValue!=null&&vn(n,!!c.multiple,c.defaultValue,!0);break;default:typeof f.onClick=="function"&&(n.onclick=El)}switch(a){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}}c&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Lt(i),null;case 6:if(n&&i.stateNode!=null)nm(n,i,n.memoizedProps,c);else{if(typeof c!="string"&&i.stateNode===null)throw Error(t(166));if(a=$i(na.current),$i(Gn.current),xl(i)){if(c=i.stateNode,a=i.memoizedProps,c[Wn]=i,(p=c.nodeValue!==a)&&(n=rn,n!==null))switch(n.tag){case 3:wl(c.nodeValue,a,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&wl(c.nodeValue,a,(n.mode&1)!==0)}p&&(i.flags|=4)}else c=(a.nodeType===9?a:a.ownerDocument).createTextNode(c),c[Wn]=i,i.stateNode=c}return Lt(i),null;case 13:if(Xe(et),c=i.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Ze&&sn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)sp(),Bs(),i.flags|=98560,p=!1;else if(p=xl(i),c!==null&&c.dehydrated!==null){if(n===null){if(!p)throw Error(t(318));if(p=i.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(t(317));p[Wn]=i}else Bs(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Lt(i),p=!1}else Sn!==null&&(yh(Sn),Sn=null),p=!0;if(!p)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(c=c!==null,c!==(n!==null&&n.memoizedState!==null)&&c&&(i.child.flags|=8192,(i.mode&1)!==0&&(n===null||(et.current&1)!==0?_t===0&&(_t=3):wh())),i.updateQueue!==null&&(i.flags|=4),Lt(i),null);case 4:return Hs(),oh(n,i),n===null&&Ko(i.stateNode.containerInfo),Lt(i),null;case 10:return Lc(i.type._context),Lt(i),null;case 17:return $t(i.type)&&Il(),Lt(i),null;case 19:if(Xe(et),p=i.memoizedState,p===null)return Lt(i),null;if(c=(i.flags&128)!==0,w=p.rendering,w===null)if(c)aa(p,!1);else{if(_t!==0||n!==null&&(n.flags&128)!==0)for(n=i.child;n!==null;){if(w=Ll(n),w!==null){for(i.flags|=128,aa(p,!1),c=w.updateQueue,c!==null&&(i.updateQueue=c,i.flags|=4),i.subtreeFlags=0,c=a,a=i.child;a!==null;)p=a,n=c,p.flags&=14680066,w=p.alternate,w===null?(p.childLanes=0,p.lanes=n,p.child=null,p.subtreeFlags=0,p.memoizedProps=null,p.memoizedState=null,p.updateQueue=null,p.dependencies=null,p.stateNode=null):(p.childLanes=w.childLanes,p.lanes=w.lanes,p.child=w.child,p.subtreeFlags=0,p.deletions=null,p.memoizedProps=w.memoizedProps,p.memoizedState=w.memoizedState,p.updateQueue=w.updateQueue,p.type=w.type,n=w.dependencies,p.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),a=a.sibling;return Ge(et,et.current&1|2),i.child}n=n.sibling}p.tail!==null&&Ke()>Ks&&(i.flags|=128,c=!0,aa(p,!1),i.lanes=4194304)}else{if(!c)if(n=Ll(w),n!==null){if(i.flags|=128,c=!0,a=n.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),aa(p,!0),p.tail===null&&p.tailMode==="hidden"&&!w.alternate&&!Ze)return Lt(i),null}else 2*Ke()-p.renderingStartTime>Ks&&a!==1073741824&&(i.flags|=128,c=!0,aa(p,!1),i.lanes=4194304);p.isBackwards?(w.sibling=i.child,i.child=w):(a=p.last,a!==null?a.sibling=w:i.child=w,p.last=w)}return p.tail!==null?(i=p.tail,p.rendering=i,p.tail=i.sibling,p.renderingStartTime=Ke(),i.sibling=null,a=et.current,Ge(et,c?a&1|2:a&1),i):(Lt(i),null);case 22:case 23:return vh(),c=i.memoizedState!==null,n!==null&&n.memoizedState!==null!==c&&(i.flags|=8192),c&&(i.mode&1)!==0?(on&1073741824)!==0&&(Lt(i),i.subtreeFlags&6&&(i.flags|=8192)):Lt(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function xw(n,i){switch(xc(i),i.tag){case 1:return $t(i.type)&&Il(),n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 3:return Hs(),Xe(zt),Xe(Dt),Bc(),n=i.flags,(n&65536)!==0&&(n&128)===0?(i.flags=n&-65537|128,i):null;case 5:return jc(i),null;case 13:if(Xe(et),n=i.memoizedState,n!==null&&n.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Bs()}return n=i.flags,n&65536?(i.flags=n&-65537|128,i):null;case 19:return Xe(et),null;case 4:return Hs(),null;case 10:return Lc(i.type._context),null;case 22:case 23:return vh(),null;case 24:return null;default:return null}}var $l=!1,bt=!1,Pw=typeof WeakSet=="function"?WeakSet:Set,he=null;function Gs(n,i){var a=n.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(c){st(n,i,c)}else a.current=null}function ah(n,i,a){try{a()}catch(c){st(n,i,c)}}var rm=!1;function kw(n,i){if(vc=dr,n=bd(),hc(n)){if("selectionStart"in n)var a={start:n.selectionStart,end:n.selectionEnd};else e:{a=(a=n.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{a.nodeType,p.nodeType}catch{a=null;break e}var w=0,A=-1,N=-1,B=0,X=0,ee=n,Y=null;t:for(;;){for(var ue;ee!==a||f!==0&&ee.nodeType!==3||(A=w+f),ee!==p||c!==0&&ee.nodeType!==3||(N=w+c),ee.nodeType===3&&(w+=ee.nodeValue.length),(ue=ee.firstChild)!==null;)Y=ee,ee=ue;for(;;){if(ee===n)break t;if(Y===a&&++B===f&&(A=w),Y===p&&++X===c&&(N=w),(ue=ee.nextSibling)!==null)break;ee=Y,Y=ee.parentNode}ee=ue}a=A===-1||N===-1?null:{start:A,end:N}}else a=null}a=a||{start:0,end:0}}else a=null;for(wc={focusedElem:n,selectionRange:a},dr=!1,he=i;he!==null;)if(i=he,n=i.child,(i.subtreeFlags&1028)!==0&&n!==null)n.return=i,he=n;else for(;he!==null;){i=he;try{var fe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var de=fe.memoizedProps,lt=fe.memoizedState,M=i.stateNode,V=M.getSnapshotBeforeUpdate(i.elementType===i.type?de:An(i.type,de),lt);M.__reactInternalSnapshotBeforeUpdate=V}break;case 3:var j=i.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){st(i,i.return,te)}if(n=i.sibling,n!==null){n.return=i.return,he=n;break}he=i.return}return fe=rm,rm=!1,fe}function la(n,i,a){var c=i.updateQueue;if(c=c!==null?c.lastEffect:null,c!==null){var f=c=c.next;do{if((f.tag&n)===n){var p=f.destroy;f.destroy=void 0,p!==void 0&&ah(i,a,p)}f=f.next}while(f!==c)}}function ql(n,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&n)===n){var c=a.create;a.destroy=c()}a=a.next}while(a!==i)}}function lh(n){var i=n.ref;if(i!==null){var a=n.stateNode;switch(n.tag){case 5:n=a;break;default:n=a}typeof i=="function"?i(n):i.current=n}}function im(n){var i=n.alternate;i!==null&&(n.alternate=null,im(i)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(i=n.stateNode,i!==null&&(delete i[Wn],delete i[Xo],delete i[Sc],delete i[fw],delete i[dw])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function sm(n){return n.tag===5||n.tag===3||n.tag===4}function om(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||sm(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function uh(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(n,i):a.insertBefore(n,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(n,a)):(i=a,i.appendChild(n)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=El));else if(c!==4&&(n=n.child,n!==null))for(uh(n,i,a),n=n.sibling;n!==null;)uh(n,i,a),n=n.sibling}function ch(n,i,a){var c=n.tag;if(c===5||c===6)n=n.stateNode,i?a.insertBefore(n,i):a.appendChild(n);else if(c!==4&&(n=n.child,n!==null))for(ch(n,i,a),n=n.sibling;n!==null;)ch(n,i,a),n=n.sibling}var Ct=null,Cn=!1;function ti(n,i,a){for(a=a.child;a!==null;)am(n,i,a),a=a.sibling}function am(n,i,a){if(Xt&&typeof Xt.onCommitFiberUnmount=="function")try{Xt.onCommitFiberUnmount(Pi,a)}catch{}switch(a.tag){case 5:bt||Gs(a,i);case 6:var c=Ct,f=Cn;Ct=null,ti(n,i,a),Ct=c,Cn=f,Ct!==null&&(Cn?(n=Ct,a=a.stateNode,n.nodeType===8?n.parentNode.removeChild(a):n.removeChild(a)):Ct.removeChild(a.stateNode));break;case 18:Ct!==null&&(Cn?(n=Ct,a=a.stateNode,n.nodeType===8?Ic(n.parentNode,a):n.nodeType===1&&Ic(n,a),Hr(n)):Ic(Ct,a.stateNode));break;case 4:c=Ct,f=Cn,Ct=a.stateNode.containerInfo,Cn=!0,ti(n,i,a),Ct=c,Cn=f;break;case 0:case 11:case 14:case 15:if(!bt&&(c=a.updateQueue,c!==null&&(c=c.lastEffect,c!==null))){f=c=c.next;do{var p=f,w=p.destroy;p=p.tag,w!==void 0&&((p&2)!==0||(p&4)!==0)&&ah(a,i,w),f=f.next}while(f!==c)}ti(n,i,a);break;case 1:if(!bt&&(Gs(a,i),c=a.stateNode,typeof c.componentWillUnmount=="function"))try{c.props=a.memoizedProps,c.state=a.memoizedState,c.componentWillUnmount()}catch(A){st(a,i,A)}ti(n,i,a);break;case 21:ti(n,i,a);break;case 22:a.mode&1?(bt=(c=bt)||a.memoizedState!==null,ti(n,i,a),bt=c):ti(n,i,a);break;default:ti(n,i,a)}}function lm(n){var i=n.updateQueue;if(i!==null){n.updateQueue=null;var a=n.stateNode;a===null&&(a=n.stateNode=new Pw),i.forEach(function(c){var f=jw.bind(null,n,c);a.has(c)||(a.add(c),c.then(f,f))})}}function Rn(n,i){var a=i.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];try{var p=n,w=i,A=w;e:for(;A!==null;){switch(A.tag){case 5:Ct=A.stateNode,Cn=!1;break e;case 3:Ct=A.stateNode.containerInfo,Cn=!0;break e;case 4:Ct=A.stateNode.containerInfo,Cn=!0;break e}A=A.return}if(Ct===null)throw Error(t(160));am(p,w,f),Ct=null,Cn=!1;var N=f.alternate;N!==null&&(N.return=null),f.return=null}catch(B){st(f,i,B)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)um(i,n),i=i.sibling}function um(n,i){var a=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Rn(i,n),Kn(n),c&4){try{la(3,n,n.return),ql(3,n)}catch(de){st(n,n.return,de)}try{la(5,n,n.return)}catch(de){st(n,n.return,de)}}break;case 1:Rn(i,n),Kn(n),c&512&&a!==null&&Gs(a,a.return);break;case 5:if(Rn(i,n),Kn(n),c&512&&a!==null&&Gs(a,a.return),n.flags&32){var f=n.stateNode;try{Si(f,"")}catch(de){st(n,n.return,de)}}if(c&4&&(f=n.stateNode,f!=null)){var p=n.memoizedProps,w=a!==null?a.memoizedProps:p,A=n.type,N=n.updateQueue;if(n.updateQueue=null,N!==null)try{A==="input"&&p.type==="radio"&&p.name!=null&&hs(f,p),ps(A,w);var B=ps(A,p);for(w=0;w<N.length;w+=2){var X=N[w],ee=N[w+1];X==="style"?ds(f,ee):X==="dangerouslySetInnerHTML"?Qa(f,ee):X==="children"?Si(f,ee):Q(f,X,ee,B)}switch(A){case"input":Ii(f,p);break;case"textarea":Ga(f,p);break;case"select":var Y=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!p.multiple;var ue=p.value;ue!=null?vn(f,!!p.multiple,ue,!1):Y!==!!p.multiple&&(p.defaultValue!=null?vn(f,!!p.multiple,p.defaultValue,!0):vn(f,!!p.multiple,p.multiple?[]:"",!1))}f[Xo]=p}catch(de){st(n,n.return,de)}}break;case 6:if(Rn(i,n),Kn(n),c&4){if(n.stateNode===null)throw Error(t(162));f=n.stateNode,p=n.memoizedProps;try{f.nodeValue=p}catch(de){st(n,n.return,de)}}break;case 3:if(Rn(i,n),Kn(n),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Hr(i.containerInfo)}catch(de){st(n,n.return,de)}break;case 4:Rn(i,n),Kn(n);break;case 13:Rn(i,n),Kn(n),f=n.child,f.flags&8192&&(p=f.memoizedState!==null,f.stateNode.isHidden=p,!p||f.alternate!==null&&f.alternate.memoizedState!==null||(dh=Ke())),c&4&&lm(n);break;case 22:if(X=a!==null&&a.memoizedState!==null,n.mode&1?(bt=(B=bt)||X,Rn(i,n),bt=B):Rn(i,n),Kn(n),c&8192){if(B=n.memoizedState!==null,(n.stateNode.isHidden=B)&&!X&&(n.mode&1)!==0)for(he=n,X=n.child;X!==null;){for(ee=he=X;he!==null;){switch(Y=he,ue=Y.child,Y.tag){case 0:case 11:case 14:case 15:la(4,Y,Y.return);break;case 1:Gs(Y,Y.return);var fe=Y.stateNode;if(typeof fe.componentWillUnmount=="function"){c=Y,a=Y.return;try{i=c,fe.props=i.memoizedProps,fe.state=i.memoizedState,fe.componentWillUnmount()}catch(de){st(c,a,de)}}break;case 5:Gs(Y,Y.return);break;case 22:if(Y.memoizedState!==null){fm(ee);continue}}ue!==null?(ue.return=Y,he=ue):fm(ee)}X=X.sibling}e:for(X=null,ee=n;;){if(ee.tag===5){if(X===null){X=ee;try{f=ee.stateNode,B?(p=f.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none"):(A=ee.stateNode,N=ee.memoizedProps.style,w=N!=null&&N.hasOwnProperty("display")?N.display:null,A.style.display=Mr("display",w))}catch(de){st(n,n.return,de)}}}else if(ee.tag===6){if(X===null)try{ee.stateNode.nodeValue=B?"":ee.memoizedProps}catch(de){st(n,n.return,de)}}else if((ee.tag!==22&&ee.tag!==23||ee.memoizedState===null||ee===n)&&ee.child!==null){ee.child.return=ee,ee=ee.child;continue}if(ee===n)break e;for(;ee.sibling===null;){if(ee.return===null||ee.return===n)break e;X===ee&&(X=null),ee=ee.return}X===ee&&(X=null),ee.sibling.return=ee.return,ee=ee.sibling}}break;case 19:Rn(i,n),Kn(n),c&4&&lm(n);break;case 21:break;default:Rn(i,n),Kn(n)}}function Kn(n){var i=n.flags;if(i&2){try{e:{for(var a=n.return;a!==null;){if(sm(a)){var c=a;break e}a=a.return}throw Error(t(160))}switch(c.tag){case 5:var f=c.stateNode;c.flags&32&&(Si(f,""),c.flags&=-33);var p=om(n);ch(n,p,f);break;case 3:case 4:var w=c.stateNode.containerInfo,A=om(n);uh(n,A,w);break;default:throw Error(t(161))}}catch(N){st(n,n.return,N)}n.flags&=-3}i&4096&&(n.flags&=-4097)}function Nw(n,i,a){he=n,cm(n)}function cm(n,i,a){for(var c=(n.mode&1)!==0;he!==null;){var f=he,p=f.child;if(f.tag===22&&c){var w=f.memoizedState!==null||$l;if(!w){var A=f.alternate,N=A!==null&&A.memoizedState!==null||bt;A=$l;var B=bt;if($l=w,(bt=N)&&!B)for(he=f;he!==null;)w=he,N=w.child,w.tag===22&&w.memoizedState!==null?dm(f):N!==null?(N.return=w,he=N):dm(f);for(;p!==null;)he=p,cm(p),p=p.sibling;he=f,$l=A,bt=B}hm(n)}else(f.subtreeFlags&8772)!==0&&p!==null?(p.return=f,he=p):hm(n)}}function hm(n){for(;he!==null;){var i=he;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:bt||ql(5,i);break;case 1:var c=i.stateNode;if(i.flags&4&&!bt)if(a===null)c.componentDidMount();else{var f=i.elementType===i.type?a.memoizedProps:An(i.type,a.memoizedProps);c.componentDidUpdate(f,a.memoizedState,c.__reactInternalSnapshotBeforeUpdate)}var p=i.updateQueue;p!==null&&fp(i,p,c);break;case 3:var w=i.updateQueue;if(w!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}fp(i,w,a)}break;case 5:var A=i.stateNode;if(a===null&&i.flags&4){a=A;var N=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":N.autoFocus&&a.focus();break;case"img":N.src&&(a.src=N.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var B=i.alternate;if(B!==null){var X=B.memoizedState;if(X!==null){var ee=X.dehydrated;ee!==null&&Hr(ee)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}bt||i.flags&512&&lh(i)}catch(Y){st(i,i.return,Y)}}if(i===n){he=null;break}if(a=i.sibling,a!==null){a.return=i.return,he=a;break}he=i.return}}function fm(n){for(;he!==null;){var i=he;if(i===n){he=null;break}var a=i.sibling;if(a!==null){a.return=i.return,he=a;break}he=i.return}}function dm(n){for(;he!==null;){var i=he;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{ql(4,i)}catch(N){st(i,a,N)}break;case 1:var c=i.stateNode;if(typeof c.componentDidMount=="function"){var f=i.return;try{c.componentDidMount()}catch(N){st(i,f,N)}}var p=i.return;try{lh(i)}catch(N){st(i,p,N)}break;case 5:var w=i.return;try{lh(i)}catch(N){st(i,w,N)}}}catch(N){st(i,i.return,N)}if(i===n){he=null;break}var A=i.sibling;if(A!==null){A.return=i.return,he=A;break}he=i.return}}var Dw=Math.ceil,Hl=oe.ReactCurrentDispatcher,hh=oe.ReactCurrentOwner,mn=oe.ReactCurrentBatchConfig,je=0,Et=null,ft=null,Rt=0,on=0,Qs=Yr(0),_t=0,ua=null,Hi=0,Wl=0,fh=0,ca=null,Ht=null,dh=0,Ks=1/0,Ir=null,Gl=!1,ph=null,ni=null,Ql=!1,ri=null,Kl=0,ha=0,mh=null,Yl=-1,Xl=0;function Bt(){return(je&6)!==0?Ke():Yl!==-1?Yl:Yl=Ke()}function ii(n){return(n.mode&1)===0?1:(je&2)!==0&&Rt!==0?Rt&-Rt:mw.transition!==null?(Xl===0&&(Xl=Do()),Xl):(n=be,n!==0||(n=window.event,n=n===void 0?16:Ss(n.type)),n)}function xn(n,i,a,c){if(50<ha)throw ha=0,mh=null,Error(t(185));Vi(n,a,c),((je&2)===0||n!==Et)&&(n===Et&&((je&2)===0&&(Wl|=a),_t===4&&si(n,Rt)),Wt(n,c),a===1&&je===0&&(i.mode&1)===0&&(Ks=Ke()+500,Al&&Jr()))}function Wt(n,i){var a=n.callbackNode;Di(n,i);var c=cr(n,n===Et?Rt:0);if(c===0)a!==null&&ys(a),n.callbackNode=null,n.callbackPriority=0;else if(i=c&-c,n.callbackPriority!==i){if(a!=null&&ys(a),i===1)n.tag===0?pw(mm.bind(null,n)):ep(mm.bind(null,n)),cw(function(){(je&6)===0&&Jr()}),a=null;else{switch(Mn(c)){case 1:a=_s;break;case 4:a=Po;break;case 16:a=xi;break;case 536870912:a=vs;break;default:a=xi}a=Im(a,pm.bind(null,n))}n.callbackPriority=i,n.callbackNode=a}}function pm(n,i){if(Yl=-1,Xl=0,(je&6)!==0)throw Error(t(327));var a=n.callbackNode;if(Ys()&&n.callbackNode!==a)return null;var c=cr(n,n===Et?Rt:0);if(c===0)return null;if((c&30)!==0||(c&n.expiredLanes)!==0||i)i=Jl(n,c);else{i=c;var f=je;je|=2;var p=ym();(Et!==n||Rt!==i)&&(Ir=null,Ks=Ke()+500,Gi(n,i));do try{bw();break}catch(A){gm(n,A)}while(!0);Vc(),Hl.current=p,je=f,ft!==null?i=0:(Et=null,Rt=0,i=_t)}if(i!==0){if(i===2&&(f=No(n),f!==0&&(c=f,i=gh(n,f))),i===1)throw a=ua,Gi(n,0),si(n,c),Wt(n,Ke()),a;if(i===6)si(n,c);else{if(f=n.current.alternate,(c&30)===0&&!Vw(f)&&(i=Jl(n,c),i===2&&(p=No(n),p!==0&&(c=p,i=gh(n,p))),i===1))throw a=ua,Gi(n,0),si(n,c),Wt(n,Ke()),a;switch(n.finishedWork=f,n.finishedLanes=c,i){case 0:case 1:throw Error(t(345));case 2:Qi(n,Ht,Ir);break;case 3:if(si(n,c),(c&130023424)===c&&(i=dh+500-Ke(),10<i)){if(cr(n,0)!==0)break;if(f=n.suspendedLanes,(f&c)!==c){Bt(),n.pingedLanes|=n.suspendedLanes&f;break}n.timeoutHandle=Tc(Qi.bind(null,n,Ht,Ir),i);break}Qi(n,Ht,Ir);break;case 4:if(si(n,c),(c&4194240)===c)break;for(i=n.eventTimes,f=-1;0<c;){var w=31-Jt(c);p=1<<w,w=i[w],w>f&&(f=w),c&=~p}if(c=f,c=Ke()-c,c=(120>c?120:480>c?480:1080>c?1080:1920>c?1920:3e3>c?3e3:4320>c?4320:1960*Dw(c/1960))-c,10<c){n.timeoutHandle=Tc(Qi.bind(null,n,Ht,Ir),c);break}Qi(n,Ht,Ir);break;case 5:Qi(n,Ht,Ir);break;default:throw Error(t(329))}}}return Wt(n,Ke()),n.callbackNode===a?pm.bind(null,n):null}function gh(n,i){var a=ca;return n.current.memoizedState.isDehydrated&&(Gi(n,i).flags|=256),n=Jl(n,i),n!==2&&(i=Ht,Ht=a,i!==null&&yh(i)),n}function yh(n){Ht===null?Ht=n:Ht.push.apply(Ht,n)}function Vw(n){for(var i=n;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var c=0;c<a.length;c++){var f=a[c],p=f.getSnapshot;f=f.value;try{if(!In(p(),f))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===n)break;for(;i.sibling===null;){if(i.return===null||i.return===n)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function si(n,i){for(i&=~fh,i&=~Wl,n.suspendedLanes|=i,n.pingedLanes&=~i,n=n.expirationTimes;0<i;){var a=31-Jt(i),c=1<<a;n[a]=-1,i&=~c}}function mm(n){if((je&6)!==0)throw Error(t(327));Ys();var i=cr(n,0);if((i&1)===0)return Wt(n,Ke()),null;var a=Jl(n,i);if(n.tag!==0&&a===2){var c=No(n);c!==0&&(i=c,a=gh(n,c))}if(a===1)throw a=ua,Gi(n,0),si(n,i),Wt(n,Ke()),a;if(a===6)throw Error(t(345));return n.finishedWork=n.current.alternate,n.finishedLanes=i,Qi(n,Ht,Ir),Wt(n,Ke()),null}function _h(n,i){var a=je;je|=1;try{return n(i)}finally{je=a,je===0&&(Ks=Ke()+500,Al&&Jr())}}function Wi(n){ri!==null&&ri.tag===0&&(je&6)===0&&Ys();var i=je;je|=1;var a=mn.transition,c=be;try{if(mn.transition=null,be=1,n)return n()}finally{be=c,mn.transition=a,je=i,(je&6)===0&&Jr()}}function vh(){on=Qs.current,Xe(Qs)}function Gi(n,i){n.finishedWork=null,n.finishedLanes=0;var a=n.timeoutHandle;if(a!==-1&&(n.timeoutHandle=-1,uw(a)),ft!==null)for(a=ft.return;a!==null;){var c=a;switch(xc(c),c.tag){case 1:c=c.type.childContextTypes,c!=null&&Il();break;case 3:Hs(),Xe(zt),Xe(Dt),Bc();break;case 5:jc(c);break;case 4:Hs();break;case 13:Xe(et);break;case 19:Xe(et);break;case 10:Lc(c.type._context);break;case 22:case 23:vh()}a=a.return}if(Et=n,ft=n=oi(n.current,null),Rt=on=i,_t=0,ua=null,fh=Wl=Hi=0,Ht=ca=null,zi!==null){for(i=0;i<zi.length;i++)if(a=zi[i],c=a.interleaved,c!==null){a.interleaved=null;var f=c.next,p=a.pending;if(p!==null){var w=p.next;p.next=f,c.next=w}a.pending=c}zi=null}return n}function gm(n,i){do{var a=ft;try{if(Vc(),bl.current=jl,Ml){for(var c=tt.memoizedState;c!==null;){var f=c.queue;f!==null&&(f.pending=null),c=c.next}Ml=!1}if(qi=0,wt=yt=tt=null,ra=!1,ia=0,hh.current=null,a===null||a.return===null){_t=1,ua=i,ft=null;break}e:{var p=n,w=a.return,A=a,N=i;if(i=Rt,A.flags|=32768,N!==null&&typeof N=="object"&&typeof N.then=="function"){var B=N,X=A,ee=X.tag;if((X.mode&1)===0&&(ee===0||ee===11||ee===15)){var Y=X.alternate;Y?(X.updateQueue=Y.updateQueue,X.memoizedState=Y.memoizedState,X.lanes=Y.lanes):(X.updateQueue=null,X.memoizedState=null)}var ue=Bp(w);if(ue!==null){ue.flags&=-257,zp(ue,w,A,p,i),ue.mode&1&&Up(p,B,i),i=ue,N=B;var fe=i.updateQueue;if(fe===null){var de=new Set;de.add(N),i.updateQueue=de}else fe.add(N);break e}else{if((i&1)===0){Up(p,B,i),wh();break e}N=Error(t(426))}}else if(Ze&&A.mode&1){var lt=Bp(w);if(lt!==null){(lt.flags&65536)===0&&(lt.flags|=256),zp(lt,w,A,p,i),Nc(Ws(N,A));break e}}p=N=Ws(N,A),_t!==4&&(_t=2),ca===null?ca=[p]:ca.push(p),p=w;do{switch(p.tag){case 3:p.flags|=65536,i&=-i,p.lanes|=i;var M=Fp(p,N,i);hp(p,M);break e;case 1:A=N;var V=p.type,j=p.stateNode;if((p.flags&128)===0&&(typeof V.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(ni===null||!ni.has(j)))){p.flags|=65536,i&=-i,p.lanes|=i;var te=jp(p,A,i);hp(p,te);break e}}p=p.return}while(p!==null)}vm(a)}catch(me){i=me,ft===a&&a!==null&&(ft=a=a.return);continue}break}while(!0)}function ym(){var n=Hl.current;return Hl.current=jl,n===null?jl:n}function wh(){(_t===0||_t===3||_t===2)&&(_t=4),Et===null||(Hi&268435455)===0&&(Wl&268435455)===0||si(Et,Rt)}function Jl(n,i){var a=je;je|=2;var c=ym();(Et!==n||Rt!==i)&&(Ir=null,Gi(n,i));do try{Lw();break}catch(f){gm(n,f)}while(!0);if(Vc(),je=a,Hl.current=c,ft!==null)throw Error(t(261));return Et=null,Rt=0,_t}function Lw(){for(;ft!==null;)_m(ft)}function bw(){for(;ft!==null&&!Ri();)_m(ft)}function _m(n){var i=Tm(n.alternate,n,on);n.memoizedProps=n.pendingProps,i===null?vm(n):ft=i,hh.current=null}function vm(n){var i=n;do{var a=i.alternate;if(n=i.return,(i.flags&32768)===0){if(a=Rw(a,i,on),a!==null){ft=a;return}}else{if(a=xw(a,i),a!==null){a.flags&=32767,ft=a;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{_t=6,ft=null;return}}if(i=i.sibling,i!==null){ft=i;return}ft=i=n}while(i!==null);_t===0&&(_t=5)}function Qi(n,i,a){var c=be,f=mn.transition;try{mn.transition=null,be=1,Mw(n,i,a,c)}finally{mn.transition=f,be=c}return null}function Mw(n,i,a,c){do Ys();while(ri!==null);if((je&6)!==0)throw Error(t(327));a=n.finishedWork;var f=n.finishedLanes;if(a===null)return null;if(n.finishedWork=null,n.finishedLanes=0,a===n.current)throw Error(t(177));n.callbackNode=null,n.callbackPriority=0;var p=a.lanes|a.childLanes;if(oc(n,p),n===Et&&(ft=Et=null,Rt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Ql||(Ql=!0,Im(xi,function(){return Ys(),null})),p=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||p){p=mn.transition,mn.transition=null;var w=be;be=1;var A=je;je|=4,hh.current=null,kw(n,a),um(a,n),nw(wc),dr=!!vc,wc=vc=null,n.current=a,Nw(a),ur(),je=A,be=w,mn.transition=p}else n.current=a;if(Ql&&(Ql=!1,ri=n,Kl=f),p=n.pendingLanes,p===0&&(ni=null),sl(a.stateNode),Wt(n,Ke()),i!==null)for(c=n.onRecoverableError,a=0;a<i.length;a++)f=i[a],c(f.value,{componentStack:f.stack,digest:f.digest});if(Gl)throw Gl=!1,n=ph,ph=null,n;return(Kl&1)!==0&&n.tag!==0&&Ys(),p=n.pendingLanes,(p&1)!==0?n===mh?ha++:(ha=0,mh=n):ha=0,Jr(),null}function Ys(){if(ri!==null){var n=Mn(Kl),i=mn.transition,a=be;try{if(mn.transition=null,be=16>n?16:n,ri===null)var c=!1;else{if(n=ri,ri=null,Kl=0,(je&6)!==0)throw Error(t(331));var f=je;for(je|=4,he=n.current;he!==null;){var p=he,w=p.child;if((he.flags&16)!==0){var A=p.deletions;if(A!==null){for(var N=0;N<A.length;N++){var B=A[N];for(he=B;he!==null;){var X=he;switch(X.tag){case 0:case 11:case 15:la(8,X,p)}var ee=X.child;if(ee!==null)ee.return=X,he=ee;else for(;he!==null;){X=he;var Y=X.sibling,ue=X.return;if(im(X),X===B){he=null;break}if(Y!==null){Y.return=ue,he=Y;break}he=ue}}}var fe=p.alternate;if(fe!==null){var de=fe.child;if(de!==null){fe.child=null;do{var lt=de.sibling;de.sibling=null,de=lt}while(de!==null)}}he=p}}if((p.subtreeFlags&2064)!==0&&w!==null)w.return=p,he=w;else e:for(;he!==null;){if(p=he,(p.flags&2048)!==0)switch(p.tag){case 0:case 11:case 15:la(9,p,p.return)}var M=p.sibling;if(M!==null){M.return=p.return,he=M;break e}he=p.return}}var V=n.current;for(he=V;he!==null;){w=he;var j=w.child;if((w.subtreeFlags&2064)!==0&&j!==null)j.return=w,he=j;else e:for(w=V;he!==null;){if(A=he,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:ql(9,A)}}catch(me){st(A,A.return,me)}if(A===w){he=null;break e}var te=A.sibling;if(te!==null){te.return=A.return,he=te;break e}he=A.return}}if(je=f,Jr(),Xt&&typeof Xt.onPostCommitFiberRoot=="function")try{Xt.onPostCommitFiberRoot(Pi,n)}catch{}c=!0}return c}finally{be=a,mn.transition=i}}return!1}function wm(n,i,a){i=Ws(a,i),i=Fp(n,i,1),n=ei(n,i,1),i=Bt(),n!==null&&(Vi(n,1,i),Wt(n,i))}function st(n,i,a){if(n.tag===3)wm(n,n,a);else for(;i!==null;){if(i.tag===3){wm(i,n,a);break}else if(i.tag===1){var c=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(ni===null||!ni.has(c))){n=Ws(a,n),n=jp(i,n,1),i=ei(i,n,1),n=Bt(),i!==null&&(Vi(i,1,n),Wt(i,n));break}}i=i.return}}function Ow(n,i,a){var c=n.pingCache;c!==null&&c.delete(i),i=Bt(),n.pingedLanes|=n.suspendedLanes&a,Et===n&&(Rt&a)===a&&(_t===4||_t===3&&(Rt&130023424)===Rt&&500>Ke()-dh?Gi(n,0):fh|=a),Wt(n,i)}function Em(n,i){i===0&&((n.mode&1)===0?i=1:(i=zr,zr<<=1,(zr&130023424)===0&&(zr=4194304)));var a=Bt();n=wr(n,i),n!==null&&(Vi(n,i,a),Wt(n,a))}function Fw(n){var i=n.memoizedState,a=0;i!==null&&(a=i.retryLane),Em(n,a)}function jw(n,i){var a=0;switch(n.tag){case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=n.stateNode;break;default:throw Error(t(314))}c!==null&&c.delete(i),Em(n,a)}var Tm;Tm=function(n,i,a){if(n!==null)if(n.memoizedProps!==i.pendingProps||zt.current)qt=!0;else{if((n.lanes&a)===0&&(i.flags&128)===0)return qt=!1,Cw(n,i,a);qt=(n.flags&131072)!==0}else qt=!1,Ze&&(i.flags&1048576)!==0&&tp(i,Rl,i.index);switch(i.lanes=0,i.tag){case 2:var c=i.type;zl(n,i),n=i.pendingProps;var f=Fs(i,Dt.current);qs(i,a),f=qc(null,i,c,n,f,a);var p=Hc();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,$t(c)?(p=!0,Sl(i)):p=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,Oc(i),f.updater=Ul,i.stateNode=f,f._reactInternals=i,Xc(i,c,n,a),i=th(null,i,c,!0,p,a)):(i.tag=0,Ze&&p&&Rc(i),Ut(null,i,f,a),i=i.child),i;case 16:c=i.elementType;e:{switch(zl(n,i),n=i.pendingProps,f=c._init,c=f(c._payload),i.type=c,f=i.tag=Bw(c),n=An(c,n),f){case 0:i=eh(null,i,c,n,a);break e;case 1:i=Qp(null,i,c,n,a);break e;case 11:i=$p(null,i,c,n,a);break e;case 14:i=qp(null,i,c,An(c.type,n),a);break e}throw Error(t(306,c,""))}return i;case 0:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:An(c,f),eh(n,i,c,f,a);case 1:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:An(c,f),Qp(n,i,c,f,a);case 3:e:{if(Kp(i),n===null)throw Error(t(387));c=i.pendingProps,p=i.memoizedState,f=p.element,cp(n,i),Vl(i,c,null,a);var w=i.memoizedState;if(c=w.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},i.updateQueue.baseState=p,i.memoizedState=p,i.flags&256){f=Ws(Error(t(423)),i),i=Yp(n,i,c,a,f);break e}else if(c!==f){f=Ws(Error(t(424)),i),i=Yp(n,i,c,a,f);break e}else for(sn=Kr(i.stateNode.containerInfo.firstChild),rn=i,Ze=!0,Sn=null,a=lp(i,null,c,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Bs(),c===f){i=Tr(n,i,a);break e}Ut(n,i,c,a)}i=i.child}return i;case 5:return dp(i),n===null&&kc(i),c=i.type,f=i.pendingProps,p=n!==null?n.memoizedProps:null,w=f.children,Ec(c,f)?w=null:p!==null&&Ec(c,p)&&(i.flags|=32),Gp(n,i),Ut(n,i,w,a),i.child;case 6:return n===null&&kc(i),null;case 13:return Xp(n,i,a);case 4:return Fc(i,i.stateNode.containerInfo),c=i.pendingProps,n===null?i.child=zs(i,null,c,a):Ut(n,i,c,a),i.child;case 11:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:An(c,f),$p(n,i,c,f,a);case 7:return Ut(n,i,i.pendingProps,a),i.child;case 8:return Ut(n,i,i.pendingProps.children,a),i.child;case 12:return Ut(n,i,i.pendingProps.children,a),i.child;case 10:e:{if(c=i.type._context,f=i.pendingProps,p=i.memoizedProps,w=f.value,Ge(kl,c._currentValue),c._currentValue=w,p!==null)if(In(p.value,w)){if(p.children===f.children&&!zt.current){i=Tr(n,i,a);break e}}else for(p=i.child,p!==null&&(p.return=i);p!==null;){var A=p.dependencies;if(A!==null){w=p.child;for(var N=A.firstContext;N!==null;){if(N.context===c){if(p.tag===1){N=Er(-1,a&-a),N.tag=2;var B=p.updateQueue;if(B!==null){B=B.shared;var X=B.pending;X===null?N.next=N:(N.next=X.next,X.next=N),B.pending=N}}p.lanes|=a,N=p.alternate,N!==null&&(N.lanes|=a),bc(p.return,a,i),A.lanes|=a;break}N=N.next}}else if(p.tag===10)w=p.type===i.type?null:p.child;else if(p.tag===18){if(w=p.return,w===null)throw Error(t(341));w.lanes|=a,A=w.alternate,A!==null&&(A.lanes|=a),bc(w,a,i),w=p.sibling}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===i){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}Ut(n,i,f.children,a),i=i.child}return i;case 9:return f=i.type,c=i.pendingProps.children,qs(i,a),f=dn(f),c=c(f),i.flags|=1,Ut(n,i,c,a),i.child;case 14:return c=i.type,f=An(c,i.pendingProps),f=An(c.type,f),qp(n,i,c,f,a);case 15:return Hp(n,i,i.type,i.pendingProps,a);case 17:return c=i.type,f=i.pendingProps,f=i.elementType===c?f:An(c,f),zl(n,i),i.tag=1,$t(c)?(n=!0,Sl(i)):n=!1,qs(i,a),Mp(i,c,f),Xc(i,c,f,a),th(null,i,c,!0,n,a);case 19:return Zp(n,i,a);case 22:return Wp(n,i,a)}throw Error(t(156,i.tag))};function Im(n,i){return xo(n,i)}function Uw(n,i,a,c){this.tag=n,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gn(n,i,a,c){return new Uw(n,i,a,c)}function Eh(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Bw(n){if(typeof n=="function")return Eh(n)?1:0;if(n!=null){if(n=n.$$typeof,n===b)return 11;if(n===ve)return 14}return 2}function oi(n,i){var a=n.alternate;return a===null?(a=gn(n.tag,i,n.key,n.mode),a.elementType=n.elementType,a.type=n.type,a.stateNode=n.stateNode,a.alternate=n,n.alternate=a):(a.pendingProps=i,a.type=n.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=n.flags&14680064,a.childLanes=n.childLanes,a.lanes=n.lanes,a.child=n.child,a.memoizedProps=n.memoizedProps,a.memoizedState=n.memoizedState,a.updateQueue=n.updateQueue,i=n.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=n.sibling,a.index=n.index,a.ref=n.ref,a}function Zl(n,i,a,c,f,p){var w=2;if(c=n,typeof n=="function")Eh(n)&&(w=1);else if(typeof n=="string")w=5;else e:switch(n){case x:return Ki(a.children,f,p,i);case S:w=8,f|=8;break;case C:return n=gn(12,a,i,f|2),n.elementType=C,n.lanes=p,n;case R:return n=gn(13,a,i,f),n.elementType=R,n.lanes=p,n;case Me:return n=gn(19,a,i,f),n.elementType=Me,n.lanes=p,n;case Ce:return eu(a,f,p,i);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case D:w=10;break e;case k:w=9;break e;case b:w=11;break e;case ve:w=14;break e;case Ne:w=16,c=null;break e}throw Error(t(130,n==null?n:typeof n,""))}return i=gn(w,a,i,f),i.elementType=n,i.type=c,i.lanes=p,i}function Ki(n,i,a,c){return n=gn(7,n,c,i),n.lanes=a,n}function eu(n,i,a,c){return n=gn(22,n,c,i),n.elementType=Ce,n.lanes=a,n.stateNode={isHidden:!1},n}function Th(n,i,a){return n=gn(6,n,null,i),n.lanes=a,n}function Ih(n,i,a){return i=gn(4,n.children!==null?n.children:[],n.key,i),i.lanes=a,i.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},i}function zw(n,i,a,c,f){this.tag=i,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vo(0),this.expirationTimes=Vo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vo(0),this.identifierPrefix=c,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function Sh(n,i,a,c,f,p,w,A,N){return n=new zw(n,i,a,A,N),i===1?(i=1,p===!0&&(i|=8)):i=0,p=gn(3,null,null,i),n.current=p,p.stateNode=n,p.memoizedState={element:c,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oc(p),n}function $w(n,i,a){var c=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ye,key:c==null?null:""+c,children:n,containerInfo:i,implementation:a}}function Sm(n){if(!n)return Xr;n=n._reactInternals;e:{if(En(n)!==n||n.tag!==1)throw Error(t(170));var i=n;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if($t(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(n.tag===1){var a=n.type;if($t(a))return Jd(n,a,i)}return i}function Am(n,i,a,c,f,p,w,A,N){return n=Sh(a,c,!0,n,f,p,w,A,N),n.context=Sm(null),a=n.current,c=Bt(),f=ii(a),p=Er(c,f),p.callback=i??null,ei(a,p,f),n.current.lanes=f,Vi(n,f,c),Wt(n,c),n}function tu(n,i,a,c){var f=i.current,p=Bt(),w=ii(f);return a=Sm(a),i.context===null?i.context=a:i.pendingContext=a,i=Er(p,w),i.payload={element:n},c=c===void 0?null:c,c!==null&&(i.callback=c),n=ei(f,i,w),n!==null&&(xn(n,f,w,p),Dl(n,f,w)),w}function nu(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Cm(n,i){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var a=n.retryLane;n.retryLane=a!==0&&a<i?a:i}}function Ah(n,i){Cm(n,i),(n=n.alternate)&&Cm(n,i)}function qw(){return null}var Rm=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ch(n){this._internalRoot=n}ru.prototype.render=Ch.prototype.render=function(n){var i=this._internalRoot;if(i===null)throw Error(t(409));tu(n,i,null,null)},ru.prototype.unmount=Ch.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var i=n.containerInfo;Wi(function(){tu(null,n,null,null)}),i[gr]=null}};function ru(n){this._internalRoot=n}ru.prototype.unstable_scheduleHydration=function(n){if(n){var i=Oo();n={blockedOn:null,target:n,priority:i};for(var a=0;a<Zt.length&&i!==0&&i<Zt[a].priority;a++);Zt.splice(a,0,n),a===0&&Ts(n)}};function Rh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function iu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function xm(){}function Hw(n,i,a,c,f){if(f){if(typeof c=="function"){var p=c;c=function(){var B=nu(w);p.call(B)}}var w=Am(i,c,n,0,null,!1,!1,"",xm);return n._reactRootContainer=w,n[gr]=w.current,Ko(n.nodeType===8?n.parentNode:n),Wi(),w}for(;f=n.lastChild;)n.removeChild(f);if(typeof c=="function"){var A=c;c=function(){var B=nu(N);A.call(B)}}var N=Sh(n,0,!1,null,null,!1,!1,"",xm);return n._reactRootContainer=N,n[gr]=N.current,Ko(n.nodeType===8?n.parentNode:n),Wi(function(){tu(i,N,a,c)}),N}function su(n,i,a,c,f){var p=a._reactRootContainer;if(p){var w=p;if(typeof f=="function"){var A=f;f=function(){var N=nu(w);A.call(N)}}tu(i,w,n,f)}else w=Hw(a,i,n,f,c);return nu(w)}bo=function(n){switch(n.tag){case 3:var i=n.stateNode;if(i.current.memoizedState.isDehydrated){var a=ze(i.pendingLanes);a!==0&&(Lo(i,a|1),Wt(i,Ke()),(je&6)===0&&(Ks=Ke()+500,Jr()))}break;case 13:Wi(function(){var c=wr(n,1);if(c!==null){var f=Bt();xn(c,n,1,f)}}),Ah(n,1)}},ws=function(n){if(n.tag===13){var i=wr(n,134217728);if(i!==null){var a=Bt();xn(i,n,134217728,a)}Ah(n,134217728)}},Mo=function(n){if(n.tag===13){var i=ii(n),a=wr(n,i);if(a!==null){var c=Bt();xn(a,n,i,c)}Ah(n,i)}},Oo=function(){return be},Fo=function(n,i){var a=be;try{return be=n,i()}finally{be=a}},or=function(n,i,a){switch(i){case"input":if(Ii(n,a),i=a.name,a.type==="radio"&&i!=null){for(a=n;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var c=a[i];if(c!==n&&c.form===n.form){var f=Tl(c);if(!f)throw Error(t(90));vo(c),Ii(c,f)}}}break;case"textarea":Ga(n,a);break;case"select":i=a.value,i!=null&&vn(n,!!a.multiple,i,!1)}},Ya=_h,Xa=Wi;var Ww={usingClientEntryPoint:!1,Events:[Jo,Ms,Tl,Fr,jr,_h]},fa={findFiberByHostInstance:Fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Gw={bundleType:fa.bundleType,version:fa.version,rendererPackageName:fa.rendererPackageName,rendererConfig:fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=il(n),n===null?null:n.stateNode},findFiberByHostInstance:fa.findFiberByHostInstance||qw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ou=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ou.isDisabled&&ou.supportsFiber)try{Pi=ou.inject(Gw),Xt=ou}catch{}}return Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ww,Gt.createPortal=function(n,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rh(i))throw Error(t(200));return $w(n,i,null,a)},Gt.createRoot=function(n,i){if(!Rh(n))throw Error(t(299));var a=!1,c="",f=Rm;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(c=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=Sh(n,1,!1,null,null,a,!1,c,f),n[gr]=i.current,Ko(n.nodeType===8?n.parentNode:n),new Ch(i)},Gt.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var i=n._reactInternals;if(i===void 0)throw typeof n.render=="function"?Error(t(188)):(n=Object.keys(n).join(","),Error(t(268,n)));return n=il(i),n=n===null?null:n.stateNode,n},Gt.flushSync=function(n){return Wi(n)},Gt.hydrate=function(n,i,a){if(!iu(i))throw Error(t(200));return su(null,n,i,!0,a)},Gt.hydrateRoot=function(n,i,a){if(!Rh(n))throw Error(t(405));var c=a!=null&&a.hydratedSources||null,f=!1,p="",w=Rm;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),i=Am(i,null,n,1,a??null,f,!1,p,w),n[gr]=i.current,Ko(n),c)for(n=0;n<c.length;n++)a=c[n],f=a._getVersion,f=f(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,f]:i.mutableSourceEagerHydrationData.push(a,f);return new ru(i)},Gt.render=function(n,i,a){if(!iu(i))throw Error(t(200));return su(null,n,i,!1,a)},Gt.unmountComponentAtNode=function(n){if(!iu(n))throw Error(t(40));return n._reactRootContainer?(Wi(function(){su(null,null,n,!1,function(){n._reactRootContainer=null,n[gr]=null})}),!0):!1},Gt.unstable_batchedUpdates=_h,Gt.unstable_renderSubtreeIntoContainer=function(n,i,a,c){if(!iu(a))throw Error(t(200));if(n==null||n._reactInternals===void 0)throw Error(t(38));return su(n,i,a,!1,c)},Gt.version="18.3.1-next-f1338f8080-20240426",Gt}var Mm;function t0(){if(Mm)return kh.exports;Mm=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),kh.exports=e0(),kh.exports}var Om;function n0(){if(Om)return au;Om=1;var r=t0();return au.createRoot=r.createRoot,au.hydrateRoot=r.hydrateRoot,au}var r0=n0(),q=Ef();/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Fm="popstate";function i0(r={}){function e(s,o){let{pathname:l,search:h,hash:d}=s.location;return Gh("",{pathname:l,search:h,hash:d},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:Aa(o)}return o0(e,t,null,r)}function nt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function nr(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function s0(){return Math.random().toString(36).substring(2,10)}function jm(r,e){return{usr:r.state,key:r.key,idx:e}}function Gh(r,e,t=null,s){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?co(e):e,state:t,key:e&&e.key||s||s0()}}function Aa({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function co(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let s=r.indexOf("?");s>=0&&(e.search=r.substring(s),r=r.substring(0,s)),r&&(e.pathname=r)}return e}function o0(r,e,t,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,h=o.history,d="POP",g=null,y=v();y==null&&(y=0,h.replaceState({...h.state,idx:y},""));function v(){return(h.state||{idx:null}).idx}function E(){d="POP";let F=v(),J=F==null?null:F-y;y=F,g&&g({action:d,location:$.location,delta:J})}function I(F,J){d="PUSH";let ne=Gh($.location,F,J);y=v()+1;let Q=jm(ne,y),oe=$.createHref(ne);try{h.pushState(Q,"",oe)}catch(ge){if(ge instanceof DOMException&&ge.name==="DataCloneError")throw ge;o.location.assign(oe)}l&&g&&g({action:d,location:$.location,delta:1})}function L(F,J){d="REPLACE";let ne=Gh($.location,F,J);y=v();let Q=jm(ne,y),oe=$.createHref(ne);h.replaceState(Q,"",oe),l&&g&&g({action:d,location:$.location,delta:0})}function W(F){return a0(F)}let $={get action(){return d},get location(){return r(o,h)},listen(F){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(Fm,E),g=F,()=>{o.removeEventListener(Fm,E),g=null}},createHref(F){return e(o,F)},createURL:W,encodeLocation(F){let J=W(F);return{pathname:J.pathname,search:J.search,hash:J.hash}},push:I,replace:L,go(F){return h.go(F)}};return $}function a0(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),nt(t,"No window.location.(origin|href) available to create URL");let s=typeof r=="string"?r:Aa(r);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function uy(r,e,t="/"){return l0(r,e,t,!1)}function l0(r,e,t,s){let o=typeof e=="string"?co(e):e,l=Cr(o.pathname||"/",t);if(l==null)return null;let h=cy(r);u0(h);let d=null;for(let g=0;d==null&&g<h.length;++g){let y=w0(l);d=_0(h[g],y,s)}return d}function cy(r,e=[],t=[],s="",o=!1){let l=(h,d,g=o,y)=>{let v={relativePath:y===void 0?h.path||"":y,caseSensitive:h.caseSensitive===!0,childrenIndex:d,route:h};if(v.relativePath.startsWith("/")){if(!v.relativePath.startsWith(s)&&g)return;nt(v.relativePath.startsWith(s),`Absolute route path "${v.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),v.relativePath=v.relativePath.slice(s.length)}let E=Sr([s,v.relativePath]),I=t.concat(v);h.children&&h.children.length>0&&(nt(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),cy(h.children,e,I,E,g)),!(h.path==null&&!h.index)&&e.push({path:E,score:g0(E,h.index),routesMeta:I})};return r.forEach((h,d)=>{var g;if(h.path===""||!((g=h.path)!=null&&g.includes("?")))l(h,d);else for(let y of hy(h.path))l(h,d,!0,y)}),e}function hy(r){let e=r.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let h=hy(s.join("/")),d=[];return d.push(...h.map(g=>g===""?l:[l,g].join("/"))),o&&d.push(...h),d.map(g=>r.startsWith("/")&&g===""?"/":g)}function u0(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:y0(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var c0=/^:[\w-]+$/,h0=3,f0=2,d0=1,p0=10,m0=-2,Um=r=>r==="*";function g0(r,e){let t=r.split("/"),s=t.length;return t.some(Um)&&(s+=m0),e&&(s+=f0),t.filter(o=>!Um(o)).reduce((o,l)=>o+(c0.test(l)?h0:l===""?d0:p0),s)}function y0(r,e){return r.length===e.length&&r.slice(0,-1).every((s,o)=>s===e[o])?r[r.length-1]-e[e.length-1]:0}function _0(r,e,t=!1){let{routesMeta:s}=r,o={},l="/",h=[];for(let d=0;d<s.length;++d){let g=s[d],y=d===s.length-1,v=l==="/"?e:e.slice(l.length)||"/",E=Tu({path:g.relativePath,caseSensitive:g.caseSensitive,end:y},v),I=g.route;if(!E&&y&&t&&!s[s.length-1].route.index&&(E=Tu({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},v)),!E)return null;Object.assign(o,E.params),h.push({params:o,pathname:Sr([l,E.pathname]),pathnameBase:S0(Sr([l,E.pathnameBase])),route:I}),E.pathnameBase!=="/"&&(l=Sr([l,E.pathnameBase]))}return h}function Tu(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,s]=v0(r.path,r.caseSensitive,r.end),o=e.match(t);if(!o)return null;let l=o[0],h=l.replace(/(.)\/+$/,"$1"),d=o.slice(1);return{params:s.reduce((y,{paramName:v,isOptional:E},I)=>{if(v==="*"){let W=d[I]||"";h=l.slice(0,l.length-W.length).replace(/(.)\/+$/,"$1")}const L=d[I];return E&&!L?y[v]=void 0:y[v]=(L||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:h,pattern:r}}function v0(r,e=!1,t=!0){nr(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let s=[],o="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,d,g)=>(s.push({paramName:d,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(s.push({paramName:"*"}),o+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":r!==""&&r!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function w0(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nr(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Cr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=r.charAt(t);return s&&s!=="/"?null:r.slice(t)||"/"}function E0(r,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof r=="string"?co(r):r;return{pathname:t?t.startsWith("/")?t:T0(t,e):e,search:A0(s),hash:C0(o)}}function T0(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function Vh(r,e,t,s){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function I0(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function fy(r){let e=I0(r);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function dy(r,e,t,s=!1){let o;typeof r=="string"?o=co(r):(o={...r},nt(!o.pathname||!o.pathname.includes("?"),Vh("?","pathname","search",o)),nt(!o.pathname||!o.pathname.includes("#"),Vh("#","pathname","hash",o)),nt(!o.search||!o.search.includes("#"),Vh("#","search","hash",o)));let l=r===""||o.pathname==="",h=l?"/":o.pathname,d;if(h==null)d=t;else{let E=e.length-1;if(!s&&h.startsWith("..")){let I=h.split("/");for(;I[0]==="..";)I.shift(),E-=1;o.pathname=I.join("/")}d=E>=0?e[E]:"/"}let g=E0(o,d),y=h&&h!=="/"&&h.endsWith("/"),v=(l||h===".")&&t.endsWith("/");return!g.pathname.endsWith("/")&&(y||v)&&(g.pathname+="/"),g}var Sr=r=>r.join("/").replace(/\/\/+/g,"/"),S0=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),A0=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,C0=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function R0(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var py=["POST","PUT","PATCH","DELETE"];new Set(py);var x0=["GET",...py];new Set(x0);var ho=q.createContext(null);ho.displayName="DataRouter";var ju=q.createContext(null);ju.displayName="DataRouterState";q.createContext(!1);var my=q.createContext({isTransitioning:!1});my.displayName="ViewTransition";var P0=q.createContext(new Map);P0.displayName="Fetchers";var k0=q.createContext(null);k0.displayName="Await";var ir=q.createContext(null);ir.displayName="Navigation";var Ma=q.createContext(null);Ma.displayName="Location";var sr=q.createContext({outlet:null,matches:[],isDataRoute:!1});sr.displayName="Route";var Tf=q.createContext(null);Tf.displayName="RouteError";function N0(r,{relative:e}={}){nt(Oa(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=q.useContext(ir),{hash:o,pathname:l,search:h}=Fa(r,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Sr([t,l])),s.createHref({pathname:d,search:h,hash:o})}function Oa(){return q.useContext(Ma)!=null}function ss(){return nt(Oa(),"useLocation() may be used only in the context of a <Router> component."),q.useContext(Ma).location}var gy="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yy(r){q.useContext(ir).static||q.useLayoutEffect(r)}function _y(){let{isDataRoute:r}=q.useContext(sr);return r?q0():D0()}function D0(){nt(Oa(),"useNavigate() may be used only in the context of a <Router> component.");let r=q.useContext(ho),{basename:e,navigator:t}=q.useContext(ir),{matches:s}=q.useContext(sr),{pathname:o}=ss(),l=JSON.stringify(fy(s)),h=q.useRef(!1);return yy(()=>{h.current=!0}),q.useCallback((g,y={})=>{if(nr(h.current,gy),!h.current)return;if(typeof g=="number"){t.go(g);return}let v=dy(g,JSON.parse(l),o,y.relative==="path");r==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Sr([e,v.pathname])),(y.replace?t.replace:t.push)(v,y.state,y)},[e,t,l,o,r])}q.createContext(null);function If(){let{matches:r}=q.useContext(sr),e=r[r.length-1];return e?e.params:{}}function Fa(r,{relative:e}={}){let{matches:t}=q.useContext(sr),{pathname:s}=ss(),o=JSON.stringify(fy(t));return q.useMemo(()=>dy(r,JSON.parse(o),s,e==="path"),[r,o,s,e])}function V0(r,e){return vy(r,e)}function vy(r,e,t,s,o){var ne;nt(Oa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=q.useContext(ir),{matches:h}=q.useContext(sr),d=h[h.length-1],g=d?d.params:{},y=d?d.pathname:"/",v=d?d.pathnameBase:"/",E=d&&d.route;{let Q=E&&E.path||"";wy(y,!E||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let I=ss(),L;if(e){let Q=typeof e=="string"?co(e):e;nt(v==="/"||((ne=Q.pathname)==null?void 0:ne.startsWith(v)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${v}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),L=Q}else L=I;let W=L.pathname||"/",$=W;if(v!=="/"){let Q=v.replace(/^\//,"").split("/");$="/"+W.replace(/^\//,"").split("/").slice(Q.length).join("/")}let F=uy(r,{pathname:$});nr(E||F!=null,`No routes matched location "${L.pathname}${L.search}${L.hash}" `),nr(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${L.pathname}${L.search}${L.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let J=F0(F&&F.map(Q=>Object.assign({},Q,{params:Object.assign({},g,Q.params),pathname:Sr([v,l.encodeLocation?l.encodeLocation(Q.pathname).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?v:Sr([v,l.encodeLocation?l.encodeLocation(Q.pathnameBase).pathname:Q.pathnameBase])})),h,t,s,o);return e&&J?q.createElement(Ma.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...L},navigationType:"POP"}},J):J}function L0(){let r=$0(),e=R0(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",r),h=q.createElement(q.Fragment,null,q.createElement("p",null," Hey developer "),q.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",q.createElement("code",{style:l},"ErrorBoundary")," or"," ",q.createElement("code",{style:l},"errorElement")," prop on your route.")),q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},e),t?q.createElement("pre",{style:o},t):null,h)}var b0=q.createElement(L0,null),M0=class extends q.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?q.createElement(sr.Provider,{value:this.props.routeContext},q.createElement(Tf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function O0({routeContext:r,match:e,children:t}){let s=q.useContext(ho);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),q.createElement(sr.Provider,{value:r},t)}function F0(r,e=[],t=null,s=null,o=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,h=t==null?void 0:t.errors;if(h!=null){let y=l.findIndex(v=>v.route.id&&(h==null?void 0:h[v.route.id])!==void 0);nt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let d=!1,g=-1;if(t)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=y),v.route.id){let{loaderData:E,errors:I}=t,L=v.route.loader&&!E.hasOwnProperty(v.route.id)&&(!I||I[v.route.id]===void 0);if(v.route.lazy||L){d=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}return l.reduceRight((y,v,E)=>{let I,L=!1,W=null,$=null;t&&(I=h&&v.route.id?h[v.route.id]:void 0,W=v.route.errorElement||b0,d&&(g<0&&E===0?(wy("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),L=!0,$=null):g===E&&(L=!0,$=v.route.hydrateFallbackElement||null)));let F=e.concat(l.slice(0,E+1)),J=()=>{let ne;return I?ne=W:L?ne=$:v.route.Component?ne=q.createElement(v.route.Component,null):v.route.element?ne=v.route.element:ne=y,q.createElement(O0,{match:v,routeContext:{outlet:y,matches:F,isDataRoute:t!=null},children:ne})};return t&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?q.createElement(M0,{location:t.location,revalidation:t.revalidation,component:W,error:I,children:J(),routeContext:{outlet:null,matches:F,isDataRoute:!0},unstable_onError:s}):J()},null)}function Sf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function j0(r){let e=q.useContext(ho);return nt(e,Sf(r)),e}function U0(r){let e=q.useContext(ju);return nt(e,Sf(r)),e}function B0(r){let e=q.useContext(sr);return nt(e,Sf(r)),e}function Af(r){let e=B0(r),t=e.matches[e.matches.length-1];return nt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function z0(){return Af("useRouteId")}function $0(){var s;let r=q.useContext(Tf),e=U0("useRouteError"),t=Af("useRouteError");return r!==void 0?r:(s=e.errors)==null?void 0:s[t]}function q0(){let{router:r}=j0("useNavigate"),e=Af("useNavigate"),t=q.useRef(!1);return yy(()=>{t.current=!0}),q.useCallback(async(o,l={})=>{nr(t.current,gy),t.current&&(typeof o=="number"?r.navigate(o):await r.navigate(o,{fromRouteId:e,...l}))},[r,e])}var Bm={};function wy(r,e,t){!e&&!Bm[r]&&(Bm[r]=!0,nr(!1,t))}q.memo(H0);function H0({routes:r,future:e,state:t,unstable_onError:s}){return vy(r,void 0,t,s,e)}function Qh(r){nt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function W0({basename:r="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:l=!1}){nt(!Oa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=r.replace(/^\/*/,"/"),d=q.useMemo(()=>({basename:h,navigator:o,static:l,future:{}}),[h,o,l]);typeof t=="string"&&(t=co(t));let{pathname:g="/",search:y="",hash:v="",state:E=null,key:I="default"}=t,L=q.useMemo(()=>{let W=Cr(g,h);return W==null?null:{location:{pathname:W,search:y,hash:v,state:E,key:I},navigationType:s}},[h,g,y,v,E,I,s]);return nr(L!=null,`<Router basename="${h}"> is not able to match the URL "${g}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),L==null?null:q.createElement(ir.Provider,{value:d},q.createElement(Ma.Provider,{children:e,value:L}))}function G0({children:r,location:e}){return V0(Kh(r),e)}function Kh(r,e=[]){let t=[];return q.Children.forEach(r,(s,o)=>{if(!q.isValidElement(s))return;let l=[...e,o];if(s.type===q.Fragment){t.push.apply(t,Kh(s.props.children,l));return}nt(s.type===Qh,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),nt(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=Kh(s.props.children,l)),t.push(h)}),t}var pu="get",mu="application/x-www-form-urlencoded";function Uu(r){return r!=null&&typeof r.tagName=="string"}function Q0(r){return Uu(r)&&r.tagName.toLowerCase()==="button"}function K0(r){return Uu(r)&&r.tagName.toLowerCase()==="form"}function Y0(r){return Uu(r)&&r.tagName.toLowerCase()==="input"}function X0(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function J0(r,e){return r.button===0&&(!e||e==="_self")&&!X0(r)}var lu=null;function Z0(){if(lu===null)try{new FormData(document.createElement("form"),0),lu=!1}catch{lu=!0}return lu}var eE=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Lh(r){return r!=null&&!eE.has(r)?(nr(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${mu}"`),null):r}function tE(r,e){let t,s,o,l,h;if(K0(r)){let d=r.getAttribute("action");s=d?Cr(d,e):null,t=r.getAttribute("method")||pu,o=Lh(r.getAttribute("enctype"))||mu,l=new FormData(r)}else if(Q0(r)||Y0(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=r.getAttribute("formaction")||d.getAttribute("action");if(s=g?Cr(g,e):null,t=r.getAttribute("formmethod")||d.getAttribute("method")||pu,o=Lh(r.getAttribute("formenctype"))||Lh(d.getAttribute("enctype"))||mu,l=new FormData(d,r),!Z0()){let{name:y,type:v,value:E}=r;if(v==="image"){let I=y?`${y}.`:"";l.append(`${I}x`,"0"),l.append(`${I}y`,"0")}else y&&l.append(y,E)}}else{if(Uu(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=pu,s=null,o=mu,h=r}return l&&o==="text/plain"&&(h=l,l=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:l,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Cf(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function nE(r,e,t){let s=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&Cr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function rE(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function iE(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function sE(r,e,t){let s=await Promise.all(r.map(async o=>{let l=e.routes[o.route.id];if(l){let h=await rE(l,t);return h.links?h.links():[]}return[]}));return uE(s.flat(1).filter(iE).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function zm(r,e,t,s,o,l){let h=(g,y)=>t[y]?g.route.id!==t[y].route.id:!0,d=(g,y)=>{var v;return t[y].pathname!==g.pathname||((v=t[y].route.path)==null?void 0:v.endsWith("*"))&&t[y].params["*"]!==g.params["*"]};return l==="assets"?e.filter((g,y)=>h(g,y)||d(g,y)):l==="data"?e.filter((g,y)=>{var E;let v=s.routes[g.route.id];if(!v||!v.hasLoader)return!1;if(h(g,y)||d(g,y))return!0;if(g.route.shouldRevalidate){let I=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(r,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof I=="boolean")return I}return!0}):[]}function oE(r,e,{includeHydrateFallback:t}={}){return aE(r.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function aE(r){return[...new Set(r)]}function lE(r){let e={},t=Object.keys(r).sort();for(let s of t)e[s]=r[s];return e}function uE(r,e){let t=new Set;return new Set(e),r.reduce((s,o)=>{let l=JSON.stringify(lE(o));return t.has(l)||(t.add(l),s.push({key:l,link:o})),s},[])}function Ey(){let r=q.useContext(ho);return Cf(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function cE(){let r=q.useContext(ju);return Cf(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Rf=q.createContext(void 0);Rf.displayName="FrameworkContext";function Ty(){let r=q.useContext(Rf);return Cf(r,"You must render this element inside a <HydratedRouter> element"),r}function hE(r,e){let t=q.useContext(Rf),[s,o]=q.useState(!1),[l,h]=q.useState(!1),{onFocus:d,onBlur:g,onMouseEnter:y,onMouseLeave:v,onTouchStart:E}=e,I=q.useRef(null);q.useEffect(()=>{if(r==="render"&&h(!0),r==="viewport"){let $=J=>{J.forEach(ne=>{h(ne.isIntersecting)})},F=new IntersectionObserver($,{threshold:.5});return I.current&&F.observe(I.current),()=>{F.disconnect()}}},[r]),q.useEffect(()=>{if(s){let $=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout($)}}},[s]);let L=()=>{o(!0)},W=()=>{o(!1),h(!1)};return t?r!=="intent"?[l,I,{}]:[l,I,{onFocus:pa(d,L),onBlur:pa(g,W),onMouseEnter:pa(y,L),onMouseLeave:pa(v,W),onTouchStart:pa(E,L)}]:[!1,I,{}]}function pa(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function fE({page:r,...e}){let{router:t}=Ey(),s=q.useMemo(()=>uy(t.routes,r,t.basename),[t.routes,r,t.basename]);return s?q.createElement(pE,{page:r,matches:s,...e}):null}function dE(r){let{manifest:e,routeModules:t}=Ty(),[s,o]=q.useState([]);return q.useEffect(()=>{let l=!1;return sE(r,e,t).then(h=>{l||o(h)}),()=>{l=!0}},[r,e,t]),s}function pE({page:r,matches:e,...t}){let s=ss(),{manifest:o,routeModules:l}=Ty(),{basename:h}=Ey(),{loaderData:d,matches:g}=cE(),y=q.useMemo(()=>zm(r,e,g,o,s,"data"),[r,e,g,o,s]),v=q.useMemo(()=>zm(r,e,g,o,s,"assets"),[r,e,g,o,s]),E=q.useMemo(()=>{if(r===s.pathname+s.search+s.hash)return[];let W=new Set,$=!1;if(e.forEach(J=>{var Q;let ne=o.routes[J.route.id];!ne||!ne.hasLoader||(!y.some(oe=>oe.route.id===J.route.id)&&J.route.id in d&&((Q=l[J.route.id])!=null&&Q.shouldRevalidate)||ne.hasClientLoader?$=!0:W.add(J.route.id))}),W.size===0)return[];let F=nE(r,h,"data");return $&&W.size>0&&F.searchParams.set("_routes",e.filter(J=>W.has(J.route.id)).map(J=>J.route.id).join(",")),[F.pathname+F.search]},[h,d,s,o,y,e,r,l]),I=q.useMemo(()=>oE(v,o),[v,o]),L=dE(v);return q.createElement(q.Fragment,null,E.map(W=>q.createElement("link",{key:W,rel:"prefetch",as:"fetch",href:W,...t})),I.map(W=>q.createElement("link",{key:W,rel:"modulepreload",href:W,...t})),L.map(({key:W,link:$})=>q.createElement("link",{key:W,nonce:t.nonce,...$})))}function mE(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Iy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Iy&&(window.__reactRouterVersion="7.8.2")}catch{}function gE({basename:r,children:e,window:t}){let s=q.useRef();s.current==null&&(s.current=i0({window:t,v5Compat:!0}));let o=s.current,[l,h]=q.useState({action:o.action,location:o.location}),d=q.useCallback(g=>{q.startTransition(()=>h(g))},[h]);return q.useLayoutEffect(()=>o.listen(d),[o,d]),q.createElement(W0,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:o})}var Sy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ay=q.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:l,replace:h,state:d,target:g,to:y,preventScrollReset:v,viewTransition:E,...I},L){let{basename:W}=q.useContext(ir),$=typeof y=="string"&&Sy.test(y),F,J=!1;if(typeof y=="string"&&$&&(F=y,Iy))try{let C=new URL(window.location.href),D=y.startsWith("//")?new URL(C.protocol+y):new URL(y),k=Cr(D.pathname,W);D.origin===C.origin&&k!=null?y=k+D.search+D.hash:J=!0}catch{nr(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let ne=N0(y,{relative:o}),[Q,oe,ge]=hE(s,I),ye=wE(y,{replace:h,state:d,target:g,preventScrollReset:v,relative:o,viewTransition:E});function x(C){e&&e(C),C.defaultPrevented||ye(C)}let S=q.createElement("a",{...I,...ge,href:F||ne,onClick:J||l?e:x,ref:mE(L,oe),target:g,"data-discover":!$&&t==="render"?"true":void 0});return Q&&!$?q.createElement(q.Fragment,null,S,q.createElement(fE,{page:ne})):S});Ay.displayName="Link";var yE=q.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:l,to:h,viewTransition:d,children:g,...y},v){let E=Fa(h,{relative:y.relative}),I=ss(),L=q.useContext(ju),{navigator:W,basename:$}=q.useContext(ir),F=L!=null&&AE(E)&&d===!0,J=W.encodeLocation?W.encodeLocation(E).pathname:E.pathname,ne=I.pathname,Q=L&&L.navigation&&L.navigation.location?L.navigation.location.pathname:null;t||(ne=ne.toLowerCase(),Q=Q?Q.toLowerCase():null,J=J.toLowerCase()),Q&&$&&(Q=Cr(Q,$)||Q);const oe=J!=="/"&&J.endsWith("/")?J.length-1:J.length;let ge=ne===J||!o&&ne.startsWith(J)&&ne.charAt(oe)==="/",ye=Q!=null&&(Q===J||!o&&Q.startsWith(J)&&Q.charAt(J.length)==="/"),x={isActive:ge,isPending:ye,isTransitioning:F},S=ge?e:void 0,C;typeof s=="function"?C=s(x):C=[s,ge?"active":null,ye?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let D=typeof l=="function"?l(x):l;return q.createElement(Ay,{...y,"aria-current":S,className:C,ref:v,style:D,to:h,viewTransition:d},typeof g=="function"?g(x):g)});yE.displayName="NavLink";var _E=q.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:l,method:h=pu,action:d,onSubmit:g,relative:y,preventScrollReset:v,viewTransition:E,...I},L)=>{let W=IE(),$=SE(d,{relative:y}),F=h.toLowerCase()==="get"?"get":"post",J=typeof d=="string"&&Sy.test(d),ne=Q=>{if(g&&g(Q),Q.defaultPrevented)return;Q.preventDefault();let oe=Q.nativeEvent.submitter,ge=(oe==null?void 0:oe.getAttribute("formmethod"))||h;W(oe||Q.currentTarget,{fetcherKey:e,method:ge,navigate:t,replace:o,state:l,relative:y,preventScrollReset:v,viewTransition:E})};return q.createElement("form",{ref:L,method:F,action:$,onSubmit:s?g:ne,...I,"data-discover":!J&&r==="render"?"true":void 0})});_E.displayName="Form";function vE(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Cy(r){let e=q.useContext(ho);return nt(e,vE(r)),e}function wE(r,{target:e,replace:t,state:s,preventScrollReset:o,relative:l,viewTransition:h}={}){let d=_y(),g=ss(),y=Fa(r,{relative:l});return q.useCallback(v=>{if(J0(v,e)){v.preventDefault();let E=t!==void 0?t:Aa(g)===Aa(y);d(r,{replace:E,state:s,preventScrollReset:o,relative:l,viewTransition:h})}},[g,d,y,t,s,e,r,o,l,h])}var EE=0,TE=()=>`__${String(++EE)}__`;function IE(){let{router:r}=Cy("useSubmit"),{basename:e}=q.useContext(ir),t=z0();return q.useCallback(async(s,o={})=>{let{action:l,method:h,encType:d,formData:g,body:y}=tE(s,e);if(o.navigate===!1){let v=o.fetcherKey||TE();await r.fetch(v,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||d,flushSync:o.flushSync})}else await r.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:g,body:y,formMethod:o.method||h,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[r,e,t])}function SE(r,{relative:e}={}){let{basename:t}=q.useContext(ir),s=q.useContext(sr);nt(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...Fa(r||".",{relative:e})},h=ss();if(r==null){l.search=h.search;let d=new URLSearchParams(l.search),g=d.getAll("index");if(g.some(v=>v==="")){d.delete("index"),g.filter(E=>E).forEach(E=>d.append("index",E));let v=d.toString();l.search=v?`?${v}`:""}}return(!r||r===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Sr([t,l.pathname])),Aa(l)}function AE(r,{relative:e}={}){let t=q.useContext(my);nt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=Cy("useViewTransitionState"),o=Fa(r,{relative:e});if(!t.isTransitioning)return!1;let l=Cr(t.currentLocation.pathname,s)||t.currentLocation.pathname,h=Cr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Tu(o.pathname,h)!=null||Tu(o.pathname,l)!=null}const CE=()=>U.jsx("div",{className:"w-5 h-5 border-4 border-t-emerald-600 border-gray-300 rounded-full animate-spin"}),RE=({loading:r,onSubmit:e,days:t,sessions:s,setIsModalOpen:o,addMode:l})=>{const h={line:"",day:t[0],session:s[0],password:""},[d,g]=q.useState(h),y=async L=>{L.preventDefault(),await e(d),o(!1),g(h)},v=()=>{o(!1),g(h)};let E="",I=null;return l==="line"?(E="Add Line",I=U.jsxs(U.Fragment,{children:[U.jsx("input",{type:"text",placeholder:"Line name",value:d.line,onChange:L=>g({...d,line:L.target.value}),className:"outline-none border rounded-lg p-2 focus:ring-2 focus:ring-emerald-500",required:!0}),U.jsx("input",{type:"password",placeholder:"Set password",value:d.password,onChange:L=>g({...d,password:L.target.value}),className:"outline-none border rounded-lg p-2 focus:ring-2 focus:ring-emerald-500 mt-2",required:!0})]})):l==="day"?(E="Add Day",I=U.jsx("select",{value:d.day,onChange:L=>g({...d,day:L.target.value}),className:"outline-none border rounded-lg p-2 focus:ring-2 focus:ring-emerald-500",children:t.map(L=>U.jsx("option",{value:L,children:L},L))})):l==="session"&&(E="Add Session",I=U.jsx("select",{value:d.session,onChange:L=>g({...d,session:L.target.value}),className:"outline-none border rounded-lg p-2 focus:ring-2 focus:ring-emerald-500",children:s.map(L=>U.jsx("option",{value:L,children:L},L))})),U.jsx("div",{className:"fixed inset-0 bg-transparent bg-opacity-40 flex items-center justify-center z-50",children:U.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 w-full max-w-md",children:[U.jsx("h2",{className:"text-xl font-bold text-emerald-700 mb-4",children:E}),U.jsxs("form",{onSubmit:y,className:"flex flex-col gap-4",children:[I,U.jsxs("div",{className:"flex justify-between gap-3 mt-4",children:[U.jsx("button",{type:"button",onClick:v,className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cancel"}),U.jsx("button",{type:"submit",disabled:l==="line"&&(!d.line||!d.password)||l==="day"&&!d.day||l==="session"&&!d.session||r,className:"px-4 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-50",children:r?U.jsx(CE,{}):"Add"})]})]})]})})},Ry=()=>U.jsx("div",{className:"flex-col gap-4 w-full flex items-center justify-center",children:U.jsx("div",{className:"w-20 h-20 border-4 border-transparent text-blue-400 text-4xl animate-spin flex items-center justify-center border-t-blue-400 rounded-full",children:U.jsx("div",{className:"w-16 h-16 border-4 border-transparent text-red-400 text-2xl animate-spin flex items-center justify-center border-t-red-400 rounded-full"})})}),xE=()=>{};var $m={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=function(r){const e=[];let t=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},PE=function(r){const e=[];let t=0,s=0;for(;t<r.length;){const o=r[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=r[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=r[t++],h=r[t++],d=r[t++],g=((o&7)<<18|(l&63)<<12|(h&63)<<6|d&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const l=r[t++],h=r[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|h&63)}}return e.join("")},Py={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const l=r[o],h=o+1<r.length,d=h?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,v=l>>2,E=(l&3)<<4|d>>4;let I=(d&15)<<2|y>>6,L=y&63;g||(L=64,h||(I=64)),s.push(t[v],t[E],t[I],t[L])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(xy(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):PE(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const l=t[r.charAt(o++)],d=o<r.length?t[r.charAt(o)]:0;++o;const y=o<r.length?t[r.charAt(o)]:64;++o;const E=o<r.length?t[r.charAt(o)]:64;if(++o,l==null||d==null||y==null||E==null)throw new kE;const I=l<<2|d>>4;if(s.push(I),y!==64){const L=d<<4&240|y>>2;if(s.push(L),E!==64){const W=y<<6&192|E;s.push(W)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class kE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const NE=function(r){const e=xy(r);return Py.encodeByteArray(e,!0)},Iu=function(r){return NE(r).replace(/\./g,"")},DE=function(r){try{return Py.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=()=>VE().__FIREBASE_DEFAULTS__,bE=()=>{if(typeof process>"u"||typeof $m>"u")return;const r=$m.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},ME=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&DE(r[1]);return e&&JSON.parse(e)},xf=()=>{try{return xE()||LE()||bE()||ME()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},OE=r=>{var e,t;return(t=(e=xf())==null?void 0:e.emulatorHosts)==null?void 0:t[r]},FE=r=>{const e=OE(r);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},ky=()=>{var r;return(r=xf())==null?void 0:r.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function UE(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BE(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,l=r.sub||r.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Iu(JSON.stringify(t)),Iu(JSON.stringify(h)),""].join(".")}const va={};function zE(){const r={prod:[],emulator:[]};for(const e of Object.keys(va))va[e]?r.emulator.push(e):r.prod.push(e);return r}function $E(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let qm=!1;function qE(r,e){if(typeof window>"u"||typeof document>"u"||!Pf(window.location.host)||va[r]===e||va[r]||qm)return;va[r]=e;function t(I){return`__firebase__banner__${I}`}const s="__firebase__banner",l=zE().prod.length>0;function h(){const I=document.getElementById(s);I&&I.remove()}function d(I){I.style.display="flex",I.style.background="#7faaf0",I.style.position="fixed",I.style.bottom="5px",I.style.left="5px",I.style.padding=".5em",I.style.borderRadius="5px",I.style.alignItems="center"}function g(I,L){I.setAttribute("width","24"),I.setAttribute("id",L),I.setAttribute("height","24"),I.setAttribute("viewBox","0 0 24 24"),I.setAttribute("fill","none"),I.style.marginLeft="-6px"}function y(){const I=document.createElement("span");return I.style.cursor="pointer",I.style.marginLeft="16px",I.style.fontSize="24px",I.innerHTML=" &times;",I.onclick=()=>{qm=!0,h()},I}function v(I,L){I.setAttribute("id",L),I.innerText="Learn more",I.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",I.setAttribute("target","__blank"),I.style.paddingLeft="5px",I.style.textDecoration="underline"}function E(){const I=$E(s),L=t("text"),W=document.getElementById(L)||document.createElement("span"),$=t("learnmore"),F=document.getElementById($)||document.createElement("a"),J=t("preprendIcon"),ne=document.getElementById(J)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(I.created){const Q=I.element;d(Q),v(F,$);const oe=y();g(ne,J),Q.append(ne,W,F,oe),document.body.appendChild(Q)}l?(W.innerText="Preview backend disconnected.",ne.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ne.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",L)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function WE(){var e;const r=(e=xf())==null?void 0:e.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GE(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function QE(){return!WE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ny(){try{return typeof indexedDB=="object"}catch{return!1}}function Dy(){return new Promise((r,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{var l;e(((l=o.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}function KE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YE="FirebaseError";class wi extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=YE,Object.setPrototypeOf(this,wi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bu.prototype.create)}}class Bu{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],h=l?XE(l,s):"Error",d=`${this.serviceName}: ${h} (${o}).`;return new wi(o,d,s)}}function XE(r,e){return r.replace(JE,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const JE=/\{\$([^}]+)}/g;function Ca(r,e){if(r===e)return!0;const t=Object.keys(r),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=r[o],h=e[o];if(Hm(l)&&Hm(h)){if(!Ca(l,h))return!1}else if(l!==h)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Hm(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=1e3,eT=2,tT=14400*1e3,nT=.5;function Wm(r,e=ZE,t=eT){const s=e*Math.pow(t,r),o=Math.round(nT*s*(Math.random()-.5)*2);return Math.min(tT,s+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(r){return r&&r._delegate?r._delegate:r}class Rr{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new jE;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(sT(e))try{this.getOrInitializeService({instanceIdentifier:Yi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Yi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Yi){return this.instances.has(e)}getOptions(e=Yi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,h]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);s===d&&h.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:iT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Yi){return this.component?this.component.multipleInstances?e:Yi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function iT(r){return r===Yi?void 0:r}function sT(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new rT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Fe||(Fe={}));const aT={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},lT=Fe.INFO,uT={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},cT=(r,e,...t)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=uT[e];if(o)console[o](`[${s}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kf{constructor(e){this.name=e,this._logLevel=lT,this._logHandler=cT,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?aT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const hT=(r,e)=>e.some(t=>r instanceof t);let Gm,Qm;function fT(){return Gm||(Gm=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dT(){return Qm||(Qm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vy=new WeakMap,Yh=new WeakMap,Ly=new WeakMap,bh=new WeakMap,Nf=new WeakMap;function pT(r){const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("success",l),r.removeEventListener("error",h)},l=()=>{t(ui(r.result)),o()},h=()=>{s(r.error),o()};r.addEventListener("success",l),r.addEventListener("error",h)});return e.then(t=>{t instanceof IDBCursor&&Vy.set(t,r)}).catch(()=>{}),Nf.set(e,r),e}function mT(r){if(Yh.has(r))return;const e=new Promise((t,s)=>{const o=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",h),r.removeEventListener("abort",h)},l=()=>{t(),o()},h=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",l),r.addEventListener("error",h),r.addEventListener("abort",h)});Yh.set(r,e)}let Xh={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Yh.get(r);if(e==="objectStoreNames")return r.objectStoreNames||Ly.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ui(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function gT(r){Xh=r(Xh)}function yT(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=r.call(Mh(this),e,...t);return Ly.set(s,e.sort?e.sort():[e]),ui(s)}:dT().includes(r)?function(...e){return r.apply(Mh(this),e),ui(Vy.get(this))}:function(...e){return ui(r.apply(Mh(this),e))}}function _T(r){return typeof r=="function"?yT(r):(r instanceof IDBTransaction&&mT(r),hT(r,fT())?new Proxy(r,Xh):r)}function ui(r){if(r instanceof IDBRequest)return pT(r);if(bh.has(r))return bh.get(r);const e=_T(r);return e!==r&&(bh.set(r,e),Nf.set(e,r)),e}const Mh=r=>Nf.get(r);function by(r,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const h=indexedDB.open(r,e),d=ui(h);return s&&h.addEventListener("upgradeneeded",g=>{s(ui(h.result),g.oldVersion,g.newVersion,ui(h.transaction),g)}),t&&h.addEventListener("blocked",g=>t(g.oldVersion,g.newVersion,g)),d.then(g=>{l&&g.addEventListener("close",()=>l()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),d}const vT=["get","getKey","getAll","getAllKeys","count"],wT=["put","add","delete","clear"],Oh=new Map;function Km(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Oh.get(e))return Oh.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=wT.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||vT.includes(t)))return;const l=async function(h,...d){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(d.shift())),(await Promise.all([y[t](...d),o&&g.done]))[0]};return Oh.set(e,l),l}gT(r=>({...r,get:(e,t,s)=>Km(e,t)||r.get(e,t,s),has:(e,t)=>!!Km(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(TT(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function TT(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Jh="@firebase/app",Ym="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xr=new kf("@firebase/app"),IT="@firebase/app-compat",ST="@firebase/analytics-compat",AT="@firebase/analytics",CT="@firebase/app-check-compat",RT="@firebase/app-check",xT="@firebase/auth",PT="@firebase/auth-compat",kT="@firebase/database",NT="@firebase/data-connect",DT="@firebase/database-compat",VT="@firebase/functions",LT="@firebase/functions-compat",bT="@firebase/installations",MT="@firebase/installations-compat",OT="@firebase/messaging",FT="@firebase/messaging-compat",jT="@firebase/performance",UT="@firebase/performance-compat",BT="@firebase/remote-config",zT="@firebase/remote-config-compat",$T="@firebase/storage",qT="@firebase/storage-compat",HT="@firebase/firestore",WT="@firebase/ai",GT="@firebase/firestore-compat",QT="firebase",KT="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zh="[DEFAULT]",YT={[Jh]:"fire-core",[IT]:"fire-core-compat",[AT]:"fire-analytics",[ST]:"fire-analytics-compat",[RT]:"fire-app-check",[CT]:"fire-app-check-compat",[xT]:"fire-auth",[PT]:"fire-auth-compat",[kT]:"fire-rtdb",[NT]:"fire-data-connect",[DT]:"fire-rtdb-compat",[VT]:"fire-fn",[LT]:"fire-fn-compat",[bT]:"fire-iid",[MT]:"fire-iid-compat",[OT]:"fire-fcm",[FT]:"fire-fcm-compat",[jT]:"fire-perf",[UT]:"fire-perf-compat",[BT]:"fire-rc",[zT]:"fire-rc-compat",[$T]:"fire-gcs",[qT]:"fire-gcs-compat",[HT]:"fire-fst",[GT]:"fire-fst-compat",[WT]:"fire-vertex","fire-js":"fire-js",[QT]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su=new Map,XT=new Map,ef=new Map;function Xm(r,e){try{r.container.addComponent(e)}catch(t){xr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function di(r){const e=r.name;if(ef.has(e))return xr.debug(`There were multiple attempts to register component ${e}.`),!1;ef.set(e,r);for(const t of Su.values())Xm(t,r);for(const t of XT.values())Xm(t,r);return!0}function ja(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function JT(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ci=new Bu("app","Firebase",ZT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Rr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ci.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t1=KT;function My(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const s={name:Zh,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw ci.create("bad-app-name",{appName:String(o)});if(t||(t=ky()),!t)throw ci.create("no-options");const l=Su.get(o);if(l){if(Ca(t,l.options)&&Ca(s,l.config))return l;throw ci.create("duplicate-app",{appName:o})}const h=new oT(o);for(const g of ef.values())h.addComponent(g);const d=new e1(t,s,h);return Su.set(o,d),d}function Oy(r=Zh){const e=Su.get(r);if(!e&&r===Zh&&ky())return My();if(!e)throw ci.create("no-app",{appName:r});return e}function Xn(r,e,t){let s=YT[r]??r;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xr.warn(h.join(" "));return}di(new Rr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n1="firebase-heartbeat-database",r1=1,Ra="firebase-heartbeat-store";let Fh=null;function Fy(){return Fh||(Fh=by(n1,r1,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Ra)}catch(t){console.warn(t)}}}}).catch(r=>{throw ci.create("idb-open",{originalErrorMessage:r.message})})),Fh}async function i1(r){try{const t=(await Fy()).transaction(Ra),s=await t.objectStore(Ra).get(jy(r));return await t.done,s}catch(e){if(e instanceof wi)xr.warn(e.message);else{const t=ci.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xr.warn(t.message)}}}async function Jm(r,e){try{const s=(await Fy()).transaction(Ra,"readwrite");await s.objectStore(Ra).put(e,jy(r)),await s.done}catch(t){if(t instanceof wi)xr.warn(t.message);else{const s=ci.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});xr.warn(s.message)}}}function jy(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s1=1024,o1=30;class a1{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new u1(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,t;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Zm();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:o}),this._heartbeatsCache.heartbeats.length>o1){const h=c1(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){xr.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Zm(),{heartbeatsToSend:s,unsentEntries:o}=l1(this._heartbeatsCache.heartbeats),l=Iu(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=t,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return xr.warn(t),""}}}function Zm(){return new Date().toISOString().substring(0,10)}function l1(r,e=s1){const t=[];let s=r.slice();for(const o of r){const l=t.find(h=>h.agent===o.agent);if(l){if(l.dates.push(o.date),eg(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),eg(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class u1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ny()?Dy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await i1(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Jm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Jm(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function eg(r){return Iu(JSON.stringify({version:2,heartbeats:r})).length}function c1(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let s=1;s<r.length;s++)r[s].date<t&&(t=r[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h1(r){di(new Rr("platform-logger",e=>new ET(e),"PRIVATE")),di(new Rr("heartbeat",e=>new a1(e),"PRIVATE")),Xn(Jh,Ym,r),Xn(Jh,Ym,"esm2020"),Xn("fire-js","")}h1("");var f1="firebase",d1="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xn(f1,d1,"app");const Uy="@firebase/installations",Df="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By=1e4,zy=`w:${Df}`,$y="FIS_v2",p1="https://firebaseinstallations.googleapis.com/v1",m1=3600*1e3,g1="installations",y1="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _1={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},es=new Bu(g1,y1,_1);function qy(r){return r instanceof wi&&r.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy({projectId:r}){return`${p1}/projects/${r}/installations`}function Wy(r){return{token:r.token,requestStatus:2,expiresIn:w1(r.expiresIn),creationTime:Date.now()}}async function Gy(r,e){const s=(await e.json()).error;return es.create("request-failed",{requestName:r,serverCode:s.code,serverMessage:s.message,serverStatus:s.status})}function Qy({apiKey:r}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":r})}function v1(r,{refreshToken:e}){const t=Qy(r);return t.append("Authorization",E1(e)),t}async function Ky(r){const e=await r();return e.status>=500&&e.status<600?r():e}function w1(r){return Number(r.replace("s","000"))}function E1(r){return`${$y} ${r}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1({appConfig:r,heartbeatServiceProvider:e},{fid:t}){const s=Hy(r),o=Qy(r),l=e.getImmediate({optional:!0});if(l){const y=await l.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const h={fid:t,authVersion:$y,appId:r.appId,sdkVersion:zy},d={method:"POST",headers:o,body:JSON.stringify(h)},g=await Ky(()=>fetch(s,d));if(g.ok){const y=await g.json();return{fid:y.fid||t,registrationStatus:2,refreshToken:y.refreshToken,authToken:Wy(y.authToken)}}else throw await Gy("Create Installation",g)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(r){return new Promise(e=>{setTimeout(e,r)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(r){return btoa(String.fromCharCode(...r)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1=/^[cdef][\w-]{21}$/,tf="";function A1(){try{const r=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(r),r[0]=112+r[0]%16;const t=C1(r);return S1.test(t)?t:tf}catch{return tf}}function C1(r){return I1(r).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(r){return`${r.appName}!${r.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy=new Map;function Jy(r,e){const t=zu(r);Zy(t,e),R1(t,e)}function Zy(r,e){const t=Xy.get(r);if(t)for(const s of t)s(e)}function R1(r,e){const t=x1();t&&t.postMessage({key:r,fid:e}),P1()}let Xi=null;function x1(){return!Xi&&"BroadcastChannel"in self&&(Xi=new BroadcastChannel("[Firebase] FID Change"),Xi.onmessage=r=>{Zy(r.data.key,r.data.fid)}),Xi}function P1(){Xy.size===0&&Xi&&(Xi.close(),Xi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="firebase-installations-database",N1=1,ts="firebase-installations-store";let jh=null;function Vf(){return jh||(jh=by(k1,N1,{upgrade:(r,e)=>{switch(e){case 0:r.createObjectStore(ts)}}})),jh}async function Au(r,e){const t=zu(r),o=(await Vf()).transaction(ts,"readwrite"),l=o.objectStore(ts),h=await l.get(t);return await l.put(e,t),await o.done,(!h||h.fid!==e.fid)&&Jy(r,e.fid),e}async function e_(r){const e=zu(r),s=(await Vf()).transaction(ts,"readwrite");await s.objectStore(ts).delete(e),await s.done}async function $u(r,e){const t=zu(r),o=(await Vf()).transaction(ts,"readwrite"),l=o.objectStore(ts),h=await l.get(t),d=e(h);return d===void 0?await l.delete(t):await l.put(d,t),await o.done,d&&(!h||h.fid!==d.fid)&&Jy(r,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lf(r){let e;const t=await $u(r.appConfig,s=>{const o=D1(s),l=V1(r,o);return e=l.registrationPromise,l.installationEntry});return t.fid===tf?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function D1(r){const e=r||{fid:A1(),registrationStatus:0};return t_(e)}function V1(r,e){if(e.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(es.create("app-offline"));return{installationEntry:e,registrationPromise:o}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},s=L1(r,t);return{installationEntry:t,registrationPromise:s}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:b1(r)}:{installationEntry:e}}async function L1(r,e){try{const t=await T1(r,e);return Au(r.appConfig,t)}catch(t){throw qy(t)&&t.customData.serverCode===409?await e_(r.appConfig):await Au(r.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function b1(r){let e=await tg(r.appConfig);for(;e.registrationStatus===1;)await Yy(100),e=await tg(r.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:s}=await Lf(r);return s||t}return e}function tg(r){return $u(r,e=>{if(!e)throw es.create("installation-not-found");return t_(e)})}function t_(r){return M1(r)?{fid:r.fid,registrationStatus:0}:r}function M1(r){return r.registrationStatus===1&&r.registrationTime+By<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O1({appConfig:r,heartbeatServiceProvider:e},t){const s=F1(r,t),o=v1(r,t),l=e.getImmediate({optional:!0});if(l){const y=await l.getHeartbeatsHeader();y&&o.append("x-firebase-client",y)}const h={installation:{sdkVersion:zy,appId:r.appId}},d={method:"POST",headers:o,body:JSON.stringify(h)},g=await Ky(()=>fetch(s,d));if(g.ok){const y=await g.json();return Wy(y)}else throw await Gy("Generate Auth Token",g)}function F1(r,{fid:e}){return`${Hy(r)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bf(r,e=!1){let t;const s=await $u(r.appConfig,l=>{if(!n_(l))throw es.create("not-registered");const h=l.authToken;if(!e&&B1(h))return l;if(h.requestStatus===1)return t=j1(r,e),l;{if(!navigator.onLine)throw es.create("app-offline");const d=$1(l);return t=U1(r,d),d}});return t?await t:s.authToken}async function j1(r,e){let t=await ng(r.appConfig);for(;t.authToken.requestStatus===1;)await Yy(100),t=await ng(r.appConfig);const s=t.authToken;return s.requestStatus===0?bf(r,e):s}function ng(r){return $u(r,e=>{if(!n_(e))throw es.create("not-registered");const t=e.authToken;return q1(t)?{...e,authToken:{requestStatus:0}}:e})}async function U1(r,e){try{const t=await O1(r,e),s={...e,authToken:t};return await Au(r.appConfig,s),t}catch(t){if(qy(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await e_(r.appConfig);else{const s={...e,authToken:{requestStatus:0}};await Au(r.appConfig,s)}throw t}}function n_(r){return r!==void 0&&r.registrationStatus===2}function B1(r){return r.requestStatus===2&&!z1(r)}function z1(r){const e=Date.now();return e<r.creationTime||r.creationTime+r.expiresIn<e+m1}function $1(r){const e={requestStatus:1,requestTime:Date.now()};return{...r,authToken:e}}function q1(r){return r.requestStatus===1&&r.requestTime+By<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H1(r){const e=r,{installationEntry:t,registrationPromise:s}=await Lf(e);return s?s.catch(console.error):bf(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W1(r,e=!1){const t=r;return await G1(t),(await bf(t,e)).token}async function G1(r){const{registrationPromise:e}=await Lf(r);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(r){if(!r||!r.options)throw Uh("App Configuration");if(!r.name)throw Uh("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!r.options[t])throw Uh(t);return{appName:r.name,projectId:r.options.projectId,apiKey:r.options.apiKey,appId:r.options.appId}}function Uh(r){return es.create("missing-app-config-values",{valueName:r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="installations",K1="installations-internal",Y1=r=>{const e=r.getProvider("app").getImmediate(),t=Q1(e),s=ja(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:s,_delete:()=>Promise.resolve()}},X1=r=>{const e=r.getProvider("app").getImmediate(),t=ja(e,r_).getImmediate();return{getId:()=>H1(t),getToken:o=>W1(t,o)}};function J1(){di(new Rr(r_,Y1,"PUBLIC")),di(new Rr(K1,X1,"PRIVATE"))}J1();Xn(Uy,Df);Xn(Uy,Df,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu="analytics",Z1="firebase_id",eI="origin",tI=60*1e3,nI="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Mf="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt=new kf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ln=new Bu("analytics","Analytics",rI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(r){if(!r.startsWith(Mf)){const e=ln.create("invalid-gtag-resource",{gtagURL:r});return Yt.warn(e.message),""}return r}function i_(r){return Promise.all(r.map(e=>e.catch(t=>t)))}function sI(r,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(r,e)),t}function oI(r,e){const t=sI("firebase-js-sdk-policy",{createScriptURL:iI}),s=document.createElement("script"),o=`${Mf}?l=${r}&id=${e}`;s.src=t?t==null?void 0:t.createScriptURL(o):o,s.async=!0,document.head.appendChild(s)}function aI(r){let e=[];return Array.isArray(window[r])?e=window[r]:window[r]=e,e}async function lI(r,e,t,s,o,l){const h=s[o];try{if(h)await e[h];else{const g=(await i_(t)).find(y=>y.measurementId===o);g&&await e[g.appId]}}catch(d){Yt.error(d)}r("config",o,l)}async function uI(r,e,t,s,o){try{let l=[];if(o&&o.send_to){let h=o.send_to;Array.isArray(h)||(h=[h]);const d=await i_(t);for(const g of h){const y=d.find(E=>E.measurementId===g),v=y&&e[y.appId];if(v)l.push(v);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),r("event",s,o||{})}catch(l){Yt.error(l)}}function cI(r,e,t,s){async function o(l,...h){try{if(l==="event"){const[d,g]=h;await uI(r,e,t,d,g)}else if(l==="config"){const[d,g]=h;await lI(r,e,t,s,d,g)}else if(l==="consent"){const[d,g]=h;r("consent",d,g)}else if(l==="get"){const[d,g,y]=h;r("get",d,g,y)}else if(l==="set"){const[d]=h;r("set",d)}else r(l,...h)}catch(d){Yt.error(d)}}return o}function hI(r,e,t,s,o){let l=function(...h){window[s].push(arguments)};return window[o]&&typeof window[o]=="function"&&(l=window[o]),window[o]=cI(l,r,e,t),{gtagCore:l,wrappedGtag:window[o]}}function fI(r){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Mf)&&t.src.includes(r))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI=30,pI=1e3;class mI{constructor(e={},t=pI){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const s_=new mI;function gI(r){return new Headers({Accept:"application/json","x-goog-api-key":r})}async function yI(r){var h;const{appId:e,apiKey:t}=r,s={method:"GET",headers:gI(t)},o=nI.replace("{app-id}",e),l=await fetch(o,s);if(l.status!==200&&l.status!==304){let d="";try{const g=await l.json();(h=g.error)!=null&&h.message&&(d=g.error.message)}catch{}throw ln.create("config-fetch-failed",{httpStatus:l.status,responseMessage:d})}return l.json()}async function _I(r,e=s_,t){const{appId:s,apiKey:o,measurementId:l}=r.options;if(!s)throw ln.create("no-app-id");if(!o){if(l)return{measurementId:l,appId:s};throw ln.create("no-api-key")}const h=e.getThrottleMetadata(s)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new EI;return setTimeout(async()=>{d.abort()},tI),o_({appId:s,apiKey:o,measurementId:l},h,d,e)}async function o_(r,{throttleEndTimeMillis:e,backoffCount:t},s,o=s_){var d;const{appId:l,measurementId:h}=r;try{await vI(s,e)}catch(g){if(h)return Yt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:l,measurementId:h};throw g}try{const g=await yI(r);return o.deleteThrottleMetadata(l),g}catch(g){const y=g;if(!wI(y)){if(o.deleteThrottleMetadata(l),h)return Yt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${y==null?void 0:y.message}]`),{appId:l,measurementId:h};throw g}const v=Number((d=y==null?void 0:y.customData)==null?void 0:d.httpStatus)===503?Wm(t,o.intervalMillis,dI):Wm(t,o.intervalMillis),E={throttleEndTimeMillis:Date.now()+v,backoffCount:t+1};return o.setThrottleMetadata(l,E),Yt.debug(`Calling attemptFetch again in ${v} millis`),o_(r,E,s,o)}}function vI(r,e){return new Promise((t,s)=>{const o=Math.max(e-Date.now(),0),l=setTimeout(t,o);r.addEventListener(()=>{clearTimeout(l),s(ln.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function wI(r){if(!(r instanceof wi)||!r.customData)return!1;const e=Number(r.customData.httpStatus);return e===429||e===500||e===503||e===504}class EI{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function TI(r,e,t,s,o){if(o&&o.global){r("event",t,s);return}else{const l=await e,h={...s,send_to:l};r("event",t,h)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function II(){if(Ny())try{await Dy()}catch(r){return Yt.warn(ln.create("indexeddb-unavailable",{errorInfo:r==null?void 0:r.toString()}).message),!1}else return Yt.warn(ln.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function SI(r,e,t,s,o,l,h){const d=_I(r);d.then(I=>{t[I.measurementId]=I.appId,r.options.measurementId&&I.measurementId!==r.options.measurementId&&Yt.warn(`The measurement ID in the local Firebase config (${r.options.measurementId}) does not match the measurement ID fetched from the server (${I.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(I=>Yt.error(I)),e.push(d);const g=II().then(I=>{if(I)return s.getId()}),[y,v]=await Promise.all([d,g]);fI(l)||oI(l,y.measurementId),o("js",new Date);const E=(h==null?void 0:h.config)??{};return E[eI]="firebase",E.update=!0,v!=null&&(E[Z1]=v),o("config",y.measurementId,E),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e){this.app=e}_delete(){return delete wa[this.app.options.appId],Promise.resolve()}}let wa={},rg=[];const ig={};let Bh="dataLayer",CI="gtag",sg,a_,og=!1;function RI(){const r=[];if(GE()&&r.push("This is a browser extension environment."),KE()||r.push("Cookies are not available."),r.length>0){const e=r.map((s,o)=>`(${o+1}) ${s}`).join(" "),t=ln.create("invalid-analytics-context",{errorInfo:e});Yt.warn(t.message)}}function xI(r,e,t){RI();const s=r.options.appId;if(!s)throw ln.create("no-app-id");if(!r.options.apiKey)if(r.options.measurementId)Yt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${r.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ln.create("no-api-key");if(wa[s]!=null)throw ln.create("already-exists",{id:s});if(!og){aI(Bh);const{wrappedGtag:l,gtagCore:h}=hI(wa,rg,ig,Bh,CI);a_=l,sg=h,og=!0}return wa[s]=SI(r,rg,ig,e,sg,Bh,t),new AI(r)}function PI(r=Oy()){r=kn(r);const e=ja(r,Cu);return e.isInitialized()?e.getImmediate():kI(r)}function kI(r,e={}){const t=ja(r,Cu);if(t.isInitialized()){const o=t.getImmediate();if(Ca(e,t.getOptions()))return o;throw ln.create("already-initialized")}return t.initialize({options:e})}function NI(r,e,t,s){r=kn(r),TI(a_,wa[r.app.options.appId],e,t,s).catch(o=>Yt.error(o))}const ag="@firebase/analytics",lg="0.10.18";function DI(){di(new Rr(Cu,(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("installations-internal").getImmediate();return xI(s,o,t)},"PUBLIC")),di(new Rr("analytics-internal",r,"PRIVATE")),Xn(ag,lg),Xn(ag,lg,"esm2020");function r(e){try{const t=e.getProvider(Cu).getImmediate();return{logEvent:(s,o,l)=>NI(t,s,o,l)}}catch(t){throw ln.create("interop-component-reg-failed",{reason:t})}}}DI();var ug=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hi,l_;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,S){function C(){}C.prototype=S.prototype,x.F=S.prototype,x.prototype=new C,x.prototype.constructor=x,x.D=function(D,k,b){for(var R=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)R[Me-2]=arguments[Me];return S.prototype[k].apply(D,R)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(x,S,C){C||(C=0);const D=Array(16);if(typeof S=="string")for(var k=0;k<16;++k)D[k]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(k=0;k<16;++k)D[k]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=x.g[0],C=x.g[1],k=x.g[2];let b=x.g[3],R;R=S+(b^C&(k^b))+D[0]+3614090360&4294967295,S=C+(R<<7&4294967295|R>>>25),R=b+(k^S&(C^k))+D[1]+3905402710&4294967295,b=S+(R<<12&4294967295|R>>>20),R=k+(C^b&(S^C))+D[2]+606105819&4294967295,k=b+(R<<17&4294967295|R>>>15),R=C+(S^k&(b^S))+D[3]+3250441966&4294967295,C=k+(R<<22&4294967295|R>>>10),R=S+(b^C&(k^b))+D[4]+4118548399&4294967295,S=C+(R<<7&4294967295|R>>>25),R=b+(k^S&(C^k))+D[5]+1200080426&4294967295,b=S+(R<<12&4294967295|R>>>20),R=k+(C^b&(S^C))+D[6]+2821735955&4294967295,k=b+(R<<17&4294967295|R>>>15),R=C+(S^k&(b^S))+D[7]+4249261313&4294967295,C=k+(R<<22&4294967295|R>>>10),R=S+(b^C&(k^b))+D[8]+1770035416&4294967295,S=C+(R<<7&4294967295|R>>>25),R=b+(k^S&(C^k))+D[9]+2336552879&4294967295,b=S+(R<<12&4294967295|R>>>20),R=k+(C^b&(S^C))+D[10]+4294925233&4294967295,k=b+(R<<17&4294967295|R>>>15),R=C+(S^k&(b^S))+D[11]+2304563134&4294967295,C=k+(R<<22&4294967295|R>>>10),R=S+(b^C&(k^b))+D[12]+1804603682&4294967295,S=C+(R<<7&4294967295|R>>>25),R=b+(k^S&(C^k))+D[13]+4254626195&4294967295,b=S+(R<<12&4294967295|R>>>20),R=k+(C^b&(S^C))+D[14]+2792965006&4294967295,k=b+(R<<17&4294967295|R>>>15),R=C+(S^k&(b^S))+D[15]+1236535329&4294967295,C=k+(R<<22&4294967295|R>>>10),R=S+(k^b&(C^k))+D[1]+4129170786&4294967295,S=C+(R<<5&4294967295|R>>>27),R=b+(C^k&(S^C))+D[6]+3225465664&4294967295,b=S+(R<<9&4294967295|R>>>23),R=k+(S^C&(b^S))+D[11]+643717713&4294967295,k=b+(R<<14&4294967295|R>>>18),R=C+(b^S&(k^b))+D[0]+3921069994&4294967295,C=k+(R<<20&4294967295|R>>>12),R=S+(k^b&(C^k))+D[5]+3593408605&4294967295,S=C+(R<<5&4294967295|R>>>27),R=b+(C^k&(S^C))+D[10]+38016083&4294967295,b=S+(R<<9&4294967295|R>>>23),R=k+(S^C&(b^S))+D[15]+3634488961&4294967295,k=b+(R<<14&4294967295|R>>>18),R=C+(b^S&(k^b))+D[4]+3889429448&4294967295,C=k+(R<<20&4294967295|R>>>12),R=S+(k^b&(C^k))+D[9]+568446438&4294967295,S=C+(R<<5&4294967295|R>>>27),R=b+(C^k&(S^C))+D[14]+3275163606&4294967295,b=S+(R<<9&4294967295|R>>>23),R=k+(S^C&(b^S))+D[3]+4107603335&4294967295,k=b+(R<<14&4294967295|R>>>18),R=C+(b^S&(k^b))+D[8]+1163531501&4294967295,C=k+(R<<20&4294967295|R>>>12),R=S+(k^b&(C^k))+D[13]+2850285829&4294967295,S=C+(R<<5&4294967295|R>>>27),R=b+(C^k&(S^C))+D[2]+4243563512&4294967295,b=S+(R<<9&4294967295|R>>>23),R=k+(S^C&(b^S))+D[7]+1735328473&4294967295,k=b+(R<<14&4294967295|R>>>18),R=C+(b^S&(k^b))+D[12]+2368359562&4294967295,C=k+(R<<20&4294967295|R>>>12),R=S+(C^k^b)+D[5]+4294588738&4294967295,S=C+(R<<4&4294967295|R>>>28),R=b+(S^C^k)+D[8]+2272392833&4294967295,b=S+(R<<11&4294967295|R>>>21),R=k+(b^S^C)+D[11]+1839030562&4294967295,k=b+(R<<16&4294967295|R>>>16),R=C+(k^b^S)+D[14]+4259657740&4294967295,C=k+(R<<23&4294967295|R>>>9),R=S+(C^k^b)+D[1]+2763975236&4294967295,S=C+(R<<4&4294967295|R>>>28),R=b+(S^C^k)+D[4]+1272893353&4294967295,b=S+(R<<11&4294967295|R>>>21),R=k+(b^S^C)+D[7]+4139469664&4294967295,k=b+(R<<16&4294967295|R>>>16),R=C+(k^b^S)+D[10]+3200236656&4294967295,C=k+(R<<23&4294967295|R>>>9),R=S+(C^k^b)+D[13]+681279174&4294967295,S=C+(R<<4&4294967295|R>>>28),R=b+(S^C^k)+D[0]+3936430074&4294967295,b=S+(R<<11&4294967295|R>>>21),R=k+(b^S^C)+D[3]+3572445317&4294967295,k=b+(R<<16&4294967295|R>>>16),R=C+(k^b^S)+D[6]+76029189&4294967295,C=k+(R<<23&4294967295|R>>>9),R=S+(C^k^b)+D[9]+3654602809&4294967295,S=C+(R<<4&4294967295|R>>>28),R=b+(S^C^k)+D[12]+3873151461&4294967295,b=S+(R<<11&4294967295|R>>>21),R=k+(b^S^C)+D[15]+530742520&4294967295,k=b+(R<<16&4294967295|R>>>16),R=C+(k^b^S)+D[2]+3299628645&4294967295,C=k+(R<<23&4294967295|R>>>9),R=S+(k^(C|~b))+D[0]+4096336452&4294967295,S=C+(R<<6&4294967295|R>>>26),R=b+(C^(S|~k))+D[7]+1126891415&4294967295,b=S+(R<<10&4294967295|R>>>22),R=k+(S^(b|~C))+D[14]+2878612391&4294967295,k=b+(R<<15&4294967295|R>>>17),R=C+(b^(k|~S))+D[5]+4237533241&4294967295,C=k+(R<<21&4294967295|R>>>11),R=S+(k^(C|~b))+D[12]+1700485571&4294967295,S=C+(R<<6&4294967295|R>>>26),R=b+(C^(S|~k))+D[3]+2399980690&4294967295,b=S+(R<<10&4294967295|R>>>22),R=k+(S^(b|~C))+D[10]+4293915773&4294967295,k=b+(R<<15&4294967295|R>>>17),R=C+(b^(k|~S))+D[1]+2240044497&4294967295,C=k+(R<<21&4294967295|R>>>11),R=S+(k^(C|~b))+D[8]+1873313359&4294967295,S=C+(R<<6&4294967295|R>>>26),R=b+(C^(S|~k))+D[15]+4264355552&4294967295,b=S+(R<<10&4294967295|R>>>22),R=k+(S^(b|~C))+D[6]+2734768916&4294967295,k=b+(R<<15&4294967295|R>>>17),R=C+(b^(k|~S))+D[13]+1309151649&4294967295,C=k+(R<<21&4294967295|R>>>11),R=S+(k^(C|~b))+D[4]+4149444226&4294967295,S=C+(R<<6&4294967295|R>>>26),R=b+(C^(S|~k))+D[11]+3174756917&4294967295,b=S+(R<<10&4294967295|R>>>22),R=k+(S^(b|~C))+D[2]+718787259&4294967295,k=b+(R<<15&4294967295|R>>>17),R=C+(b^(k|~S))+D[9]+3951481745&4294967295,x.g[0]=x.g[0]+S&4294967295,x.g[1]=x.g[1]+(k+(R<<21&4294967295|R>>>11))&4294967295,x.g[2]=x.g[2]+k&4294967295,x.g[3]=x.g[3]+b&4294967295}s.prototype.v=function(x,S){S===void 0&&(S=x.length);const C=S-this.blockSize,D=this.C;let k=this.h,b=0;for(;b<S;){if(k==0)for(;b<=C;)o(this,x,b),b+=this.blockSize;if(typeof x=="string"){for(;b<S;)if(D[k++]=x.charCodeAt(b++),k==this.blockSize){o(this,D),k=0;break}}else for(;b<S;)if(D[k++]=x[b++],k==this.blockSize){o(this,D),k=0;break}}this.h=k,this.o+=S},s.prototype.A=function(){var x=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);x[0]=128;for(var S=1;S<x.length-8;++S)x[S]=0;S=this.o*8;for(var C=x.length-8;C<x.length;++C)x[C]=S&255,S/=256;for(this.v(x),x=Array(16),S=0,C=0;C<4;++C)for(let D=0;D<32;D+=8)x[S++]=this.g[C]>>>D&255;return x};function l(x,S){var C=d;return Object.prototype.hasOwnProperty.call(C,x)?C[x]:C[x]=S(x)}function h(x,S){this.h=S;const C=[];let D=!0;for(let k=x.length-1;k>=0;k--){const b=x[k]|0;D&&b==S||(C[k]=b,D=!1)}this.g=C}var d={};function g(x){return-128<=x&&x<128?l(x,function(S){return new h([S|0],S<0?-1:0)}):new h([x|0],x<0?-1:0)}function y(x){if(isNaN(x)||!isFinite(x))return E;if(x<0)return F(y(-x));const S=[];let C=1;for(let D=0;x>=C;D++)S[D]=x/C|0,C*=4294967296;return new h(S,0)}function v(x,S){if(x.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(x.charAt(0)=="-")return F(v(x.substring(1),S));if(x.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(S,8));let D=E;for(let b=0;b<x.length;b+=8){var k=Math.min(8,x.length-b);const R=parseInt(x.substring(b,b+k),S);k<8?(k=y(Math.pow(S,k)),D=D.j(k).add(y(R))):(D=D.j(C),D=D.add(y(R)))}return D}var E=g(0),I=g(1),L=g(16777216);r=h.prototype,r.m=function(){if($(this))return-F(this).m();let x=0,S=1;for(let C=0;C<this.g.length;C++){const D=this.i(C);x+=(D>=0?D:4294967296+D)*S,S*=4294967296}return x},r.toString=function(x){if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(W(this))return"0";if($(this))return"-"+F(this).toString(x);const S=y(Math.pow(x,6));var C=this;let D="";for(;;){const k=oe(C,S).g;C=J(C,k.j(S));let b=((C.g.length>0?C.g[0]:C.h)>>>0).toString(x);if(C=k,W(C))return b+D;for(;b.length<6;)b="0"+b;D=b+D}},r.i=function(x){return x<0?0:x<this.g.length?this.g[x]:this.h};function W(x){if(x.h!=0)return!1;for(let S=0;S<x.g.length;S++)if(x.g[S]!=0)return!1;return!0}function $(x){return x.h==-1}r.l=function(x){return x=J(this,x),$(x)?-1:W(x)?0:1};function F(x){const S=x.g.length,C=[];for(let D=0;D<S;D++)C[D]=~x.g[D];return new h(C,~x.h).add(I)}r.abs=function(){return $(this)?F(this):this},r.add=function(x){const S=Math.max(this.g.length,x.g.length),C=[];let D=0;for(let k=0;k<=S;k++){let b=D+(this.i(k)&65535)+(x.i(k)&65535),R=(b>>>16)+(this.i(k)>>>16)+(x.i(k)>>>16);D=R>>>16,b&=65535,R&=65535,C[k]=R<<16|b}return new h(C,C[C.length-1]&-2147483648?-1:0)};function J(x,S){return x.add(F(S))}r.j=function(x){if(W(this)||W(x))return E;if($(this))return $(x)?F(this).j(F(x)):F(F(this).j(x));if($(x))return F(this.j(F(x)));if(this.l(L)<0&&x.l(L)<0)return y(this.m()*x.m());const S=this.g.length+x.g.length,C=[];for(var D=0;D<2*S;D++)C[D]=0;for(D=0;D<this.g.length;D++)for(let k=0;k<x.g.length;k++){const b=this.i(D)>>>16,R=this.i(D)&65535,Me=x.i(k)>>>16,ve=x.i(k)&65535;C[2*D+2*k]+=R*ve,ne(C,2*D+2*k),C[2*D+2*k+1]+=b*ve,ne(C,2*D+2*k+1),C[2*D+2*k+1]+=R*Me,ne(C,2*D+2*k+1),C[2*D+2*k+2]+=b*Me,ne(C,2*D+2*k+2)}for(x=0;x<S;x++)C[x]=C[2*x+1]<<16|C[2*x];for(x=S;x<2*S;x++)C[x]=0;return new h(C,0)};function ne(x,S){for(;(x[S]&65535)!=x[S];)x[S+1]+=x[S]>>>16,x[S]&=65535,S++}function Q(x,S){this.g=x,this.h=S}function oe(x,S){if(W(S))throw Error("division by zero");if(W(x))return new Q(E,E);if($(x))return S=oe(F(x),S),new Q(F(S.g),F(S.h));if($(S))return S=oe(x,F(S)),new Q(F(S.g),S.h);if(x.g.length>30){if($(x)||$(S))throw Error("slowDivide_ only works with positive integers.");for(var C=I,D=S;D.l(x)<=0;)C=ge(C),D=ge(D);var k=ye(C,1),b=ye(D,1);for(D=ye(D,2),C=ye(C,2);!W(D);){var R=b.add(D);R.l(x)<=0&&(k=k.add(C),b=R),D=ye(D,1),C=ye(C,1)}return S=J(x,k.j(S)),new Q(k,S)}for(k=E;x.l(S)>=0;){for(C=Math.max(1,Math.floor(x.m()/S.m())),D=Math.ceil(Math.log(C)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),b=y(C),R=b.j(S);$(R)||R.l(x)>0;)C-=D,b=y(C),R=b.j(S);W(b)&&(b=I),k=k.add(b),x=J(x,R)}return new Q(k,x)}r.B=function(x){return oe(this,x).h},r.and=function(x){const S=Math.max(this.g.length,x.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)&x.i(D);return new h(C,this.h&x.h)},r.or=function(x){const S=Math.max(this.g.length,x.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)|x.i(D);return new h(C,this.h|x.h)},r.xor=function(x){const S=Math.max(this.g.length,x.g.length),C=[];for(let D=0;D<S;D++)C[D]=this.i(D)^x.i(D);return new h(C,this.h^x.h)};function ge(x){const S=x.g.length+1,C=[];for(let D=0;D<S;D++)C[D]=x.i(D)<<1|x.i(D-1)>>>31;return new h(C,x.h)}function ye(x,S){const C=S>>5;S%=32;const D=x.g.length-C,k=[];for(let b=0;b<D;b++)k[b]=S>0?x.i(b+C)>>>S|x.i(b+C+1)<<32-S:x.i(b+C);return new h(k,x.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,l_=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=v,hi=h}).apply(typeof ug<"u"?ug:typeof self<"u"?self:typeof window<"u"?window:{});var uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var u_,ma,c_,gu,nf,h_,f_,d_;(function(){var r,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof uu=="object"&&uu];for(var m=0;m<u.length;++m){var _=u[m];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,m){if(m)e:{var _=s;u=u.split(".");for(var T=0;T<u.length-1;T++){var O=u[T];if(!(O in _))break e;_=_[O]}u=u[u.length-1],T=_[u],m=m(T),m!=T&&m!=null&&e(_,u,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(m){var _=[],T;for(T in m)Object.prototype.hasOwnProperty.call(m,T)&&_.push([T,m[T]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function d(u){var m=typeof u;return m=="object"&&u!=null||m=="function"}function g(u,m,_){return u.call.apply(u.bind,arguments)}function y(u,m,_){return y=g,y.apply(null,arguments)}function v(u,m){var _=Array.prototype.slice.call(arguments,1);return function(){var T=_.slice();return T.push.apply(T,arguments),u.apply(this,T)}}function E(u,m){function _(){}_.prototype=m.prototype,u.Z=m.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(T,O,z){for(var re=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)re[xe-2]=arguments[xe];return m.prototype[O].apply(T,re)}}var I=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function L(u){const m=u.length;if(m>0){const _=Array(m);for(let T=0;T<m;T++)_[T]=u[T];return _}return[]}function W(u,m){for(let T=1;T<arguments.length;T++){const O=arguments[T];var _=typeof O;if(_=_!="object"?_:O?Array.isArray(O)?"array":_:"null",_=="array"||_=="object"&&typeof O.length=="number"){_=u.length||0;const z=O.length||0;u.length=_+z;for(let re=0;re<z;re++)u[_+re]=O[re]}else u.push(O)}}class ${constructor(m,_){this.i=m,this.j=_,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function F(u){h.setTimeout(()=>{throw u},0)}function J(){var u=x;let m=null;return u.g&&(m=u.g,u.g=u.g.next,u.g||(u.h=null),m.next=null),m}class ne{constructor(){this.h=this.g=null}add(m,_){const T=Q.get();T.set(m,_),this.h?this.h.next=T:this.g=T,this.h=T}}var Q=new $(()=>new oe,u=>u.reset());class oe{constructor(){this.next=this.g=this.h=null}set(m,_){this.h=m,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let ge,ye=!1,x=new ne,S=()=>{const u=Promise.resolve(void 0);ge=()=>{u.then(C)}};function C(){for(var u;u=J();){try{u.h.call(u.g)}catch(_){F(_)}var m=Q;m.j(u),m.h<100&&(m.h++,u.next=m.g,m.g=u)}ye=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(u,m){this.type=u,this.g=this.target=m,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var b=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,m=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,m),h.removeEventListener("test",_,m)}catch{}return u})();function R(u){return/^[\s\xa0]*$/.test(u)}function Me(u,m){k.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,m)}E(Me,k),Me.prototype.init=function(u,m){const _=this.type=u.type,T=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=m,m=u.relatedTarget,m||(_=="mouseover"?m=u.fromElement:_=="mouseout"&&(m=u.toElement)),this.relatedTarget=m,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&Me.Z.h.call(this)},Me.prototype.h=function(){Me.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ve="closure_listenable_"+(Math.random()*1e6|0),Ne=0;function Ce(u,m,_,T,O){this.listener=u,this.proxy=null,this.src=m,this.type=_,this.capture=!!T,this.ha=O,this.key=++Ne,this.da=this.fa=!1}function Z(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function se(u,m,_){for(const T in u)m.call(_,u[T],T,u)}function ie(u,m){for(const _ in u)m.call(void 0,u[_],_,u)}function P(u){const m={};for(const _ in u)m[_]=u[_];return m}const H="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(u,m){let _,T;for(let O=1;O<arguments.length;O++){T=arguments[O];for(_ in T)u[_]=T[_];for(let z=0;z<H.length;z++)_=H[z],Object.prototype.hasOwnProperty.call(T,_)&&(u[_]=T[_])}}function pe(u){this.src=u,this.g={},this.h=0}pe.prototype.add=function(u,m,_,T,O){const z=u.toString();u=this.g[z],u||(u=this.g[z]=[],this.h++);const re=Re(u,m,T,O);return re>-1?(m=u[re],_||(m.fa=!1)):(m=new Ce(m,this.src,z,!!T,O),m.fa=_,u.push(m)),m};function Se(u,m){const _=m.type;if(_ in u.g){var T=u.g[_],O=Array.prototype.indexOf.call(T,m,void 0),z;(z=O>=0)&&Array.prototype.splice.call(T,O,1),z&&(Z(m),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Re(u,m,_,T){for(let O=0;O<u.length;++O){const z=u[O];if(!z.da&&z.listener==m&&z.capture==!!_&&z.ha==T)return O}return-1}var Ue="closure_lm_"+(Math.random()*1e6|0),De={};function $e(u,m,_,T,O){if(Array.isArray(m)){for(let z=0;z<m.length;z++)$e(u,m[z],_,T,O);return null}return _=wo(_),u&&u[ve]?u.J(m,_,d(T)?!!T.capture:!1,O):jt(u,m,_,!1,T,O)}function jt(u,m,_,T,O,z){if(!m)throw Error("Invalid event type");const re=d(O)?!!O.capture:!!O;let xe=hs(u);if(xe||(u[Ue]=xe=new pe(u)),_=xe.add(m,_,T,re,z),_.proxy)return _;if(T=us(),_.proxy=T,T.src=u,T.listener=_,u.addEventListener)b||(O=re),O===void 0&&(O=!1),u.addEventListener(m.toString(),T,O);else if(u.attachEvent)u.attachEvent(cs(m.toString()),T);else if(u.addListener&&u.removeListener)u.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return _}function us(){function u(_){return m.call(u.src,u.listener,_)}const m=Wa;return u}function vo(u,m,_,T,O){if(Array.isArray(m))for(var z=0;z<m.length;z++)vo(u,m[z],_,T,O);else T=d(T)?!!T.capture:!!T,_=wo(_),u&&u[ve]?(u=u.i,z=String(m).toString(),z in u.g&&(m=u.g[z],_=Re(m,_,T,O),_>-1&&(Z(m[_]),Array.prototype.splice.call(m,_,1),m.length==0&&(delete u.g[z],u.h--)))):u&&(u=hs(u))&&(m=u.g[m.toString()],u=-1,m&&(u=Re(m,_,T,O)),(_=u>-1?m[u]:null)&&Dr(_))}function Dr(u){if(typeof u!="number"&&u&&!u.da){var m=u.src;if(m&&m[ve])Se(m.i,u);else{var _=u.type,T=u.proxy;m.removeEventListener?m.removeEventListener(_,T,u.capture):m.detachEvent?m.detachEvent(cs(_),T):m.addListener&&m.removeListener&&m.removeListener(T),(_=hs(m))?(Se(_,u),_.h==0&&(_.src=null,m[Ue]=null)):Z(u)}}}function cs(u){return u in De?De[u]:De[u]="on"+u}function Wa(u,m){if(u.da)u=!0;else{m=new Me(m,this);const _=u.listener,T=u.ha||u.src;u.fa&&Dr(u),u=_.call(T,m)}return u}function hs(u){return u=u[Ue],u instanceof pe?u:null}var Ii="__closure_events_fn_"+(Math.random()*1e9>>>0);function wo(u){return typeof u=="function"?u:(u[Ii]||(u[Ii]=function(m){return u.handleEvent(m)}),u[Ii])}function ct(){D.call(this),this.i=new pe(this),this.M=this,this.G=null}E(ct,D),ct.prototype[ve]=!0,ct.prototype.removeEventListener=function(u,m,_,T){vo(this,u,m,_,T)};function ot(u,m){var _,T=u.G;if(T)for(_=[];T;T=T.G)_.push(T);if(u=u.M,T=m.type||m,typeof m=="string")m=new k(m,u);else if(m instanceof k)m.target=m.target||u;else{var O=m;m=new k(T,u),le(m,O)}O=!0;let z,re;if(_)for(re=_.length-1;re>=0;re--)z=m.g=_[re],O=vn(z,T,!0,m)&&O;if(z=m.g=u,O=vn(z,T,!0,m)&&O,O=vn(z,T,!1,m)&&O,_)for(re=0;re<_.length;re++)z=m.g=_[re],O=vn(z,T,!1,m)&&O}ct.prototype.N=function(){if(ct.Z.N.call(this),this.i){var u=this.i;for(const m in u.g){const _=u.g[m];for(let T=0;T<_.length;T++)Z(_[T]);delete u.g[m],u.h--}}this.G=null},ct.prototype.J=function(u,m,_,T){return this.i.add(String(u),m,!1,_,T)},ct.prototype.K=function(u,m,_,T){return this.i.add(String(u),m,!0,_,T)};function vn(u,m,_,T){if(m=u.i.g[String(m)],!m)return!0;m=m.concat();let O=!0;for(let z=0;z<m.length;++z){const re=m[z];if(re&&!re.da&&re.capture==_){const xe=re.listener,at=re.ha||re.src;re.fa&&Se(u.i,re),O=xe.call(at,T)!==!1&&O}}return O&&!T.defaultPrevented}function Eo(u,m){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:h.setTimeout(u,m||0)}function To(u){u.g=Eo(()=>{u.g=null,u.i&&(u.i=!1,To(u))},u.l);const m=u.h;u.h=null,u.m.apply(null,m)}class Ga extends D{constructor(m,_){super(),this.m=m,this.l=_,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:To(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Vr(u){D.call(this),this.h=u,this.g={}}E(Vr,D);var Io=[];function fs(u){se(u.g,function(m,_){this.g.hasOwnProperty(_)&&Dr(m)},u),u.g={}}Vr.prototype.N=function(){Vr.Z.N.call(this),fs(this)},Vr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Lr=h.JSON.stringify,Qa=h.JSON.parse,Si=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function br(){}function Ka(){}var Mr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ds(){k.call(this,"d")}E(ds,k);function So(){k.call(this,"c")}E(So,k);var wn={},ps=null;function Or(){return ps=ps||new ct}wn.Ia="serverreachability";function ms(u){k.call(this,wn.Ia,u)}E(ms,k);function or(u){const m=Or();ot(m,new ms(m))}wn.STAT_EVENT="statevent";function ar(u,m){k.call(this,wn.STAT_EVENT,u),this.stat=m}E(ar,k);function it(u){const m=Or();ot(m,new ar(m,u))}wn.Ja="timingevent";function Ao(u,m){k.call(this,wn.Ja,u),this.size=m}E(Ao,k);function Fr(u,m){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},m)}function jr(){this.g=!0}jr.prototype.ua=function(){this.g=!1};function Ya(u,m,_,T,O,z){u.info(function(){if(u.g)if(z){var re="",xe=z.split("&");for(let He=0;He<xe.length;He++){var at=xe[He].split("=");if(at.length>1){const ht=at[0];at=at[1];const nn=ht.split("_");re=nn.length>=2&&nn[1]=="type"?re+(ht+"="+at+"&"):re+(ht+"=redacted&")}}}else re=null;else re=z;return"XMLHTTP REQ ("+T+") [attempt "+O+"]: "+m+`
`+_+`
`+re})}function Xa(u,m,_,T,O,z,re){u.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+O+"]: "+m+`
`+_+`
`+z+" "+re})}function Dn(u,m,_,T){u.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ai(u,_)+(T?" "+T:"")})}function Ja(u,m){u.info(function(){return"TIMEOUT: "+m})}jr.prototype.info=function(){};function Ai(u,m){if(!u.g)return m;if(!m)return null;try{const z=JSON.parse(m);if(z){for(u=0;u<z.length;u++)if(Array.isArray(z[u])){var _=z[u];if(!(_.length<2)){var T=_[1];if(Array.isArray(T)&&!(T.length<1)){var O=T[0];if(O!="noop"&&O!="stop"&&O!="close")for(let re=1;re<T.length;re++)T[re]=""}}}}return Lr(z)}catch{return m}}var Ur={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Br={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Za;function lr(){}E(lr,br),lr.prototype.g=function(){return new XMLHttpRequest},Za=new lr;function Vn(u){return encodeURIComponent(String(u))}function gs(u){var m=1;u=u.split(":");const _=[];for(;m>0&&u.length;)_.push(u.shift()),m--;return u.length&&_.push(u.join(":")),_}function un(u,m,_,T){this.j=u,this.i=m,this.l=_,this.S=T||1,this.V=new Vr(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new el}function el(){this.i=null,this.g="",this.h=!1}var tl={},Co={};function En(u,m,_){u.M=1,u.A=cr(cn(m)),u.u=_,u.R=!0,Ro(u,null)}function Ro(u,m){u.F=Date.now(),Ci(u),u.B=cn(u.A);var _=u.B,T=u.S;Array.isArray(T)||(T=[String(T)]),Oo(_.i,"t",T),u.C=0,_=u.j.L,u.h=new el,u.g=hl(u.j,_?m:null,!u.u),u.P>0&&(u.O=new Ga(y(u.Y,u,u.g),u.P)),m=u.V,_=u.g,T=u.ba;var O="readystatechange";Array.isArray(O)||(O&&(Io[0]=O.toString()),O=Io);for(let z=0;z<O.length;z++){const re=$e(_,O[z],T||m.handleEvent,!1,m.h||m);if(!re)break;m.g[re.key]=re}m=u.J?P(u.J):{},u.u?(u.v||(u.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,m)):(u.v="GET",u.g.ea(u.B,u.v,null,m)),or(),Ya(u.i,u.v,u.B,u.l,u.S,u.u)}un.prototype.ba=function(u){u=u.target;const m=this.O;m&&Un(u)==3?m.j():this.Y(u)},un.prototype.Y=function(u){try{if(u==this.g)e:{const xe=Un(this.g),at=this.g.ya(),He=this.g.ca();if(!(xe<3)&&(xe!=3||this.g&&(this.h.h||this.g.la()||ul(this.g)))){this.K||xe!=4||at==7||(at==8||He<=0?or(3):or(2)),ys(this);var m=this.g.ca();this.X=m;var _=nl(this);if(this.o=m==200,Xa(this.i,this.v,this.B,this.l,this.S,xe,m),this.o){if(this.U&&!this.L){t:{if(this.g){var T,O=this.g;if((T=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(T)){var z=T;break t}}z=null}if(u=z)Dn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ke(this,u);else{this.o=!1,this.m=3,it(12),ur(this),Ri(this);break e}}if(this.R){u=!0;let ht;for(;!this.K&&this.C<_.length;)if(ht=il(this,_),ht==Co){xe==4&&(this.m=4,it(14),u=!1),Dn(this.i,this.l,null,"[Incomplete Response]");break}else if(ht==tl){this.m=4,it(15),Dn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Dn(this.i,this.l,ht,null),Ke(this,ht);if(rl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),xe!=4||_.length!=0||this.h.h||(this.m=1,it(16),u=!1),this.o=this.o&&u,!u)Dn(this.i,this.l,_,"[Invalid Chunked Response]"),ur(this),Ri(this);else if(_.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),Mi(re),re.P=!0,it(11))}}else Dn(this.i,this.l,_,null),Ke(this,_);xe==4&&ur(this),this.o&&!this.K&&(xe==4?Rs(this.j,this):(this.o=!1,Ci(this)))}else jo(this.g),m==400&&_.indexOf("Unknown SID")>0?(this.m=3,it(12)):(this.m=0,it(13)),ur(this),Ri(this)}}}catch{}finally{}};function nl(u){if(!rl(u))return u.g.la();const m=ul(u.g);if(m==="")return"";let _="";const T=m.length,O=Un(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return ur(u),Ri(u),"";u.h.i=new h.TextDecoder}for(let z=0;z<T;z++)u.h.h=!0,_+=u.h.i.decode(m[z],{stream:!(O&&z==T-1)});return m.length=0,u.h.g+=_,u.C=0,u.h.g}function rl(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function il(u,m){var _=u.C,T=m.indexOf(`
`,_);return T==-1?Co:(_=Number(m.substring(_,T)),isNaN(_)?tl:(T+=1,T+_>m.length?Co:(m=m.slice(T,T+_),u.C=T+_,m)))}un.prototype.cancel=function(){this.K=!0,ur(this)};function Ci(u){u.T=Date.now()+u.H,xo(u,u.H)}function xo(u,m){if(u.D!=null)throw Error("WatchDog timer not null");u.D=Fr(y(u.aa,u),m)}function ys(u){u.D&&(h.clearTimeout(u.D),u.D=null)}un.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Ja(this.i,this.B),this.M!=2&&(or(),it(17)),ur(this),this.m=2,Ri(this)):xo(this,this.T-u)};function Ri(u){u.j.I==0||u.K||Rs(u.j,u)}function ur(u){ys(u);var m=u.O;m&&typeof m.dispose=="function"&&m.dispose(),u.O=null,fs(u.V),u.g&&(m=u.g,u.g=null,m.abort(),m.dispose())}function Ke(u,m){try{var _=u.j;if(_.I!=0&&(_.g==u||ko(_.h,u))){if(!u.L&&ko(_.h,u)&&_.I==3){try{var T=_.Ba.g.parse(m)}catch{T=null}if(Array.isArray(T)&&T.length==3){var O=T;if(O[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)Cs(_),en(_);else break e;$n(_),it(18)}}else _.xa=O[1],0<_.xa-_.K&&O[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=Fr(y(_.Va,_),6e3));xi(_.h)<=1&&_.ta&&(_.ta=void 0)}else tn(_,11)}else if((u.L||_.g==u)&&Cs(_),!R(m))for(O=_.Ba.g.parse(m),m=0;m<O.length;m++){let He=O[m];const ht=He[0];if(!(ht<=_.K))if(_.K=ht,He=He[1],_.I==2)if(He[0]=="c"){_.M=He[1],_.ba=He[2];const nn=He[3];nn!=null&&(_.ka=nn,_.j.info("VER="+_.ka));const mr=He[4];mr!=null&&(_.za=mr,_.j.info("SVER="+_.za));const qn=He[5];qn!=null&&typeof qn=="number"&&qn>0&&(T=1.5*qn,_.O=T,_.j.info("backChannelRequestTimeoutMs_="+T)),T=_;const Hn=u.g;if(Hn){const ks=Hn.g?Hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ks){var z=T.h;z.g||ks.indexOf("spdy")==-1&&ks.indexOf("quic")==-1&&ks.indexOf("h2")==-1||(z.j=z.l,z.g=new Set,z.h&&(vs(z,z.h),z.h=null))}if(T.G){const zo=Hn.g?Hn.g.getResponseHeader("X-HTTP-Session-Id"):null;zo&&(T.wa=zo,ze(T.J,T.G,zo))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),T=_;var re=u;if(T.na=Bo(T,T.L?T.ba:null,T.W),re.L){Pi(T.h,re);var xe=re,at=T.O;at&&(xe.H=at),xe.D&&(ys(xe),Ci(xe)),T.g=re}else Nt(T);_.i.length>0&&pr(_)}else He[0]!="stop"&&He[0]!="close"||tn(_,7);else _.I==3&&(He[0]=="stop"||He[0]=="close"?He[0]=="stop"?tn(_,7):Ss(_):He[0]!="noop"&&_.l&&_.l.qa(He),_.A=0)}}or(4)}catch{}}var sc=class{constructor(u,m){this.g=u,this.map=m}};function _s(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Po(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function xi(u){return u.h?1:u.g?u.g.size:0}function ko(u,m){return u.h?u.h==m:u.g?u.g.has(m):!1}function vs(u,m){u.g?u.g.add(m):u.h=m}function Pi(u,m){u.h&&u.h==m?u.h=null:u.g&&u.g.has(m)&&u.g.delete(m)}_s.prototype.cancel=function(){if(this.i=Xt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Xt(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let m=u.i;for(const _ of u.g.values())m=m.concat(_.G);return m}return L(u.i)}var sl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Jt(u,m){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const T=u[_].indexOf("=");let O,z=null;T>=0?(O=u[_].substring(0,T),z=u[_].substring(T+1)):O=u[_],m(O,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Ln(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;u instanceof Ln?(this.l=u.l,ki(this,u.j),this.o=u.o,this.g=u.g,bn(this,u.u),this.h=u.h,zr(this,Fo(u.i)),this.m=u.m):u&&(m=String(u).match(sl))?(this.l=!1,ki(this,m[1]||"",!0),this.o=Ni(m[2]||""),this.g=Ni(m[3]||"",!0),bn(this,m[4]),this.h=Ni(m[5]||"",!0),zr(this,m[6]||"",!0),this.m=Ni(m[7]||"")):(this.l=!1,this.i=new be(null,this.l))}Ln.prototype.toString=function(){const u=[];var m=this.j;m&&u.push(Di(m,Do,!0),":");var _=this.g;return(_||m=="file")&&(u.push("//"),(m=this.o)&&u.push(Di(m,Do,!0),"@"),u.push(Vn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(Di(_,_.charAt(0)=="/"?Vi:Vo,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",Di(_,Lo)),u.join("")},Ln.prototype.resolve=function(u){const m=cn(this);let _=!!u.j;_?ki(m,u.j):_=!!u.o,_?m.o=u.o:_=!!u.g,_?m.g=u.g:_=u.u!=null;var T=u.h;if(_)bn(m,u.u);else if(_=!!u.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var O=m.h.lastIndexOf("/");O!=-1&&(T=m.h.slice(0,O+1)+T)}if(O=T,O==".."||O==".")T="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){T=O.lastIndexOf("/",0)==0,O=O.split("/");const z=[];for(let re=0;re<O.length;){const xe=O[re++];xe=="."?T&&re==O.length&&z.push(""):xe==".."?((z.length>1||z.length==1&&z[0]!="")&&z.pop(),T&&re==O.length&&z.push("")):(z.push(xe),T=!0)}T=z.join("/")}else T=O}return _?m.h=T:_=u.i.toString()!=="",_?zr(m,Fo(u.i)):_=!!u.m,_&&(m.m=u.m),m};function cn(u){return new Ln(u)}function ki(u,m,_){u.j=_?Ni(m,!0):m,u.j&&(u.j=u.j.replace(/:$/,""))}function bn(u,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);u.u=m}else u.u=null}function zr(u,m,_){m instanceof be?(u.i=m,Es(u.i,u.l)):(_||(m=Di(m,oc)),u.i=new be(m,u.l))}function ze(u,m,_){u.i.set(m,_)}function cr(u){return ze(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Ni(u,m){return u?m?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Di(u,m,_){return typeof u=="string"?(u=encodeURI(u).replace(m,No),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function No(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Do=/[#\/\?@]/g,Vo=/[#\?:]/g,Vi=/[#\?]/g,oc=/[#\?@]/g,Lo=/#/g;function be(u,m){this.h=this.g=null,this.i=u||null,this.j=!!m}function Mn(u){u.g||(u.g=new Map,u.h=0,u.i&&Jt(u.i,function(m,_){u.add(decodeURIComponent(m.replace(/\+/g," ")),_)}))}r=be.prototype,r.add=function(u,m){Mn(this),this.i=null,u=On(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(m),this.h+=1,this};function bo(u,m){Mn(u),m=On(u,m),u.g.has(m)&&(u.i=null,u.h-=u.g.get(m).length,u.g.delete(m))}function ws(u,m){return Mn(u),m=On(u,m),u.g.has(m)}r.forEach=function(u,m){Mn(this),this.g.forEach(function(_,T){_.forEach(function(O){u.call(m,O,T,this)},this)},this)};function Mo(u,m){Mn(u);let _=[];if(typeof m=="string")ws(u,m)&&(_=_.concat(u.g.get(On(u,m))));else for(u=Array.from(u.g.values()),m=0;m<u.length;m++)_=_.concat(u[m]);return _}r.set=function(u,m){return Mn(this),this.i=null,u=On(this,u),ws(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[m]),this.h+=1,this},r.get=function(u,m){return u?(u=Mo(this,u),u.length>0?String(u[0]):m):m};function Oo(u,m,_){bo(u,m),_.length>0&&(u.i=null,u.g.set(On(u,m),L(_)),u.h+=_.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],m=Array.from(this.g.keys());for(let T=0;T<m.length;T++){var _=m[T];const O=Vn(_);_=Mo(this,_);for(let z=0;z<_.length;z++){let re=O;_[z]!==""&&(re+="="+Vn(_[z])),u.push(re)}}return this.i=u.join("&")};function Fo(u){const m=new be;return m.i=u.i,u.g&&(m.g=new Map(u.g),m.h=u.h),m}function On(u,m){return m=String(m),u.j&&(m=m.toLowerCase()),m}function Es(u,m){m&&!u.j&&(Mn(u),u.i=null,u.g.forEach(function(_,T){const O=T.toLowerCase();T!=O&&(bo(this,T),Oo(this,O,_))},u)),u.j=m}function Fn(u,m){const _=new jr;if(h.Image){const T=new Image;T.onload=v(St,_,"TestLoadImage: loaded",!0,m,T),T.onerror=v(St,_,"TestLoadImage: error",!1,m,T),T.onabort=v(St,_,"TestLoadImage: abort",!1,m,T),T.ontimeout=v(St,_,"TestLoadImage: timeout",!1,m,T),h.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=u}else m(!1)}function jn(u,m){const _=new jr,T=new AbortController,O=setTimeout(()=>{T.abort(),St(_,"TestPingServer: timeout",!1,m)},1e4);fetch(u,{signal:T.signal}).then(z=>{clearTimeout(O),z.ok?St(_,"TestPingServer: ok",!0,m):St(_,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(O),St(_,"TestPingServer: error",!1,m)})}function St(u,m,_,T,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),T(_)}catch{}}function Li(){this.g=new Si}function hr(u){this.i=u.Sb||null,this.h=u.ab||!1}E(hr,br),hr.prototype.g=function(){return new Zt(this.i,this.h)};function Zt(u,m){ct.call(this),this.H=u,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(Zt,ct),r=Zt.prototype,r.open=function(u,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=m,this.readyState=1,Tn(this)},r.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(m.body=u),(this.H||h).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,$r(this)),this.readyState=0},r.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Tn(this)),this.g&&(this.readyState=3,Tn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ol(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function ol(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}r.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var m=u.value?u.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!u.done}))&&(this.response=this.responseText+=m)}u.done?$r(this):Tn(this),this.readyState==3&&ol(this)}},r.Oa=function(u){this.g&&(this.response=this.responseText=u,$r(this))},r.Na=function(u){this.g&&(this.response=u,$r(this))},r.ga=function(){this.g&&$r(this)};function $r(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Tn(u)}r.setRequestHeader=function(u,m){this.A.append(u,m)},r.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],m=this.h.entries();for(var _=m.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=m.next();return u.join(`\r
`)};function Tn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Zt.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function al(u){let m="";return se(u,function(_,T){m+=T,m+=":",m+=_,m+=`\r
`}),m}function Ts(u,m,_){e:{for(T in _){var T=!1;break e}T=!0}T||(_=al(_),typeof u=="string"?_!=null&&Vn(_):ze(u,m,_))}function We(u){ct.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(We,ct);var ll=/^https?$/i,ac=["POST","PUT"];r=We.prototype,r.Fa=function(u){this.H=u},r.ea=function(u,m,_,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);m=m?m.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Za.g(),this.g.onreadystatechange=I(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(u),!0),this.B=!1}catch(z){qr(this,z);return}if(u=_||"",_=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var O in T)_.set(O,T[O]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const z of T.keys())_.set(z,T.get(z));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(_.keys()).find(z=>z.toLowerCase()=="content-type"),O=h.FormData&&u instanceof h.FormData,!(Array.prototype.indexOf.call(ac,m,void 0)>=0)||T||O||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[z,re]of _)this.g.setRequestHeader(z,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(z){qr(this,z)}};function qr(u,m){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=m,u.o=5,Hr(u),dr(u)}function Hr(u){u.A||(u.A=!0,ot(u,"complete"),ot(u,"error"))}r.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,ot(this,"complete"),ot(this,"abort"),dr(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dr(this,!0)),We.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?fr(this):this.Xa())},r.Xa=function(){fr(this)};function fr(u){if(u.h&&typeof l<"u"){if(u.v&&Un(u)==4)setTimeout(u.Ca.bind(u),0);else if(ot(u,"readystatechange"),Un(u)==4){u.h=!1;try{const z=u.ca();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var _;if(!(_=m)){var T;if(T=z===0){let re=String(u.D).match(sl)[1]||null;!re&&h.self&&h.self.location&&(re=h.self.location.protocol.slice(0,-1)),T=!ll.test(re?re.toLowerCase():"")}_=T}if(_)ot(u,"complete"),ot(u,"success");else{u.o=6;try{var O=Un(u)>2?u.g.statusText:""}catch{O=""}u.l=O+" ["+u.ca()+"]",Hr(u)}}finally{dr(u)}}}}function dr(u,m){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,m||ot(u,"ready");try{_.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Un(u){return u.g?u.g.readyState:0}r.ca=function(){try{return Un(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(u){if(this.g){var m=this.g.responseText;return u&&m.indexOf(u)==0&&(m=m.substring(u.length)),Qa(m)}};function ul(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function jo(u){const m={};u=(u.g&&Un(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<u.length;T++){if(R(u[T]))continue;var _=gs(u[T]);const O=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const z=m[O]||[];m[O]=z,z.push(_)}ie(m,function(T){return T.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Bn(u,m,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||m}function Is(u){this.za=0,this.i=[],this.j=new jr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Bn("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Bn("baseRetryDelayMs",5e3,u),this.Za=Bn("retryDelaySeedMs",1e4,u),this.Ta=Bn("forwardChannelMaxRetries",2,u),this.va=Bn("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new _s(u&&u.concurrentRequestLimit),this.Ba=new Li,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Is.prototype,r.ka=8,r.I=1,r.connect=function(u,m,_,T){it(0),this.W=u,this.H=m||{},_&&T!==void 0&&(this.H.OSID=_,this.H.OAID=T),this.F=this.X,this.J=Bo(this,null,this.W),pr(this)};function Ss(u){if(As(u),u.I==3){var m=u.V++,_=cn(u.J);if(ze(_,"SID",u.M),ze(_,"RID",m),ze(_,"TYPE","terminate"),zn(u,_),m=new un(u,u.j,m),m.M=2,m.A=cr(cn(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(m.A.toString(),"")}catch{}!_&&h.Image&&(new Image().src=m.A,_=!0),_||(m.g=hl(m.j,null),m.g.ea(m.A)),m.F=Date.now(),Ci(m)}Oi(u)}function en(u){u.g&&(Mi(u),u.g.cancel(),u.g=null)}function As(u){en(u),u.v&&(h.clearTimeout(u.v),u.v=null),Cs(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&h.clearTimeout(u.m),u.m=null)}function pr(u){if(!Po(u.h)&&!u.m){u.m=!0;var m=u.Ea;ge||S(),ye||(ge(),ye=!0),x.add(m,u),u.D=0}}function cl(u,m){return xi(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=m.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=Fr(y(u.Ea,u,m),xs(u,u.D)),u.D++,!0)}r.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const O=new un(this,this.j,u);let z=this.o;if(this.U&&(z?(z=P(z),le(z,this.U)):z=this.U),this.u!==null||this.R||(O.J=z,z=null),this.S)e:{for(var m=0,_=0;_<this.i.length;_++){t:{var T=this.i[_];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(m+=T,m>4096){m=_;break e}if(m===4096||_===this.i.length-1){m=_+1;break e}}m=1e3}else m=1e3;m=Uo(this,O,m),_=cn(this.J),ze(_,"RID",u),ze(_,"CVER",22),this.G&&ze(_,"X-HTTP-Session-Id",this.G),zn(this,_),z&&(this.R?m="headers="+Vn(al(z))+"&"+m:this.u&&Ts(_,this.u,z)),vs(this.h,O),this.Ra&&ze(_,"TYPE","init"),this.S?(ze(_,"$req",m),ze(_,"SID","null"),O.U=!0,En(O,_,null)):En(O,_,m),this.I=2}}else this.I==3&&(u?bi(this,u):this.i.length==0||Po(this.h)||bi(this))};function bi(u,m){var _;m?_=m.l:_=u.V++;const T=cn(u.J);ze(T,"SID",u.M),ze(T,"RID",_),ze(T,"AID",u.K),zn(u,T),u.u&&u.o&&Ts(T,u.u,u.o),_=new un(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),m&&(u.i=m.G.concat(u.i)),m=Uo(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),vs(u.h,_),En(_,T,m)}function zn(u,m){u.H&&se(u.H,function(_,T){ze(m,T,_)}),u.l&&se({},function(_,T){ze(m,T,_)})}function Uo(u,m,_){_=Math.min(u.i.length,_);const T=u.l?y(u.l.Ka,u.l,u):null;e:{var O=u.i;let xe=-1;for(;;){const at=["count="+_];xe==-1?_>0?(xe=O[0].g,at.push("ofs="+xe)):xe=0:at.push("ofs="+xe);let He=!0;for(let ht=0;ht<_;ht++){var z=O[ht].g;const nn=O[ht].map;if(z-=xe,z<0)xe=Math.max(0,O[ht].g-100),He=!1;else try{z="req"+z+"_"||"";try{var re=nn instanceof Map?nn:Object.entries(nn);for(const[mr,qn]of re){let Hn=qn;d(qn)&&(Hn=Lr(qn)),at.push(z+mr+"="+encodeURIComponent(Hn))}}catch(mr){throw at.push(z+"type="+encodeURIComponent("_badmap")),mr}}catch{T&&T(nn)}}if(He){re=at.join("&");break e}}re=void 0}return u=u.i.splice(0,_),m.G=u,re}function Nt(u){if(!u.g&&!u.v){u.Y=1;var m=u.Da;ge||S(),ye||(ge(),ye=!0),x.add(m,u),u.A=0}}function $n(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=Fr(y(u.Da,u),xs(u,u.A)),u.A++,!0)}r.Da=function(){if(this.v=null,Wr(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=Fr(y(this.Wa,this),u)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,it(10),en(this),Wr(this))};function Mi(u){u.B!=null&&(h.clearTimeout(u.B),u.B=null)}function Wr(u){u.g=new un(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var m=cn(u.na);ze(m,"RID","rpc"),ze(m,"SID",u.M),ze(m,"AID",u.K),ze(m,"CI",u.F?"0":"1"),!u.F&&u.ia&&ze(m,"TO",u.ia),ze(m,"TYPE","xmlhttp"),zn(u,m),u.u&&u.o&&Ts(m,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=cr(cn(m)),_.u=null,_.R=!0,Ro(_,u)}r.Va=function(){this.C!=null&&(this.C=null,en(this),$n(this),it(19))};function Cs(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Rs(u,m){var _=null;if(u.g==m){Cs(u),Mi(u),u.g=null;var T=2}else if(ko(u.h,m))_=m.G,Pi(u.h,m),T=1;else return;if(u.I!=0){if(m.o)if(T==1){_=m.u?m.u.length:0,m=Date.now()-m.F;var O=u.D;T=Or(),ot(T,new Ao(T,_)),pr(u)}else Nt(u);else if(O=m.m,O==3||O==0&&m.X>0||!(T==1&&cl(u,m)||T==2&&$n(u)))switch(_&&_.length>0&&(m=u.h,m.i=m.i.concat(_)),O){case 1:tn(u,5);break;case 4:tn(u,10);break;case 3:tn(u,6);break;default:tn(u,2)}}}function xs(u,m){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*m}function tn(u,m){if(u.j.info("Error code "+m),m==2){var _=y(u.bb,u),T=u.Ua;const O=!T;T=new Ln(T||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||ki(T,"https"),cr(T),O?Fn(T.toString(),_):jn(T.toString(),_)}else it(2);u.I=0,u.l&&u.l.pa(m),Oi(u),As(u)}r.bb=function(u){u?(this.j.info("Successfully pinged google.com"),it(2)):(this.j.info("Failed to ping google.com"),it(1))};function Oi(u){if(u.I=0,u.ja=[],u.l){const m=Xt(u.h);(m.length!=0||u.i.length!=0)&&(W(u.ja,m),W(u.ja,u.i),u.h.i.length=0,L(u.i),u.i.length=0),u.l.oa()}}function Bo(u,m,_){var T=_ instanceof Ln?cn(_):new Ln(_);if(T.g!="")m&&(T.g=m+"."+T.g),bn(T,T.u);else{var O=h.location;T=O.protocol,m=m?m+"."+O.hostname:O.hostname,O=+O.port;const z=new Ln(null);T&&ki(z,T),m&&(z.g=m),O&&bn(z,O),_&&(z.h=_),T=z}return _=u.G,m=u.wa,_&&m&&ze(T,_,m),ze(T,"VER",u.ka),zn(u,T),T}function hl(u,m,_){if(m&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=u.Aa&&!u.ma?new We(new hr({ab:_})):new We(u.ma),m.Fa(u.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function fl(){}r=fl.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ps(){}Ps.prototype.g=function(u,m){return new At(u,m)};function At(u,m){ct.call(this),this.g=new Is(m),this.l=u,this.h=m&&m.messageUrlParams||null,u=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(u?u["X-WebChannel-Content-Type"]=m.messageContentType:u={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(u?u["X-WebChannel-Client-Profile"]=m.sa:u={"X-WebChannel-Client-Profile":m.sa}),this.g.U=u,(u=m&&m.Qb)&&!R(u)&&(this.g.u=u),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!R(m)&&(this.g.G=m,u=this.h,u!==null&&m in u&&(u=this.h,m in u&&delete u[m])),this.j=new Gr(this)}E(At,ct),At.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},At.prototype.close=function(){Ss(this.g)},At.prototype.o=function(u){var m=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=Lr(u),u=_);m.i.push(new sc(m.Ya++,u)),m.I==3&&pr(m)},At.prototype.N=function(){this.g.l=null,delete this.j,Ss(this.g),delete this.g,At.Z.N.call(this)};function dl(u){ds.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var m=u.__sm__;if(m){e:{for(const _ in m){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,m=m!==null&&u in m?m[u]:void 0),this.data=m}else this.data=u}E(dl,ds);function pl(){So.call(this),this.status=1}E(pl,So);function Gr(u){this.g=u}E(Gr,fl),Gr.prototype.ra=function(){ot(this.g,"a")},Gr.prototype.qa=function(u){ot(this.g,new dl(u))},Gr.prototype.pa=function(u){ot(this.g,new pl)},Gr.prototype.oa=function(){ot(this.g,"b")},Ps.prototype.createWebChannel=Ps.prototype.g,At.prototype.send=At.prototype.o,At.prototype.open=At.prototype.m,At.prototype.close=At.prototype.close,d_=function(){return new Ps},f_=function(){return Or()},h_=wn,nf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ur.NO_ERROR=0,Ur.TIMEOUT=8,Ur.HTTP_ERROR=6,gu=Ur,Br.COMPLETE="complete",c_=Br,Ka.EventType=Mr,Mr.OPEN="a",Mr.CLOSE="b",Mr.ERROR="c",Mr.MESSAGE="d",ct.prototype.listen=ct.prototype.J,ma=Ka,We.prototype.listenOnce=We.prototype.K,We.prototype.getLastError=We.prototype.Ha,We.prototype.getLastErrorCode=We.prototype.ya,We.prototype.getStatus=We.prototype.ca,We.prototype.getResponseJson=We.prototype.La,We.prototype.getResponseText=We.prototype.la,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Fa,u_=We}).apply(typeof uu<"u"?uu:typeof self<"u"?self:typeof window<"u"?window:{});const cg="@firebase/firestore",hg="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ot.UNAUTHENTICATED=new Ot(null),Ot.GOOGLE_CREDENTIALS=new Ot("google-credentials-uid"),Ot.FIRST_PARTY=new Ot("first-party-uid"),Ot.MOCK_USER=new Ot("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=new kf("@firebase/firestore");function Xs(){return ns.logLevel}function ce(r,...e){if(ns.logLevel<=Fe.DEBUG){const t=e.map(Of);ns.debug(`Firestore (${fo}): ${r}`,...t)}}function Pr(r,...e){if(ns.logLevel<=Fe.ERROR){const t=e.map(Of);ns.error(`Firestore (${fo}): ${r}`,...t)}}function io(r,...e){if(ns.logLevel<=Fe.WARN){const t=e.map(Of);ns.warn(`Firestore (${fo}): ${r}`,...t)}}function Of(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(r,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,p_(r,s,t)}function p_(r,e,t){let s=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Pr(s),new Error(s)}function qe(r,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,r||p_(e,o,s)}function Pe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends wi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Ot.UNAUTHENTICATED)))}shutdown(){}}class LI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class bI{constructor(e){this.t=e,this.currentUser=Ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){qe(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,t(g)):Promise.resolve();let l=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ar,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=l;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},d=g=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>d(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?d(g):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ar)}}),0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(qe(typeof s.accessToken=="string",31837,{l:s}),new m_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return qe(e===null||typeof e=="string",2055,{h:e}),new Ot(e)}}class MI{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Ot.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class OI{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new MI(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Ot.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class fg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FI{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,JT(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){qe(this.o===void 0,3512);const s=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const h=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new fg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new fg(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<r;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ff{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=jI(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Ve(r,e){return r<e?-1:r>e?1:0}function rf(r,e){const t=Math.min(r.length,e.length);for(let s=0;s<t;s++){const o=r.charAt(s),l=e.charAt(s);if(o!==l)return zh(o)===zh(l)?Ve(o,l):zh(o)?1:-1}return Ve(r.length,e.length)}const UI=55296,BI=57343;function zh(r){const e=r.charCodeAt(0);return e>=UI&&e<=BI}function so(r,e,t){return r.length===e.length&&r.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dg="__name__";class Yn{constructor(e,t,s){t===void 0?t=0:t>e.length&&Te(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Te(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return Yn.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yn?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=Yn.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ve(e.length,t.length)}static compareSegments(e,t){const s=Yn.isNumericId(e),o=Yn.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?Yn.extractNumericId(e).compare(Yn.extractNumericId(t)):rf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return hi.fromString(e.substring(4,e.length-2))}}class Qe extends Yn{construct(e,t,s){return new Qe(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new ae(G.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Qe(t)}static emptyPath(){return new Qe([])}}const zI=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Yn{construct(e,t,s){return new Pt(e,t,s)}static isValidIdentifier(e){return zI.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===dg}static keyField(){return new Pt([dg])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new ae(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let h=!1;for(;o<e.length;){const d=e[o];if(d==="\\"){if(o+1===e.length)throw new ae(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ae(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else d==="`"?(h=!h,o++):d!=="."||h?(s+=d,o++):(l(),o++)}if(l(),h)throw new ae(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(t)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(Qe.fromString(e))}static fromName(e){return new _e(Qe.fromString(e).popFirst(5))}static empty(){return new _e(Qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Qe.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new Qe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(r,e,t){if(!t)throw new ae(G.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function $I(r,e,t,s){if(e===!0&&s===!0)throw new ae(G.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function pg(r){if(!_e.isDocumentKey(r))throw new ae(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function mg(r){if(_e.isDocumentKey(r))throw new ae(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function y_(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function qu(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":Te(12329,{type:typeof r})}function kr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ae(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qu(r);throw new ae(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Ua(r,e){if(!y_(r))throw new ae(G.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){t=`JSON missing required field: '${s}'`;break}const h=r[s];if(o&&typeof h!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&h!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new ae(G.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg=-62135596800,yg=1e6;class Je{static now(){return Je.fromMillis(Date.now())}static fromDate(e){return Je.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*yg);return new Je(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<gg)throw new ae(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/yg}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Je._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ua(e,Je._jsonSchema))return new Je(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-gg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Je._jsonSchemaVersion="firestore/timestamp/1.0",Je._jsonSchema={type:mt("string",Je._jsonSchemaVersion),seconds:mt("number"),nanoseconds:mt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Je(0,0))}static max(){return new Ae(new Je(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xa=-1;function qI(r,e){const t=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(s===1e9?new Je(t+1,0):new Je(t,s));return new pi(o,_e.empty(),e)}function HI(r){return new pi(r.readTime,r.key,xa)}class pi{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new pi(Ae.min(),_e.empty(),xa)}static max(){return new pi(Ae.max(),_e.empty(),xa)}}function WI(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(r.documentKey,e.documentKey),t!==0?t:Ve(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function po(r){if(r.code!==G.FAILED_PRECONDITION||r.message!==GI)throw r;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Te(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,s)=>{t(e)}))}static reject(e){return new K(((t,s)=>{s(e)}))}static waitFor(e){return new K(((t,s)=>{let o=0,l=0,h=!1;e.forEach((d=>{++o,d.next((()=>{++l,h&&l===o&&t()}),(g=>s(g)))})),h=!0,l===o&&t()}))}static or(e){let t=K.resolve(!1);for(const s of e)t=t.next((o=>o?K.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new K(((s,o)=>{const l=e.length,h=new Array(l);let d=0;for(let g=0;g<l;g++){const y=g;t(e[y]).next((v=>{h[y]=v,++d,d===l&&s(h)}),(v=>o(v)))}}))}static doWhile(e,t){return new K(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function KI(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function mo(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Hu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=-1;function Wu(r){return r==null}function Ru(r){return r===0&&1/r==-1/0}function YI(r){return typeof r=="number"&&Number.isInteger(r)&&!Ru(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="";function XI(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=_g(e)),e=JI(r.get(t),e);return _g(e)}function JI(r,e){let t=e;const s=r.length;for(let o=0;o<s;o++){const l=r.charAt(o);switch(l){case"\0":t+="";break;case __:t+="";break;default:t+=l}}return t}function _g(r){return r+__+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ei(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function v_(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,t){this.comparator=e,this.root=t||xt.EMPTY}insert(e,t){return new rt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,xt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cu(this.root,e,this.comparator,!0)}}class cu{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class xt{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??xt.RED,this.left=o??xt.EMPTY,this.right=l??xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new xt(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return xt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Te(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Te(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Te(27949);return e+(this.isRed()?0:1)}}xt.EMPTY=null,xt.RED=!0,xt.BLACK=!1;xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te(57766)}get value(){throw Te(16141)}get color(){throw Te(16727)}get left(){throw Te(29726)}get right(){throw Te(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new wg(this.data.getIterator())}getIteratorFrom(e){return new wg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new vt(this.comparator);return t.data=e,t}}class wg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new an([])}unionWith(e){let t=new vt(Pt.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new an(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return so(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new w_("Invalid base64 string: "+l):l}})(e);return new kt(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let h=0;h<o.length;++h)l+=String.fromCharCode(o[h]);return l})(e);return new kt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const ZI=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mi(r){if(qe(!!r,39018),typeof r=="string"){let e=0;const t=ZI.exec(r);if(qe(!!t,46558,{timestamp:r}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:ut(r.seconds),nanos:ut(r.nanos)}}function ut(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function gi(r){return typeof r=="string"?kt.fromBase64String(r):kt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_="server_timestamp",T_="__type__",I_="__previous_value__",S_="__local_write_time__";function Uf(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[T_])==null?void 0:s.stringValue)===E_}function Gu(r){const e=r.mapValue.fields[I_];return Uf(e)?Gu(e):e}function Pa(r){const e=mi(r.mapValue.fields[S_].timestampValue);return new Je(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eS{constructor(e,t,s,o,l,h,d,g,y,v){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=h,this.autoDetectLongPolling=d,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=v}}const xu="(default)";class ka{constructor(e,t){this.projectId=e,this.database=t||xu}static empty(){return new ka("","")}get isDefaultDatabase(){return this.database===xu}isEqual(e){return e instanceof ka&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A_="__type__",tS="__max__",hu={mapValue:{}},C_="__vector__",Pu="value";function yi(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Uf(r)?4:rS(r)?9007199254740991:nS(r)?10:11:Te(28295,{value:r})}function rr(r,e){if(r===e)return!0;const t=yi(r);if(t!==yi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return Pa(r).isEqual(Pa(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const h=mi(o.timestampValue),d=mi(l.timestampValue);return h.seconds===d.seconds&&h.nanos===d.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,l){return gi(o.bytesValue).isEqual(gi(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,l){return ut(o.geoPointValue.latitude)===ut(l.geoPointValue.latitude)&&ut(o.geoPointValue.longitude)===ut(l.geoPointValue.longitude)})(r,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return ut(o.integerValue)===ut(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const h=ut(o.doubleValue),d=ut(l.doubleValue);return h===d?Ru(h)===Ru(d):isNaN(h)&&isNaN(d)}return!1})(r,e);case 9:return so(r.arrayValue.values||[],e.arrayValue.values||[],rr);case 10:case 11:return(function(o,l){const h=o.mapValue.fields||{},d=l.mapValue.fields||{};if(vg(h)!==vg(d))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(d[g]===void 0||!rr(h[g],d[g])))return!1;return!0})(r,e);default:return Te(52216,{left:r})}}function Na(r,e){return(r.values||[]).find((t=>rr(t,e)))!==void 0}function oo(r,e){if(r===e)return 0;const t=yi(r),s=yi(e);if(t!==s)return Ve(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ve(r.booleanValue,e.booleanValue);case 2:return(function(l,h){const d=ut(l.integerValue||l.doubleValue),g=ut(h.integerValue||h.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1})(r,e);case 3:return Eg(r.timestampValue,e.timestampValue);case 4:return Eg(Pa(r),Pa(e));case 5:return rf(r.stringValue,e.stringValue);case 6:return(function(l,h){const d=gi(l),g=gi(h);return d.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(l,h){const d=l.split("/"),g=h.split("/");for(let y=0;y<d.length&&y<g.length;y++){const v=Ve(d[y],g[y]);if(v!==0)return v}return Ve(d.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,h){const d=Ve(ut(l.latitude),ut(h.latitude));return d!==0?d:Ve(ut(l.longitude),ut(h.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return Tg(r.arrayValue,e.arrayValue);case 10:return(function(l,h){var I,L,W,$;const d=l.fields||{},g=h.fields||{},y=(I=d[Pu])==null?void 0:I.arrayValue,v=(L=g[Pu])==null?void 0:L.arrayValue,E=Ve(((W=y==null?void 0:y.values)==null?void 0:W.length)||0,(($=v==null?void 0:v.values)==null?void 0:$.length)||0);return E!==0?E:Tg(y,v)})(r.mapValue,e.mapValue);case 11:return(function(l,h){if(l===hu.mapValue&&h===hu.mapValue)return 0;if(l===hu.mapValue)return 1;if(h===hu.mapValue)return-1;const d=l.fields||{},g=Object.keys(d),y=h.fields||{},v=Object.keys(y);g.sort(),v.sort();for(let E=0;E<g.length&&E<v.length;++E){const I=rf(g[E],v[E]);if(I!==0)return I;const L=oo(d[g[E]],y[v[E]]);if(L!==0)return L}return Ve(g.length,v.length)})(r.mapValue,e.mapValue);default:throw Te(23264,{he:t})}}function Eg(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ve(r,e);const t=mi(r),s=mi(e),o=Ve(t.seconds,s.seconds);return o!==0?o:Ve(t.nanos,s.nanos)}function Tg(r,e){const t=r.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=oo(t[o],s[o]);if(l)return l}return Ve(t.length,s.length)}function ao(r){return sf(r)}function sf(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const s=mi(t);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return gi(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return _e.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=sf(l);return s+"]"})(r.arrayValue):"mapValue"in r?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const h of s)l?l=!1:o+=",",o+=`${h}:${sf(t.fields[h])}`;return o+"}"})(r.mapValue):Te(61005,{value:r})}function yu(r){switch(yi(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gu(r);return e?16+yu(e):16;case 5:return 2*r.stringValue.length;case 6:return gi(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+yu(l)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return Ei(s.fields,((l,h)=>{o+=l.length+yu(h)})),o})(r.mapValue);default:throw Te(13486,{value:r})}}function Ig(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function of(r){return!!r&&"integerValue"in r}function Bf(r){return!!r&&"arrayValue"in r}function Sg(r){return!!r&&"nullValue"in r}function Ag(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function _u(r){return!!r&&"mapValue"in r}function nS(r){var t,s;return((s=(((t=r==null?void 0:r.mapValue)==null?void 0:t.fields)||{})[A_])==null?void 0:s.stringValue)===C_}function Ea(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ei(r.mapValue.fields,((t,s)=>e.mapValue.fields[t]=Ea(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ea(r.arrayValue.values[t]);return e}return{...r}}function rS(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===tS}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!_u(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ea(t)}setAll(e){let t=Pt.emptyPath(),s={},o=[];e.forEach(((h,d)=>{if(!t.isImmediateParentOf(d)){const g=this.getFieldsMap(t);this.applyChanges(g,s,o),s={},o=[],t=d.popLast()}h?s[d.lastSegment()]=Ea(h):o.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());_u(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];_u(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){Ei(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new Kt(Ea(this.value))}}function R_(r){const e=[];return Ei(r.fields,((t,s)=>{const o=new Pt([t]);if(_u(s)){const l=R_(s.mapValue).fields;if(l.length===0)e.push(o);else for(const h of l)e.push(o.child(h))}else e.push(o)})),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e,t,s,o,l,h,d){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=h,this.documentState=d}static newInvalidDocument(e){return new Ft(e,0,Ae.min(),Ae.min(),Ae.min(),Kt.empty(),0)}static newFoundDocument(e,t,s,o){return new Ft(e,1,t,Ae.min(),s,o,0)}static newNoDocument(e,t){return new Ft(e,2,t,Ae.min(),Ae.min(),Kt.empty(),0)}static newUnknownDocument(e,t){return new Ft(e,3,t,Ae.min(),Ae.min(),Kt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(e,t){this.position=e,this.inclusive=t}}function Cg(r,e,t){let s=0;for(let o=0;o<r.position.length;o++){const l=e[o],h=r.position[o];if(l.field.isKeyField()?s=_e.comparator(_e.fromName(h.referenceValue),t.key):s=oo(h,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Rg(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!rr(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t="asc"){this.field=e,this.dir=t}}function iS(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x_{}class pt extends x_{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new oS(e,t,s):t==="array-contains"?new uS(e,s):t==="in"?new cS(e,s):t==="not-in"?new hS(e,s):t==="array-contains-any"?new fS(e,s):new pt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new aS(e,s):new lS(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(oo(t,this.value)):t!==null&&yi(this.value)===yi(t)&&this.matchesComparison(oo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Nn extends x_{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Nn(e,t)}matches(e){return P_(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function P_(r){return r.op==="and"}function k_(r){return sS(r)&&P_(r)}function sS(r){for(const e of r.filters)if(e instanceof Nn)return!1;return!0}function af(r){if(r instanceof pt)return r.field.canonicalString()+r.op.toString()+ao(r.value);if(k_(r))return r.filters.map((e=>af(e))).join(",");{const e=r.filters.map((t=>af(t))).join(",");return`${r.op}(${e})`}}function N_(r,e){return r instanceof pt?(function(s,o){return o instanceof pt&&s.op===o.op&&s.field.isEqual(o.field)&&rr(s.value,o.value)})(r,e):r instanceof Nn?(function(s,o){return o instanceof Nn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,h,d)=>l&&N_(h,o.filters[d])),!0):!1})(r,e):void Te(19439)}function D_(r){return r instanceof pt?(function(t){return`${t.field.canonicalString()} ${t.op} ${ao(t.value)}`})(r):r instanceof Nn?(function(t){return t.op.toString()+" {"+t.getFilters().map(D_).join(" ,")+"}"})(r):"Filter"}class oS extends pt{constructor(e,t,s){super(e,t,s),this.key=_e.fromName(s.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class aS extends pt{constructor(e,t){super(e,"in",t),this.keys=V_("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class lS extends pt{constructor(e,t){super(e,"not-in",t),this.keys=V_("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function V_(r,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((s=>_e.fromName(s.referenceValue)))}class uS extends pt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bf(t)&&Na(t.arrayValue,this.value)}}class cS extends pt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Na(this.value.arrayValue,t)}}class hS extends pt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Na(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Na(this.value.arrayValue,t)}}class fS extends pt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bf(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Na(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{constructor(e,t=null,s=[],o=[],l=null,h=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=h,this.endAt=d,this.Te=null}}function xg(r,e=null,t=[],s=[],o=null,l=null,h=null){return new dS(r,e,t,s,o,l,h)}function zf(r){const e=Pe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>af(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),Wu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>ao(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>ao(s))).join(",")),e.Te=t}return e.Te}function $f(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!iS(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!N_(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!Rg(r.startAt,e.startAt)&&Rg(r.endAt,e.endAt)}function lf(r){return _e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e,t=null,s=[],o=[],l=null,h="F",d=null,g=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=h,this.startAt=d,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function pS(r,e,t,s,o,l,h,d){return new go(r,e,t,s,o,l,h,d)}function qf(r){return new go(r)}function Pg(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function L_(r){return r.collectionGroup!==null}function Ta(r){const e=Pe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let d=new vt(Pt.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(d=d.add(y.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new Da(l,s))})),t.has(Pt.keyField().canonicalString())||e.Ie.push(new Da(Pt.keyField(),s))}return e.Ie}function Jn(r){const e=Pe(r);return e.Ee||(e.Ee=mS(e,Ta(r))),e.Ee}function mS(r,e){if(r.limitType==="F")return xg(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new Da(o.field,l)}));const t=r.endAt?new ku(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new ku(r.startAt.position,r.startAt.inclusive):null;return xg(r.path,r.collectionGroup,e,r.filters,r.limit,t,s)}}function uf(r,e){const t=r.filters.concat([e]);return new go(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function cf(r,e,t){return new go(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function Qu(r,e){return $f(Jn(r),Jn(e))&&r.limitType===e.limitType}function b_(r){return`${zf(Jn(r))}|lt:${r.limitType}`}function Js(r){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>D_(o))).join(", ")}]`),Wu(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>ao(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>ao(o))).join(",")),`Target(${s})`})(Jn(r))}; limitType=${r.limitType})`}function Ku(r,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):_e.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(r,e)&&(function(s,o){for(const l of Ta(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(h,d,g){const y=Cg(h,d,g);return h.inclusive?y<=0:y<0})(s.startAt,Ta(s),o)||s.endAt&&!(function(h,d,g){const y=Cg(h,d,g);return h.inclusive?y>=0:y>0})(s.endAt,Ta(s),o))})(r,e)}function gS(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function M_(r){return(e,t)=>{let s=!1;for(const o of Ta(r)){const l=yS(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function yS(r,e,t){const s=r.field.isKeyField()?_e.comparator(e.key,t.key):(function(l,h,d){const g=h.data.field(l),y=d.data.field(l);return g!==null&&y!==null?oo(g,y):Te(42886)})(r.field,e,t);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return Te(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class os{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Ei(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return v_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _S=new rt(_e.comparator);function Nr(){return _S}const O_=new rt(_e.comparator);function ga(...r){let e=O_;for(const t of r)e=e.insert(t.key,t);return e}function F_(r){let e=O_;return r.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Ji(){return Ia()}function j_(){return Ia()}function Ia(){return new os((r=>r.toString()),((r,e)=>r.isEqual(e)))}const vS=new rt(_e.comparator),wS=new vt(_e.comparator);function Le(...r){let e=wS;for(const t of r)e=e.add(t);return e}const ES=new vt(Ve);function TS(){return ES}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ru(e)?"-0":e}}function U_(r){return{integerValue:""+r}}function IS(r,e){return YI(e)?U_(e):Hf(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(){this._=void 0}}function SS(r,e,t){return r instanceof Nu?(function(o,l){const h={fields:{[T_]:{stringValue:E_},[S_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&Uf(l)&&(l=Gu(l)),l&&(h.fields[I_]=l),{mapValue:h}})(t,e):r instanceof Va?z_(r,e):r instanceof La?$_(r,e):(function(o,l){const h=B_(o,l),d=kg(h)+kg(o.Ae);return of(h)&&of(o.Ae)?U_(d):Hf(o.serializer,d)})(r,e)}function AS(r,e,t){return r instanceof Va?z_(r,e):r instanceof La?$_(r,e):t}function B_(r,e){return r instanceof Du?(function(s){return of(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Nu extends Yu{}class Va extends Yu{constructor(e){super(),this.elements=e}}function z_(r,e){const t=q_(e);for(const s of r.elements)t.some((o=>rr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class La extends Yu{constructor(e){super(),this.elements=e}}function $_(r,e){let t=q_(e);for(const s of r.elements)t=t.filter((o=>!rr(o,s)));return{arrayValue:{values:t}}}class Du extends Yu{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function kg(r){return ut(r.integerValue||r.doubleValue)}function q_(r){return Bf(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}function CS(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof Va&&o instanceof Va||s instanceof La&&o instanceof La?so(s.elements,o.elements,rr):s instanceof Du&&o instanceof Du?rr(s.Ae,o.Ae):s instanceof Nu&&o instanceof Nu})(r.transform,e.transform)}class RS{constructor(e,t){this.version=e,this.transformResults=t}}class Pn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pn}static exists(e){return new Pn(void 0,e)}static updateTime(e){return new Pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vu(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class Xu{}function H_(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new Wf(r.key,Pn.none()):new Ba(r.key,r.data,Pn.none());{const t=r.data,s=Kt.empty();let o=new vt(Pt.comparator);for(let l of e.fields)if(!o.has(l)){let h=t.field(l);h===null&&l.length>1&&(l=l.popLast(),h=t.field(l)),h===null?s.delete(l):s.set(l,h),o=o.add(l)}return new Ti(r.key,s,new an(o.toArray()),Pn.none())}}function xS(r,e,t){r instanceof Ba?(function(o,l,h){const d=o.value.clone(),g=Dg(o.fieldTransforms,l,h.transformResults);d.setAll(g),l.convertToFoundDocument(h.version,d).setHasCommittedMutations()})(r,e,t):r instanceof Ti?(function(o,l,h){if(!vu(o.precondition,l))return void l.convertToUnknownDocument(h.version);const d=Dg(o.fieldTransforms,l,h.transformResults),g=l.data;g.setAll(W_(o)),g.setAll(d),l.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(r,e,t):(function(o,l,h){l.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,t)}function Sa(r,e,t,s){return r instanceof Ba?(function(l,h,d,g){if(!vu(l.precondition,h))return d;const y=l.value.clone(),v=Vg(l.fieldTransforms,g,h);return y.setAll(v),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(r,e,t,s):r instanceof Ti?(function(l,h,d,g){if(!vu(l.precondition,h))return d;const y=Vg(l.fieldTransforms,g,h),v=h.data;return v.setAll(W_(l)),v.setAll(y),h.convertToFoundDocument(h.version,v).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(r,e,t,s):(function(l,h,d){return vu(l.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):d})(r,e,t)}function PS(r,e){let t=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),l=B_(s.transform,o||null);l!=null&&(t===null&&(t=Kt.empty()),t.set(s.field,l))}return t||null}function Ng(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&so(s,o,((l,h)=>CS(l,h)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class Ba extends Xu{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ti extends Xu{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function W_(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=r.data.field(t);e.set(t,s)}})),e}function Dg(r,e,t){const s=new Map;qe(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let o=0;o<t.length;o++){const l=r[o],h=l.transform,d=e.data.field(l.field);s.set(l.field,AS(h,d,t[o]))}return s}function Vg(r,e,t){const s=new Map;for(const o of r){const l=o.transform,h=t.data.field(o.field);s.set(o.field,SS(l,h,e))}return s}class Wf extends Xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class kS extends Xu{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&xS(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=Sa(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=Sa(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=j_();return this.mutations.forEach((o=>{const l=e.get(o.key),h=l.overlayedDocument;let d=this.applyToLocalView(h,l.mutatedFields);d=t.has(o.key)?null:d;const g=H_(h,d);g!==null&&s.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(Ae.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&so(this.mutations,e.mutations,((t,s)=>Ng(t,s)))&&so(this.baseMutations,e.baseMutations,((t,s)=>Ng(t,s)))}}class Gf{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){qe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return vS})();const l=e.mutations;for(let h=0;h<l.length;h++)o=o.insert(l[h].key,s[h].version);return new Gf(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt,Oe;function LS(r){switch(r){case G.OK:return Te(64938);case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0;default:return Te(15467,{code:r})}}function G_(r){if(r===void 0)return Pr("GRPC error has no .code"),G.UNKNOWN;switch(r){case dt.OK:return G.OK;case dt.CANCELLED:return G.CANCELLED;case dt.UNKNOWN:return G.UNKNOWN;case dt.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case dt.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case dt.INTERNAL:return G.INTERNAL;case dt.UNAVAILABLE:return G.UNAVAILABLE;case dt.UNAUTHENTICATED:return G.UNAUTHENTICATED;case dt.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case dt.NOT_FOUND:return G.NOT_FOUND;case dt.ALREADY_EXISTS:return G.ALREADY_EXISTS;case dt.PERMISSION_DENIED:return G.PERMISSION_DENIED;case dt.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case dt.ABORTED:return G.ABORTED;case dt.OUT_OF_RANGE:return G.OUT_OF_RANGE;case dt.UNIMPLEMENTED:return G.UNIMPLEMENTED;case dt.DATA_LOSS:return G.DATA_LOSS;default:return Te(39323,{code:r})}}(Oe=dt||(dt={}))[Oe.OK=0]="OK",Oe[Oe.CANCELLED=1]="CANCELLED",Oe[Oe.UNKNOWN=2]="UNKNOWN",Oe[Oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Oe[Oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Oe[Oe.NOT_FOUND=5]="NOT_FOUND",Oe[Oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Oe[Oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Oe[Oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Oe[Oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Oe[Oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Oe[Oe.ABORTED=10]="ABORTED",Oe[Oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Oe[Oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Oe[Oe.INTERNAL=13]="INTERNAL",Oe[Oe.UNAVAILABLE=14]="UNAVAILABLE",Oe[Oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS=new hi([4294967295,4294967295],0);function Lg(r){const e=bS().encode(r),t=new l_;return t.update(e),new Uint8Array(t.digest())}function bg(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new hi([t,s],0),new hi([o,l],0)]}class Qf{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new ya(`Invalid padding: ${t}`);if(s<0)throw new ya(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ya(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new ya(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=hi.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(hi.fromNumber(s)));return o.compare(MS)===1&&(o=new hi([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Lg(e),[s,o]=bg(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);if(!this.we(h))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),h=new Qf(l,o,t);return s.forEach((d=>h.insert(d))),h}insert(e){if(this.ge===0)return;const t=Lg(e),[s,o]=bg(t);for(let l=0;l<this.hashCount;l++){const h=this.ye(s,o,l);this.Se(h)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class ya extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,za.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new Ju(Ae.min(),o,new rt(Ve),Nr(),Le())}}class za{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new za(s,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class Q_{constructor(e,t){this.targetId=e,this.Ce=t}}class K_{constructor(e,t,s=kt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Mg{constructor(){this.ve=0,this.Fe=Og(),this.Me=kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),s=Le();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Te(38017,{changeType:l})}})),new za(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Og()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class OS{constructor(e){this.Ge=e,this.ze=new Map,this.je=Nr(),this.Je=fu(),this.He=fu(),this.Ye=new rt(Ve)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Te(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if(lf(l))if(s===0){const h=new _e(l.path);this.et(t,h,Ft.newNoDocument(h,Ae.min()))}else qe(s===1,20013,{expectedCount:s});else{const h=this._t(t);if(h!==s){const d=this.ut(e),g=d?this.ct(d,e,h):1;if(g!==0){this.it(t);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let h,d;try{h=gi(s).toUint8Array()}catch(g){if(g instanceof w_)return io("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{d=new Qf(h,o,l)}catch(g){return io(g instanceof ya?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return d.ge===0?null:d}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const h=this.Ge.ht(),d=`projects/${h.projectId}/databases/${h.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,h)=>{const d=this.ot(h);if(d){if(l.current&&lf(d.target)){const g=new _e(d.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,Ft.newNoDocument(g,e))}l.Be&&(t.set(h,l.ke()),l.qe())}}));let s=Le();this.He.forEach(((l,h)=>{let d=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(s=s.add(l))})),this.je.forEach(((l,h)=>h.setReadTime(e)));const o=new Ju(e,t,this.Ye,this.je,s);return this.je=Nr(),this.Je=fu(),this.He=fu(),this.Ye=new rt(Ve),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Mg,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new vt(Ve),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new vt(Ve),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Mg),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function fu(){return new rt(_e.comparator)}function Og(){return new rt(_e.comparator)}const FS={asc:"ASCENDING",desc:"DESCENDING"},jS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},US={and:"AND",or:"OR"};class BS{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function hf(r,e){return r.useProto3Json||Wu(e)?e:{value:e}}function Vu(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Y_(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function zS(r,e){return Vu(r,e.toTimestamp())}function Zn(r){return qe(!!r,49232),Ae.fromTimestamp((function(t){const s=mi(t);return new Je(s.seconds,s.nanos)})(r))}function Kf(r,e){return ff(r,e).canonicalString()}function ff(r,e){const t=(function(o){return new Qe(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?t:t.child(e)}function X_(r){const e=Qe.fromString(r);return qe(nv(e),10190,{key:e.toString()}),e}function df(r,e){return Kf(r.databaseId,e.path)}function $h(r,e){const t=X_(e);if(t.get(1)!==r.databaseId.projectId)throw new ae(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ae(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new _e(Z_(t))}function J_(r,e){return Kf(r.databaseId,e)}function $S(r){const e=X_(r);return e.length===4?Qe.emptyPath():Z_(e)}function pf(r){return new Qe(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Z_(r){return qe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function Fg(r,e,t){return{name:df(r,e),fields:t.value.mapValue.fields}}function qS(r,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Te(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,v){return y.useProto3Json?(qe(v===void 0||typeof v=="string",58123),kt.fromBase64String(v||"")):(qe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),kt.fromUint8Array(v||new Uint8Array))})(r,e.targetChange.resumeToken),h=e.targetChange.cause,d=h&&(function(y){const v=y.code===void 0?G.UNKNOWN:G_(y.code);return new ae(v,y.message||"")})(h);t=new K_(s,o,l,d||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=$h(r,s.document.name),l=Zn(s.document.updateTime),h=s.document.createTime?Zn(s.document.createTime):Ae.min(),d=new Kt({mapValue:{fields:s.document.fields}}),g=Ft.newFoundDocument(o,l,h,d),y=s.targetIds||[],v=s.removedTargetIds||[];t=new wu(y,v,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=$h(r,s.document),l=s.readTime?Zn(s.readTime):Ae.min(),h=Ft.newNoDocument(o,l),d=s.removedTargetIds||[];t=new wu([],d,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=$h(r,s.document),l=s.removedTargetIds||[];t=new wu([],l,o,null)}else{if(!("filter"in e))return Te(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,h=new VS(o,l),d=s.targetId;t=new Q_(d,h)}}return t}function HS(r,e){let t;if(e instanceof Ba)t={update:Fg(r,e.key,e.value)};else if(e instanceof Wf)t={delete:df(r,e.key)};else if(e instanceof Ti)t={update:Fg(r,e.key,e.data),updateMask:eA(e.fieldMask)};else{if(!(e instanceof kS))return Te(16599,{Vt:e.type});t={verify:df(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,h){const d=h.transform;if(d instanceof Nu)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Va)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof La)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Du)return{fieldPath:h.field.canonicalString(),increment:d.Ae};throw Te(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:zS(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Te(27497)})(r,e.precondition)),t}function WS(r,e){return r&&r.length>0?(qe(e!==void 0,14353),r.map((t=>(function(o,l){let h=o.updateTime?Zn(o.updateTime):Zn(l);return h.isEqual(Ae.min())&&(h=Zn(l)),new RS(h,o.transformResults||[])})(t,e)))):[]}function GS(r,e){return{documents:[J_(r,e.path)]}}function QS(r,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=J_(r,o);const l=(function(y){if(y.length!==0)return tv(Nn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const h=(function(y){if(y.length!==0)return y.map((v=>(function(I){return{field:Zs(I.field),direction:XS(I.dir)}})(v)))})(e.orderBy);h&&(t.structuredQuery.orderBy=h);const d=hf(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function KS(r){let e=$S(r.parent);const t=r.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){qe(s===1,65062);const v=t.from[0];v.allDescendants?o=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(E){const I=ev(E);return I instanceof Nn&&k_(I)?I.getFilters():[I]})(t.where));let h=[];t.orderBy&&(h=(function(E){return E.map((I=>(function(W){return new Da(eo(W.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(I)))})(t.orderBy));let d=null;t.limit&&(d=(function(E){let I;return I=typeof E=="object"?E.value:E,Wu(I)?null:I})(t.limit));let g=null;t.startAt&&(g=(function(E){const I=!!E.before,L=E.values||[];return new ku(L,I)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const I=!E.before,L=E.values||[];return new ku(L,I)})(t.endAt)),pS(e,o,h,l,d,"F",g,y)}function YS(r,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ev(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=eo(t.unaryFilter.field);return pt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=eo(t.unaryFilter.field);return pt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=eo(t.unaryFilter.field);return pt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=eo(t.unaryFilter.field);return pt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Te(61313);default:return Te(60726)}})(r):r.fieldFilter!==void 0?(function(t){return pt.create(eo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Te(58110);default:return Te(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Nn.create(t.compositeFilter.filters.map((s=>ev(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Te(1026)}})(t.compositeFilter.op))})(r):Te(30097,{filter:r})}function XS(r){return FS[r]}function JS(r){return jS[r]}function ZS(r){return US[r]}function Zs(r){return{fieldPath:r.canonicalString()}}function eo(r){return Pt.fromServerFormat(r.fieldPath)}function tv(r){return r instanceof pt?(function(t){if(t.op==="=="){if(Ag(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NAN"}};if(Sg(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Ag(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NOT_NAN"}};if(Sg(t.value))return{unaryFilter:{field:Zs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zs(t.field),op:JS(t.op),value:t.value}}})(r):r instanceof Nn?(function(t){const s=t.getFilters().map((o=>tv(o)));return s.length===1?s[0]:{compositeFilter:{op:ZS(t.op),filters:s}}})(r):Te(54877,{filter:r})}function eA(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function nv(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,t,s,o,l=Ae.min(),h=Ae.min(),d=kt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=d,this.expectedCount=g}withSequenceNumber(e){return new li(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new li(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new li(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.yt=e}}function nA(r){const e=KS({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?cf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.Cn=new iA}addToCollectionParentIndex(e,t){return this.Cn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(pi.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(pi.min())}updateCollectionGroup(e,t,s){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class iA{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new vt(Qe.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new vt(Qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},rv=41943040;class Qt{static withCacheSize(e){return new Qt(e,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qt.DEFAULT_COLLECTION_PERCENTILE=10,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qt.DEFAULT=new Qt(rv,Qt.DEFAULT_COLLECTION_PERCENTILE,Qt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qt.DISABLED=new Qt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new lo(0)}static cr(){return new lo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug="LruGarbageCollector",sA=1048576;function Bg([r,e],[t,s]){const o=Ve(r,t);return o===0?Ve(e,s):o}class oA{constructor(e){this.Ir=e,this.buffer=new vt(Bg),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Bg(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class aA{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce(Ug,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){mo(t)?ce(Ug,"Ignoring IndexedDB error during garbage collection: ",t):await po(t)}await this.Vr(3e5)}))}}class lA{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(Hu.ce);const s=new oA(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(jg)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),jg):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,h,d,g,y;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,h=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,d=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(y=Date.now(),Xs()<=Fe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-v}ms
	Determined least recently used ${o} in `+(d-h)+`ms
	Removed ${l} targets in `+(g-d)+`ms
	Removed ${E} documents in `+(y-g)+`ms
Total Duration: ${y-v}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function uA(r,e){return new lA(r,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(){this.changes=new os((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ft.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?K.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&Sa(s.mutation,o,an.empty(),Je.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,Le()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=Le()){const o=Ji();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let h=ga();return l.forEach(((d,g)=>{h=h.insert(d,g.overlayedDocument)})),h}))))}getOverlayedDocuments(e,t){const s=Ji();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,Le())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((h,d)=>{t.set(h,d)}))}))}computeViews(e,t,s,o){let l=Nr();const h=Ia(),d=(function(){return Ia()})();return t.forEach(((g,y)=>{const v=s.get(y.key);o.has(y.key)&&(v===void 0||v.mutation instanceof Ti)?l=l.insert(y.key,y):v!==void 0?(h.set(y.key,v.mutation.getFieldMask()),Sa(v.mutation,y,v.mutation.getFieldMask(),Je.now())):h.set(y.key,an.empty())})),this.recalculateAndSaveOverlays(e,l).next((g=>(g.forEach(((y,v)=>h.set(y,v))),t.forEach(((y,v)=>d.set(y,new hA(v,h.get(y)??null)))),d)))}recalculateAndSaveOverlays(e,t){const s=Ia();let o=new rt(((h,d)=>h-d)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((h=>{for(const d of h)d.keys().forEach((g=>{const y=t.get(g);if(y===null)return;let v=s.get(g)||an.empty();v=d.applyToLocalView(y,v),s.set(g,v);const E=(o.get(d.batchId)||Le()).add(g);o=o.insert(d.batchId,E)}))})).next((()=>{const h=[],d=o.getReverseIterator();for(;d.hasNext();){const g=d.getNext(),y=g.key,v=g.value,E=j_();v.forEach((I=>{if(!l.has(I)){const L=H_(t.get(I),s.get(I));L!==null&&E.set(I,L),l=l.add(I)}})),h.push(this.documentOverlayCache.saveOverlays(e,y,E))}return K.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(h){return _e.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):L_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const h=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):K.resolve(Ji());let d=xa,g=l;return h.next((y=>K.forEach(y,((v,E)=>(d<E.largestBatchId&&(d=E.largestBatchId),l.get(v)?K.resolve():this.remoteDocumentCache.getEntry(e,v).next((I=>{g=g.insert(v,I)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,g,y,Le()))).next((v=>({batchId:d,changes:F_(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((s=>{let o=ga();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let h=ga();return this.indexManager.getCollectionParents(e,l).next((d=>K.forEach(d,(g=>{const y=(function(E,I){return new go(I,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,g.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((v=>{v.forEach(((E,I)=>{h=h.insert(E,I)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((h=>(l=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((h=>{l.forEach(((g,y)=>{const v=y.getKey();h.get(v)===null&&(h=h.insert(v,Ft.newInvalidDocument(v)))}));let d=ga();return h.forEach(((g,y)=>{const v=l.get(g);v!==void 0&&Sa(v.mutation,y,an.empty(),Je.now()),Ku(t,y)&&(d=d.insert(g,y))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return K.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:Zn(o.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:nA(o.bundledQuery),readTime:Zn(o.readTime)}})(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.overlays=new rt(_e.comparator),this.qr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Ji();return K.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),K.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),K.resolve()}getOverlaysForCollection(e,t,s){const o=Ji(),l=t.length+1,h=new _e(t.child("")),d=this.overlays.getIteratorFrom(h);for(;d.hasNext();){const g=d.getNext().value,y=g.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&g.largestBatchId>s&&o.set(g.getKey(),g)}return K.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new rt(((y,v)=>y-v));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let v=l.get(y.largestBatchId);v===null&&(v=Ji(),l=l.insert(y.largestBatchId,v)),v.set(y.getKey(),y)}}const d=Ji(),g=l.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,v)=>d.set(y,v))),!(d.size()>=o)););return K.resolve(d)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new DS(t,s));let l=this.qr.get(t);l===void 0&&(l=Le(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(){this.Qr=new vt(It.$r),this.Ur=new vt(It.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new It(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new It(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new _e(new Qe([])),s=new It(t,e),o=new It(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(h=>{this.Gr(h),l.push(h.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new _e(new Qe([])),s=new It(t,e),o=new It(t,e+1);let l=Le();return this.Ur.forEachInRange([s,o],(h=>{l=l.add(h.key)})),l}containsKey(e){const t=new It(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class It{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return _e.comparator(e.key,t.key)||Ve(e.Yr,t.Yr)}static Kr(e,t){return Ve(e.Yr,t.Yr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new vt(It.$r)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new NS(l,t,s,o);this.mutationQueue.push(h);for(const d of o)this.Zr=this.Zr.add(new It(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return K.resolve(h)}lookupMutationBatch(e,t){return K.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?jf:this.tr-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new It(t,0),o=new It(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(h=>{const d=this.Xr(h.Yr);l.push(d)})),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new vt(Ve);return t.forEach((o=>{const l=new It(o,0),h=new It(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,h],(d=>{s=s.add(d.Yr)}))})),K.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;_e.isDocumentKey(l)||(l=l.child(""));const h=new It(new _e(l),0);let d=new vt(Ve);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(d=d.add(g.Yr)),!0)}),h),K.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return K.forEach(t.mutations,(o=>{const l=new It(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new It(t,0),o=this.Zr.firstAfterOrEqual(s);return K.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(e){this.ri=e,this.docs=(function(){return new rt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,h=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:h}),this.size+=h-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return K.resolve(s?s.document.mutableCopy():Ft.newInvalidDocument(t))}getEntries(e,t){let s=Nr();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Ft.newInvalidDocument(o))})),K.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Nr();const h=t.path,d=new _e(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(d);for(;g.hasNext();){const{key:y,value:{document:v}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||WI(HI(v),s)<=0||(o.has(v.key)||Ku(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Te(9500)}ii(e,t){return K.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new _A(this)}getSize(e){return K.resolve(this.size)}}class _A extends cA{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),K.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e){this.persistence=e,this.si=new os((t=>zf(t)),$f),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.oi=0,this._i=new Yf,this.targetCount=0,this.ai=lo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),K.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new lo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.Pr(t),K.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((h,d)=>{d.sequenceNumber<=t&&s.get(d.targetId)===null&&(this.si.delete(h),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),o++)})),K.waitFor(l).next((()=>o))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return K.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),K.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((h=>{l.push(o.markPotentiallyOrphaned(e,h))})),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return K.resolve(s)}containsKey(e,t){return K.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,t){this.ui={},this.overlays={},this.ci=new Hu(0),this.li=!1,this.li=!0,this.hi=new mA,this.referenceDelegate=e(this),this.Pi=new vA(this),this.indexManager=new rA,this.remoteDocumentCache=(function(o){return new yA(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new tA(t),this.Ii=new dA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new pA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new gA(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ce("MemoryPersistence","Starting transaction:",e);const o=new wA(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return K.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class wA extends QI{constructor(e){super(),this.currentSequenceNumber=e}}class Xf{constructor(e){this.persistence=e,this.Ri=new Yf,this.Vi=null}static mi(e){return new Xf(e)}get fi(){if(this.Vi)return this.Vi;throw Te(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),K.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.fi,(s=>{const o=_e.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Ae.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return K.or([()=>K.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Lu{constructor(e,t){this.persistence=e,this.pi=new os((s=>XI(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=uA(this,t)}static mi(e,t){return new Lu(e,t)}Ei(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return K.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?K.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(h=>this.br(e,h,t).next((d=>{d||(s++,l.removeEntry(h,Ae.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),K.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),K.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=yu(e.data.value)),t}br(e,t,s){return K.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return K.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=Le(),o=Le();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Jf(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return QE()?8:KI(HE())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((h=>{l.result=h})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((h=>{l.result=h}))})).next((()=>{if(l.result)return;const h=new EA;return this.Ss(e,t,h).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,h,d.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(Xs()<=Fe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Js(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),K.resolve()):(Xs()<=Fe.DEBUG&&ce("QueryEngine","Query:",Js(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Xs()<=Fe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Js(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(t))):K.resolve())}ys(e,t){if(Pg(t))return K.resolve(null);let s=Jn(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=cf(t,null,"F"),s=Jn(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const h=Le(...l);return this.ps.getDocuments(e,h).next((d=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.Ds(t,d);return this.Cs(t,y,h,g.readTime)?this.ys(e,cf(t,null,"F")):this.vs(e,y,t,g)}))))})))))}ws(e,t,s,o){return Pg(t)||o.isEqual(Ae.min())?K.resolve(null):this.ps.getDocuments(e,s).next((l=>{const h=this.Ds(t,l);return this.Cs(t,h,s,o)?K.resolve(null):(Xs()<=Fe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Js(t)),this.vs(e,h,t,qI(o,xa)).next((d=>d)))}))}Ds(e,t){let s=new vt(M_(e));return t.forEach(((o,l)=>{Ku(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return Xs()<=Fe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Js(t)),this.ps.getDocumentsMatchingQuery(e,t,pi.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((h=>{l=l.insert(h.key,h)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="LocalStore",IA=3e8;class SA{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new rt(Ve),this.xs=new os((l=>zf(l)),$f),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fA(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function AA(r,e,t,s){return new SA(r,e,t,s)}async function sv(r,e){const t=Pe(r);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const h=[],d=[];let g=Le();for(const y of o){h.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}for(const y of l){d.push(y.batchId);for(const v of y.mutations)g=g.add(v.key)}return t.localDocuments.getDocuments(s,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:d})))}))}))}function CA(r,e){const t=Pe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,g,y,v){const E=y.batch,I=E.keys();let L=K.resolve();return I.forEach((W=>{L=L.next((()=>v.getEntry(g,W))).next(($=>{const F=y.docVersions.get(W);qe(F!==null,48541),$.version.compareTo(F)<0&&(E.applyToRemoteDocument($,y),$.isValidDocument()&&($.setReadTime(y.commitVersion),v.addEntry($)))}))})),L.next((()=>d.mutationQueue.removeMutationBatch(g,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(d){let g=Le();for(let y=0;y<d.mutationResults.length;++y)d.mutationResults[y].transformResults.length>0&&(g=g.add(d.batch.mutations[y].key));return g})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function ov(r){const e=Pe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function RA(r,e){const t=Pe(r),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const h=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const d=[];e.targetChanges.forEach(((v,E)=>{const I=o.get(E);if(!I)return;d.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,E))));let L=I.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?L=L.withResumeToken(kt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):v.resumeToken.approximateByteSize()>0&&(L=L.withResumeToken(v.resumeToken,s)),o=o.insert(E,L),(function($,F,J){return $.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=IA?!0:J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0})(I,L,v)&&d.push(t.Pi.updateTargetData(l,L))}));let g=Nr(),y=Le();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),d.push(xA(l,h,e.documentUpdates).next((v=>{g=v.ks,y=v.qs}))),!s.isEqual(Ae.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));d.push(v)}return K.waitFor(d).next((()=>h.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,g,y))).next((()=>g))})).then((l=>(t.Ms=o,l)))}function xA(r,e,t){let s=Le(),o=Le();return t.forEach((l=>s=s.add(l))),e.getEntries(r,s).next((l=>{let h=Nr();return t.forEach(((d,g)=>{const y=l.get(d);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(d)),g.isNoDocument()&&g.version.isEqual(Ae.min())?(e.removeEntry(d,g.readTime),h=h.insert(d,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),h=h.insert(d,g)):ce(Zf,"Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function PA(r,e){const t=Pe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=jf),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function kA(r,e){const t=Pe(r);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,K.resolve(o)):t.Pi.allocateTargetId(s).next((h=>(o=new li(e,h,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function mf(r,e,t){const s=Pe(r),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!mo(h))throw h;ce(Zf,`Failed to update sequence numbers for target ${e}: ${h}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function zg(r,e,t){const s=Pe(r);let o=Ae.min(),l=Le();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,v){const E=Pe(g),I=E.xs.get(v);return I!==void 0?K.resolve(E.Ms.get(I)):E.Pi.getTargetData(y,v)})(s,h,Jn(e)).next((d=>{if(d)return o=d.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(h,d.targetId).next((g=>{l=g}))})).next((()=>s.Fs.getDocumentsMatchingQuery(h,e,t?o:Ae.min(),t?l:Le()))).next((d=>(NA(s,gS(e),d),{documents:d,Qs:l})))))}function NA(r,e,t){let s=r.Os.get(e)||Ae.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),r.Os.set(e,s)}class $g{constructor(){this.activeTargetIds=TS()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DA{constructor(){this.Mo=new $g,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new $g,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="ConnectivityMonitor";class Hg{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(qg,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(qg,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du=null;function gf(){return du===null?du=(function(){return 268435456+Math.round(2147483648*Math.random())})():du++,"0x"+du.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="RestConnection",LA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===xu?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const h=gf(),d=this.zo(e,t.toUriEncodedString());ce(qh,`Sending RPC '${e}' ${h}:`,d,s);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,l);const{host:y}=new URL(d),v=Pf(y);return this.Jo(e,d,g,s,v).then((E=>(ce(qh,`Received RPC '${e}' ${h}: `,E),E)),(E=>{throw io(qh,`RPC '${e}' ${h} failed with error: `,E,"url: ",d,"request:",s),E}))}Ho(e,t,s,o,l,h){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=LA[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mt="WebChannelConnection";class OA extends bA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const h=gf();return new Promise(((d,g)=>{const y=new u_;y.setWithCredentials(!0),y.listenOnce(c_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case gu.NO_ERROR:const E=y.getResponseJson();ce(Mt,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(E)),d(E);break;case gu.TIMEOUT:ce(Mt,`RPC '${e}' ${h} timed out`),g(new ae(G.DEADLINE_EXCEEDED,"Request time out"));break;case gu.HTTP_ERROR:const I=y.getStatus();if(ce(Mt,`RPC '${e}' ${h} failed with status:`,I,"response text:",y.getResponseText()),I>0){let L=y.getResponseJson();Array.isArray(L)&&(L=L[0]);const W=L==null?void 0:L.error;if(W&&W.status&&W.message){const $=(function(J){const ne=J.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(ne)>=0?ne:G.UNKNOWN})(W.status);g(new ae($,W.message))}else g(new ae(G.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ae(G.UNAVAILABLE,"Connection failed."));break;default:Te(9055,{l_:e,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ce(Mt,`RPC '${e}' ${h} completed.`)}}));const v=JSON.stringify(o);ce(Mt,`RPC '${e}' ${h} sending request:`,o),y.send(t,"POST",v,s,15)}))}T_(e,t,s){const o=gf(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=d_(),d=f_(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,t,s),g.encodeInitMessageHeaders=!0;const v=l.join("");ce(Mt,`Creating RPC '${e}' stream ${o}: ${v}`,g);const E=h.createWebChannel(v,g);this.I_(E);let I=!1,L=!1;const W=new MA({Yo:F=>{L?ce(Mt,`Not sending because RPC '${e}' stream ${o} is closed:`,F):(I||(ce(Mt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),I=!0),ce(Mt,`RPC '${e}' stream ${o} sending:`,F),E.send(F))},Zo:()=>E.close()}),$=(F,J,ne)=>{F.listen(J,(Q=>{try{ne(Q)}catch(oe){setTimeout((()=>{throw oe}),0)}}))};return $(E,ma.EventType.OPEN,(()=>{L||(ce(Mt,`RPC '${e}' stream ${o} transport opened.`),W.o_())})),$(E,ma.EventType.CLOSE,(()=>{L||(L=!0,ce(Mt,`RPC '${e}' stream ${o} transport closed`),W.a_(),this.E_(E))})),$(E,ma.EventType.ERROR,(F=>{L||(L=!0,io(Mt,`RPC '${e}' stream ${o} transport errored. Name:`,F.name,"Message:",F.message),W.a_(new ae(G.UNAVAILABLE,"The operation could not be completed")))})),$(E,ma.EventType.MESSAGE,(F=>{var J;if(!L){const ne=F.data[0];qe(!!ne,16349);const Q=ne,oe=(Q==null?void 0:Q.error)||((J=Q[0])==null?void 0:J.error);if(oe){ce(Mt,`RPC '${e}' stream ${o} received error:`,oe);const ge=oe.status;let ye=(function(C){const D=dt[C];if(D!==void 0)return G_(D)})(ge),x=oe.message;ye===void 0&&(ye=G.INTERNAL,x="Unknown error status: "+ge+" with message "+oe.message),L=!0,W.a_(new ae(ye,x)),E.close()}else ce(Mt,`RPC '${e}' stream ${o} received:`,ne),W.u_(ne)}})),$(d,h_.STAT_EVENT,(F=>{F.stat===nf.PROXY?ce(Mt,`RPC '${e}' stream ${o} detected buffering proxy`):F.stat===nf.NOPROXY&&ce(Mt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Hh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(r){return new BS(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wg="PersistentStream";class lv{constructor(e,t,s,o,l,h,d,g){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=d,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new av(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===G.RESOURCE_EXHAUSTED?(Pr(t.toString()),Pr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new ae(G.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(Wg,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(Wg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class FA extends lv{constructor(e,t,s,o,l,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=qS(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Ae.min();const h=l.targetChange;return h.targetIds&&h.targetIds.length?Ae.min():h.readTime?Zn(h.readTime):Ae.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=pf(this.serializer),t.addTarget=(function(l,h){let d;const g=h.target;if(d=lf(g)?{documents:GS(l,g)}:{query:QS(l,g).ft},d.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){d.resumeToken=Y_(l,h.resumeToken);const y=hf(l,h.expectedCount);y!==null&&(d.expectedCount=y)}else if(h.snapshotVersion.compareTo(Ae.min())>0){d.readTime=Vu(l,h.snapshotVersion.toTimestamp());const y=hf(l,h.expectedCount);y!==null&&(d.expectedCount=y)}return d})(this.serializer,e);const s=YS(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=pf(this.serializer),t.removeTarget=e,this.q_(t)}}class jA extends lv{constructor(e,t,s,o,l,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,h),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=WS(e.writeResults,e.commitTime),s=Zn(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=pf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>HS(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{}class BA extends UA{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ae(G.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,h])=>this.connection.Go(e,ff(t,s),o,l,h))).catch((l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(G.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,d])=>this.connection.Ho(e,ff(t,s),o,h,d,l))).catch((h=>{throw h.name==="FirebaseError"?(h.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new ae(G.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class zA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Pr(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rs="RemoteStore";class $A{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((h=>{s.enqueueAndForget((async()=>{as(this)&&(ce(rs,"Restarting streams for network reachability change."),await(async function(g){const y=Pe(g);y.Ea.add(4),await $a(y),y.Ra.set("Unknown"),y.Ea.delete(4),await ec(y)})(this))}))})),this.Ra=new zA(s,o)}}async function ec(r){if(as(r))for(const e of r.da)await e(!0)}async function $a(r){for(const e of r.da)await e(!1)}function uv(r,e){const t=Pe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),rd(t)?nd(t):yo(t).O_()&&td(t,e))}function ed(r,e){const t=Pe(r),s=yo(t);t.Ia.delete(e),s.O_()&&cv(t,e),t.Ia.size===0&&(s.O_()?s.L_():as(t)&&t.Ra.set("Unknown"))}function td(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yo(r).Y_(e)}function cv(r,e){r.Va.Ue(e),yo(r).Z_(e)}function nd(r){r.Va=new OS({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),yo(r).start(),r.Ra.ua()}function rd(r){return as(r)&&!yo(r).x_()&&r.Ia.size>0}function as(r){return Pe(r).Ea.size===0}function hv(r){r.Va=void 0}async function qA(r){r.Ra.set("Online")}async function HA(r){r.Ia.forEach(((e,t)=>{td(r,e)}))}async function WA(r,e){hv(r),rd(r)?(r.Ra.ha(e),nd(r)):r.Ra.set("Unknown")}async function GA(r,e,t){if(r.Ra.set("Online"),e instanceof K_&&e.state===2&&e.cause)try{await(async function(o,l){const h=l.cause;for(const d of l.targetIds)o.Ia.has(d)&&(await o.remoteSyncer.rejectListen(d,h),o.Ia.delete(d),o.Va.removeTarget(d))})(r,e)}catch(s){ce(rs,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await bu(r,s)}else if(e instanceof wu?r.Va.Ze(e):e instanceof Q_?r.Va.st(e):r.Va.tt(e),!t.isEqual(Ae.min()))try{const s=await ov(r.localStore);t.compareTo(s)>=0&&await(function(l,h){const d=l.Va.Tt(h);return d.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const v=l.Ia.get(y);v&&l.Ia.set(y,v.withResumeToken(g.resumeToken,h))}})),d.targetMismatches.forEach(((g,y)=>{const v=l.Ia.get(g);if(!v)return;l.Ia.set(g,v.withResumeToken(kt.EMPTY_BYTE_STRING,v.snapshotVersion)),cv(l,g);const E=new li(v.target,g,y,v.sequenceNumber);td(l,E)})),l.remoteSyncer.applyRemoteEvent(d)})(r,t)}catch(s){ce(rs,"Failed to raise snapshot:",s),await bu(r,s)}}async function bu(r,e,t){if(!mo(e))throw e;r.Ea.add(1),await $a(r),r.Ra.set("Offline"),t||(t=()=>ov(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{ce(rs,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await ec(r)}))}function fv(r,e){return e().catch((t=>bu(r,t,e)))}async function tc(r){const e=Pe(r),t=_i(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:jf;for(;QA(e);)try{const o=await PA(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,KA(e,o)}catch(o){await bu(e,o)}dv(e)&&pv(e)}function QA(r){return as(r)&&r.Ta.length<10}function KA(r,e){r.Ta.push(e);const t=_i(r);t.O_()&&t.X_&&t.ea(e.mutations)}function dv(r){return as(r)&&!_i(r).x_()&&r.Ta.length>0}function pv(r){_i(r).start()}async function YA(r){_i(r).ra()}async function XA(r){const e=_i(r);for(const t of r.Ta)e.ea(t.mutations)}async function JA(r,e,t){const s=r.Ta.shift(),o=Gf.from(s,e,t);await fv(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await tc(r)}async function ZA(r,e){e&&_i(r).X_&&await(async function(s,o){if((function(h){return LS(h)&&h!==G.ABORTED})(o.code)){const l=s.Ta.shift();_i(s).B_(),await fv(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await tc(s)}})(r,e),dv(r)&&pv(r)}async function Gg(r,e){const t=Pe(r);t.asyncQueue.verifyOperationInProgress(),ce(rs,"RemoteStore received new credentials");const s=as(t);t.Ea.add(3),await $a(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ec(t)}async function eC(r,e){const t=Pe(r);e?(t.Ea.delete(2),await ec(t)):e||(t.Ea.add(2),await $a(t),t.Ra.set("Unknown"))}function yo(r){return r.ma||(r.ma=(function(t,s,o){const l=Pe(t);return l.sa(),new FA(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:qA.bind(null,r),t_:HA.bind(null,r),r_:WA.bind(null,r),H_:GA.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),rd(r)?nd(r):r.Ra.set("Unknown")):(await r.ma.stop(),hv(r))}))),r.ma}function _i(r){return r.fa||(r.fa=(function(t,s,o){const l=Pe(t);return l.sa(),new jA(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:YA.bind(null,r),r_:ZA.bind(null,r),ta:XA.bind(null,r),na:JA.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await tc(r)):(await r.fa.stop(),r.Ta.length>0&&(ce(rs,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const h=Date.now()+s,d=new id(e,t,h,o,l);return d.start(s),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sd(r,e){if(Pr("AsyncQueue",`${e}: ${r}`),mo(r))return new ae(G.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{static emptySet(e){return new to(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||_e.comparator(t.key,s.key):(t,s)=>_e.comparator(t.key,s.key),this.keyedMap=ga(),this.sortedSet=new rt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof to)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new to;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this.ga=new rt(_e.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Te(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class uo{constructor(e,t,s,o,l,h,d,g,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=h,this.syncStateChanged=d,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const h=[];return t.forEach((d=>{h.push({type:0,doc:d})})),new uo(e,t,to.emptySet(t),h,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class nC{constructor(){this.queries=Kg(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Pe(t),l=o.queries;o.queries=Kg(),l.forEach(((h,d)=>{for(const g of d.Sa)g.onError(s)}))})(this,new ae(G.ABORTED,"Firestore shutting down"))}}function Kg(){return new os((r=>b_(r)),Qu)}async function mv(r,e){const t=Pe(r);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new tC,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(h){const d=sd(h,`Initialization of query '${Js(e.query)}' failed`);return void e.onError(d)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&od(t)}async function gv(r,e){const t=Pe(r),s=e.query;let o=3;const l=t.queries.get(s);if(l){const h=l.Sa.indexOf(e);h>=0&&(l.Sa.splice(h,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function rC(r,e){const t=Pe(r);let s=!1;for(const o of e){const l=o.query,h=t.queries.get(l);if(h){for(const d of h.Sa)d.Fa(o)&&(s=!0);h.wa=o}}s&&od(t)}function iC(r,e,t){const s=Pe(r),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function od(r){r.Ca.forEach((e=>{e.next()}))}var yf,Yg;(Yg=yf||(yf={})).Ma="default",Yg.Cache="cache";class yv{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new uo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=uo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==yf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _v{constructor(e){this.key=e}}class vv{constructor(e){this.key=e}}class sC{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=M_(e),this.tu=new to(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Qg,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,h=o,d=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((v,E)=>{const I=o.get(v),L=Ku(this.query,E)?E:null,W=!!I&&this.mutatedKeys.has(I.key),$=!!L&&(L.hasLocalMutations||this.mutatedKeys.has(L.key)&&L.hasCommittedMutations);let F=!1;I&&L?I.data.isEqual(L.data)?W!==$&&(s.track({type:3,doc:L}),F=!0):this.su(I,L)||(s.track({type:2,doc:L}),F=!0,(g&&this.eu(L,g)>0||y&&this.eu(L,y)<0)&&(d=!0)):!I&&L?(s.track({type:0,doc:L}),F=!0):I&&!L&&(s.track({type:1,doc:I}),F=!0,(g||y)&&(d=!0)),F&&(L?(h=h.add(L),l=$?l.add(v):l.delete(v)):(h=h.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const v=this.query.limitType==="F"?h.last():h.first();h=h.delete(v.key),l=l.delete(v.key),s.track({type:1,doc:v})}return{tu:h,iu:s,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((v,E)=>(function(L,W){const $=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te(20277,{Rt:F})}};return $(L)-$(W)})(v.type,E.type)||this.eu(v.doc,E.doc))),this.ou(s),o=o??!1;const d=t&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new uo(this.query,e.tu,l,h,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qg,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new vv(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new _v(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return uo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ad="SyncEngine";class oC{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class aC{constructor(e){this.key=e,this.hu=!1}}class lC{constructor(e,t,s,o,l,h){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new os((d=>b_(d)),Qu),this.Iu=new Map,this.Eu=new Set,this.du=new rt(_e.comparator),this.Au=new Map,this.Ru=new Yf,this.Vu={},this.mu=new Map,this.fu=lo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function uC(r,e,t=!0){const s=Av(r);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await wv(s,e,t,!0),o}async function cC(r,e){const t=Av(r);await wv(t,e,!0,!1)}async function wv(r,e,t,s){const o=await kA(r.localStore,Jn(e)),l=o.targetId,h=r.sharedClientState.addLocalQueryTarget(l,t);let d;return s&&(d=await hC(r,e,l,h==="current",o.resumeToken)),r.isPrimaryClient&&t&&uv(r.remoteStore,o),d}async function hC(r,e,t,s,o){r.pu=(E,I,L)=>(async function($,F,J,ne){let Q=F.view.ru(J);Q.Cs&&(Q=await zg($.localStore,F.query,!1).then((({documents:x})=>F.view.ru(x,Q))));const oe=ne&&ne.targetChanges.get(F.targetId),ge=ne&&ne.targetMismatches.get(F.targetId)!=null,ye=F.view.applyChanges(Q,$.isPrimaryClient,oe,ge);return Jg($,F.targetId,ye.au),ye.snapshot})(r,E,I,L);const l=await zg(r.localStore,e,!0),h=new sC(e,l.Qs),d=h.ru(l.documents),g=za.createSynthesizedTargetChangeForCurrentChange(t,s&&r.onlineState!=="Offline",o),y=h.applyChanges(d,r.isPrimaryClient,g);Jg(r,t,y.au);const v=new oC(e,t,h);return r.Tu.set(e,v),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),y.snapshot}async function fC(r,e,t){const s=Pe(r),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((h=>!Qu(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await mf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&ed(s.remoteStore,o.targetId),_f(s,o.targetId)})).catch(po)):(_f(s,o.targetId),await mf(s.localStore,o.targetId,!0))}async function dC(r,e){const t=Pe(r),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),ed(t.remoteStore,s.targetId))}async function pC(r,e,t){const s=EC(r);try{const o=await(function(h,d){const g=Pe(h),y=Je.now(),v=d.reduce(((L,W)=>L.add(W.key)),Le());let E,I;return g.persistence.runTransaction("Locally write mutations","readwrite",(L=>{let W=Nr(),$=Le();return g.Ns.getEntries(L,v).next((F=>{W=F,W.forEach(((J,ne)=>{ne.isValidDocument()||($=$.add(J))}))})).next((()=>g.localDocuments.getOverlayedDocuments(L,W))).next((F=>{E=F;const J=[];for(const ne of d){const Q=PS(ne,E.get(ne.key).overlayedDocument);Q!=null&&J.push(new Ti(ne.key,Q,R_(Q.value.mapValue),Pn.exists(!0)))}return g.mutationQueue.addMutationBatch(L,y,J,d)})).next((F=>{I=F;const J=F.applyToLocalDocumentSet(E,$);return g.documentOverlayCache.saveOverlays(L,F.batchId,J)}))})).then((()=>({batchId:I.batchId,changes:F_(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,d,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new rt(Ve)),y=y.insert(d,g),h.Vu[h.currentUser.toKey()]=y})(s,o.batchId,t),await qa(s,o.changes),await tc(s.remoteStore)}catch(o){const l=sd(o,"Failed to persist write");t.reject(l)}}async function Ev(r,e){const t=Pe(r);try{const s=await RA(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const h=t.Au.get(l);h&&(qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?qe(h.hu,14607):o.removedDocuments.size>0&&(qe(h.hu,42227),h.hu=!1))})),await qa(t,s,e)}catch(s){await po(s)}}function Xg(r,e,t){const s=Pe(r);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,h)=>{const d=h.view.va(e);d.snapshot&&o.push(d.snapshot)})),(function(h,d){const g=Pe(h);g.onlineState=d;let y=!1;g.queries.forEach(((v,E)=>{for(const I of E.Sa)I.va(d)&&(y=!0)})),y&&od(g)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function mC(r,e,t){const s=Pe(r);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let h=new rt(_e.comparator);h=h.insert(l,Ft.newNoDocument(l,Ae.min()));const d=Le().add(l),g=new Ju(Ae.min(),new Map,new rt(Ve),h,d);await Ev(s,g),s.du=s.du.remove(l),s.Au.delete(e),ld(s)}else await mf(s.localStore,e,!1).then((()=>_f(s,e,t))).catch(po)}async function gC(r,e){const t=Pe(r),s=e.batch.batchId;try{const o=await CA(t.localStore,e);Iv(t,s,null),Tv(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await qa(t,o)}catch(o){await po(o)}}async function yC(r,e,t){const s=Pe(r);try{const o=await(function(h,d){const g=Pe(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let v;return g.mutationQueue.lookupMutationBatch(y,d).next((E=>(qe(E!==null,37113),v=E.keys(),g.mutationQueue.removeMutationBatch(y,E)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,v,d))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,v))).next((()=>g.localDocuments.getDocuments(y,v)))}))})(s.localStore,e);Iv(s,e,t),Tv(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await qa(s,o)}catch(o){await po(o)}}function Tv(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Iv(r,e,t){const s=Pe(r);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function _f(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),t&&r.Pu.yu(s,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((s=>{r.Ru.containsKey(s)||Sv(r,s)}))}function Sv(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(ed(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),ld(r))}function Jg(r,e,t){for(const s of t)s instanceof _v?(r.Ru.addReference(s.key,e),_C(r,s)):s instanceof vv?(ce(ad,"Document no longer in limbo: "+s.key),r.Ru.removeReference(s.key,e),r.Ru.containsKey(s.key)||Sv(r,s.key)):Te(19791,{wu:s})}function _C(r,e){const t=e.key,s=t.path.canonicalString();r.du.get(t)||r.Eu.has(s)||(ce(ad,"New document in limbo: "+t),r.Eu.add(s),ld(r))}function ld(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new _e(Qe.fromString(e)),s=r.fu.next();r.Au.set(s,new aC(t)),r.du=r.du.insert(t,s),uv(r.remoteStore,new li(Jn(qf(t.path)),s,"TargetPurposeLimboResolution",Hu.ce))}}async function qa(r,e,t){const s=Pe(r),o=[],l=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((d,g)=>{h.push(s.pu(g,e,t).then((y=>{var v;if((y||t)&&s.isPrimaryClient){const E=y?!y.fromCache:(v=t==null?void 0:t.targetChanges.get(g.targetId))==null?void 0:v.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(y){o.push(y);const E=Jf.As(g.targetId,y);l.push(E)}})))})),await Promise.all(h),s.Pu.H_(o),await(async function(g,y){const v=Pe(g);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>K.forEach(y,(I=>K.forEach(I.Es,(L=>v.persistence.referenceDelegate.addReference(E,I.targetId,L))).next((()=>K.forEach(I.ds,(L=>v.persistence.referenceDelegate.removeReference(E,I.targetId,L)))))))))}catch(E){if(!mo(E))throw E;ce(Zf,"Failed to update sequence numbers: "+E)}for(const E of y){const I=E.targetId;if(!E.fromCache){const L=v.Ms.get(I),W=L.snapshotVersion,$=L.withLastLimboFreeSnapshotVersion(W);v.Ms=v.Ms.insert(I,$)}}})(s.localStore,l))}async function vC(r,e){const t=Pe(r);if(!t.currentUser.isEqual(e)){ce(ad,"User change. New user:",e.toKey());const s=await sv(t.localStore,e);t.currentUser=e,(function(l,h){l.mu.forEach((d=>{d.forEach((g=>{g.reject(new ae(G.CANCELLED,h))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await qa(t,s.Ls)}}function wC(r,e){const t=Pe(r),s=t.Au.get(e);if(s&&s.hu)return Le().add(s.key);{let o=Le();const l=t.Iu.get(e);if(!l)return o;for(const h of l){const d=t.Tu.get(h);o=o.unionWith(d.view.nu)}return o}}function Av(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ev.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=wC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mC.bind(null,e),e.Pu.H_=rC.bind(null,e.eventManager),e.Pu.yu=iC.bind(null,e.eventManager),e}function EC(r){const e=Pe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yC.bind(null,e),e}class Mu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return AA(this.persistence,new TA,e.initialUser,this.serializer)}Cu(e){return new iv(Xf.mi,this.serializer)}Du(e){return new DA}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mu.provider={build:()=>new Mu};class TC extends Mu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){qe(this.persistence.referenceDelegate instanceof Lu,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new aA(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Qt.withCacheSize(this.cacheSizeBytes):Qt.DEFAULT;return new iv((s=>Lu.mi(s,t)),this.serializer)}}class vf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>Xg(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=vC.bind(null,this.syncEngine),await eC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new nC})()}createDatastore(e){const t=Zu(e.databaseInfo.databaseId),s=(function(l){return new OA(l)})(e.databaseInfo);return(function(l,h,d,g){return new BA(l,h,d,g)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,h,d){return new $A(s,o,l,h,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>Xg(this.syncEngine,t,0)),(function(){return Hg.v()?new Hg:new VA})())}createSyncEngine(e,t){return(function(o,l,h,d,g,y,v){const E=new lC(o,l,h,d,g,y);return v&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(o){const l=Pe(o);ce(rs,"RemoteStore shutting down."),l.Ea.add(5),await $a(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}vf.provider={build:()=>new vf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Pr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi="FirestoreClient";class IC{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Ot.UNAUTHENTICATED,this.clientId=Ff.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async h=>{ce(vi,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(ce(vi,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=sd(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Wh(r,e){r.asyncQueue.verifyOperationInProgress(),ce(vi,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let s=t.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await sv(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function Zg(r,e){r.asyncQueue.verifyOperationInProgress();const t=await SC(r);ce(vi,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((s=>Gg(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>Gg(e.remoteStore,o))),r._onlineComponents=e}async function SC(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){ce(vi,"Using user provided OfflineComponentProvider");try{await Wh(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===G.FAILED_PRECONDITION||o.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;io("Error using user provided cache. Falling back to memory cache: "+t),await Wh(r,new Mu)}}else ce(vi,"Using default OfflineComponentProvider"),await Wh(r,new TC(void 0));return r._offlineComponents}async function Rv(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(ce(vi,"Using user provided OnlineComponentProvider"),await Zg(r,r._uninitializedComponentsProvider._online)):(ce(vi,"Using default OnlineComponentProvider"),await Zg(r,new vf))),r._onlineComponents}function AC(r){return Rv(r).then((e=>e.syncEngine))}async function xv(r){const e=await Rv(r),t=e.eventManager;return t.onListen=uC.bind(null,e.syncEngine),t.onUnlisten=fC.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=cC.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=dC.bind(null,e.syncEngine),t}function CC(r,e,t={}){const s=new Ar;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,d,g,y){const v=new Cv({next:I=>{v.Nu(),h.enqueueAndForget((()=>gv(l,E)));const L=I.docs.has(d);!L&&I.fromCache?y.reject(new ae(G.UNAVAILABLE,"Failed to get document because the client is offline.")):L&&I.fromCache&&g&&g.source==="server"?y.reject(new ae(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(I)},error:I=>y.reject(I)}),E=new yv(qf(d.path),v,{includeMetadataChanges:!0,qa:!0});return mv(l,E)})(await xv(r),r.asyncQueue,e,t,s))),s.promise}function RC(r,e,t={}){const s=new Ar;return r.asyncQueue.enqueueAndForget((async()=>(function(l,h,d,g,y){const v=new Cv({next:I=>{v.Nu(),h.enqueueAndForget((()=>gv(l,E))),I.fromCache&&g.source==="server"?y.reject(new ae(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(I)},error:I=>y.reject(I)}),E=new yv(d,v,{includeMetadataChanges:!0,qa:!0});return mv(l,E)})(await xv(r),r.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ey=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="firestore.googleapis.com",ty=!0;class ny{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=kv,this.ssl=ty}else this.host=e.host,this.ssl=e.ssl??ty;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=rv;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<sA)throw new ae(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$I("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pv(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ae(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ae(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ae(G.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nc{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ny({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ny(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new VI;switch(s.type){case"firstParty":return new OI(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ae(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=ey.get(t);s&&(ce("ComponentProvider","Removing Datastore"),ey.delete(t),s.terminate())})(this),Promise.resolve()}}function xC(r,e,t,s={}){var y;r=kr(r,nc);const o=Pf(e),l=r._getSettings(),h={...l,emulatorOptions:r._getEmulatorOptions()},d=`${e}:${t}`;o&&(UE(`https://${d}`),qE("Firestore",!0)),l.host!==kv&&l.host!==d&&io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...l,host:d,ssl:o,emulatorOptions:s};if(!Ca(g,h)&&(r._setSettings(g),s.mockUserToken)){let v,E;if(typeof s.mockUserToken=="string")v=s.mockUserToken,E=Ot.MOCK_USER;else{v=BE(s.mockUserToken,(y=r._app)==null?void 0:y.options.projectId);const I=s.mockUserToken.sub||s.mockUserToken.user_id;if(!I)throw new ae(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new Ot(I)}r._authCredentials=new LI(new m_(v,E))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ls(this.firestore,e,this._query)}}class gt{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new fi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gt(this.firestore,e,this._key)}toJSON(){return{type:gt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Ua(t,gt._jsonSchema))return new gt(e,s||null,new _e(Qe.fromString(t.referencePath)))}}gt._jsonSchemaVersion="firestore/documentReference/1.0",gt._jsonSchema={type:mt("string",gt._jsonSchemaVersion),referencePath:mt("string")};class fi extends ls{constructor(e,t,s){super(e,t,qf(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gt(this.firestore,null,new _e(e))}withConverter(e){return new fi(this.firestore,e,this._path)}}function no(r,e,...t){if(r=kn(r),g_("collection","path",e),r instanceof nc){const s=Qe.fromString(e,...t);return mg(s),new fi(r,null,s)}{if(!(r instanceof gt||r instanceof fi))throw new ae(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return mg(s),new fi(r.firestore,null,s)}}function is(r,e,...t){if(r=kn(r),arguments.length===1&&(e=Ff.newId()),g_("doc","path",e),r instanceof nc){const s=Qe.fromString(e,...t);return pg(s),new gt(r,null,new _e(s))}{if(!(r instanceof gt||r instanceof fi))throw new ae(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(Qe.fromString(e,...t));return pg(s),new gt(r.firestore,r instanceof fi?r.converter:null,new _e(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="AsyncQueue";class iy{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new av(this,"async_queue_retry"),this._c=()=>{const s=Hh();s&&ce(ry,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Hh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Hh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ar;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!mo(e))throw e;ce(ry,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Pr("INTERNAL UNHANDLED ERROR: ",sy(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=id.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Te(47125,{Pc:sy(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function sy(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class _o extends nc{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new iy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new iy(e),this._firestoreClient=void 0,await e}}}function PC(r,e){const t=typeof r=="object"?r:Oy(),s=typeof r=="string"?r:xu,o=ja(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=FE("firestore");l&&xC(o,...l)}return o}function ud(r){if(r._terminated)throw new ae(G.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||kC(r),r._firestoreClient}function kC(r){var s,o,l;const e=r._freezeSettings(),t=(function(d,g,y,v){return new eS(d,g,y,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Pv(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(r._databaseId,((s=r._app)==null?void 0:s.options.appId)||"",r._persistenceKey,e);r._componentsProvider||(o=e.localCache)!=null&&o._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new IC(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(d){const g=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(g),_online:g}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new yn(kt.fromBase64String(e))}catch(t){throw new ae(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new yn(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ua(e,yn._jsonSchema))return yn.fromBase64String(e.bytes)}}yn._jsonSchemaVersion="firestore/bytes/1.0",yn._jsonSchema={type:mt("string",yn._jsonSchemaVersion),bytes:mt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cd{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:er._jsonSchemaVersion}}static fromJSON(e){if(Ua(e,er._jsonSchema))return new er(e.latitude,e.longitude)}}er._jsonSchemaVersion="firestore/geoPoint/1.0",er._jsonSchema={type:mt("string",er._jsonSchemaVersion),latitude:mt("number"),longitude:mt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:tr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ua(e,tr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new tr(e.vectorValues);throw new ae(G.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}tr._jsonSchemaVersion="firestore/vectorValue/1.0",tr._jsonSchema={type:mt("string",tr._jsonSchemaVersion),vectorValues:mt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=/^__.*__$/;class DC{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ba(e,this.data,t,this.fieldTransforms)}}class Nv{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new Ti(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Dv(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te(40011,{Ac:r})}}class hd{constructor(e,t,s,o,l,h){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new hd({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){var o;const t=(o=this.path)==null?void 0:o.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Ou(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Dv(this.Ac)&&NC.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class VC{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||Zu(e)}Cc(e,t,s,o=!1){return new hd({Ac:e,methodName:t,Dc:s,path:Pt.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fd(r){const e=r._freezeSettings(),t=Zu(r._databaseId);return new VC(r._databaseId,!!e.ignoreUndefinedProperties,t)}function LC(r,e,t,s,o,l={}){const h=r.Cc(l.merge||l.mergeFields?2:0,e,t,o);dd("Data must be an object, but it was:",h,s);const d=Vv(s,h);let g,y;if(l.merge)g=new an(h.fieldMask),y=h.fieldTransforms;else if(l.mergeFields){const v=[];for(const E of l.mergeFields){const I=wf(e,E,t);if(!h.contains(I))throw new ae(G.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);bv(v,I)||v.push(I)}g=new an(v),y=h.fieldTransforms.filter((E=>g.covers(E.field)))}else g=null,y=h.fieldTransforms;return new DC(new Kt(d),g,y)}class ic extends cd{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ic}}function bC(r,e,t,s){const o=r.Cc(1,e,t);dd("Data must be an object, but it was:",o,s);const l=[],h=Kt.empty();Ei(s,((g,y)=>{const v=pd(e,g,t);y=kn(y);const E=o.yc(v);if(y instanceof ic)l.push(v);else{const I=Ha(y,E);I!=null&&(l.push(v),h.set(v,I))}}));const d=new an(l);return new Nv(h,d,o.fieldTransforms)}function MC(r,e,t,s,o,l){const h=r.Cc(1,e,t),d=[wf(e,s,t)],g=[o];if(l.length%2!=0)throw new ae(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<l.length;I+=2)d.push(wf(e,l[I])),g.push(l[I+1]);const y=[],v=Kt.empty();for(let I=d.length-1;I>=0;--I)if(!bv(y,d[I])){const L=d[I];let W=g[I];W=kn(W);const $=h.yc(L);if(W instanceof ic)y.push(L);else{const F=Ha(W,$);F!=null&&(y.push(L),v.set(L,F))}}const E=new an(y);return new Nv(v,E,h.fieldTransforms)}function OC(r,e,t,s=!1){return Ha(t,r.Cc(s?4:3,e))}function Ha(r,e){if(Lv(r=kn(r)))return dd("Unsupported field value:",e,r),Vv(r,e);if(r instanceof cd)return(function(s,o){if(!Dv(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let h=0;for(const d of s){let g=Ha(d,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),l.push(g),h++}return{arrayValue:{values:l}}})(r,e)}return(function(s,o){if((s=kn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return IS(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=Je.fromDate(s);return{timestampValue:Vu(o.serializer,l)}}if(s instanceof Je){const l=new Je(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Vu(o.serializer,l)}}if(s instanceof er)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof yn)return{bytesValue:Y_(o.serializer,s._byteString)};if(s instanceof gt){const l=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(l))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Kf(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof tr)return(function(h,d){return{mapValue:{fields:{[A_]:{stringValue:C_},[Pu]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw d.Sc("VectorValues must only contain numeric values.");return Hf(d.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${qu(s)}`)})(r,e)}function Vv(r,e){const t={};return v_(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ei(r,((s,o)=>{const l=Ha(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function Lv(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof Je||r instanceof er||r instanceof yn||r instanceof gt||r instanceof cd||r instanceof tr)}function dd(r,e,t){if(!Lv(t)||!y_(t)){const s=qu(t);throw s==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+s)}}function wf(r,e,t){if((e=kn(e))instanceof rc)return e._internalPath;if(typeof e=="string")return pd(r,e);throw Ou("Field path arguments must be of type string or ",r,!1,void 0,t)}const FC=new RegExp("[~\\*/\\[\\]]");function pd(r,e,t){if(e.search(FC)>=0)throw Ou(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new rc(...e.split("."))._internalPath}catch{throw Ou(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Ou(r,e,t,s,o){const l=s&&!s.isEmpty(),h=o!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let g="";return(l||h)&&(g+=" (found",l&&(g+=` in field ${s}`),h&&(g+=` in document ${o}`),g+=")"),new ae(G.INVALID_ARGUMENT,d+r+g)}function bv(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new gt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jC(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(md("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class jC extends Mv{data(){return super.data()}}function md(r,e){return typeof e=="string"?pd(r,e):e instanceof rc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ae(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gd{}class Ov extends gd{}function BC(r,e,...t){let s=[];e instanceof gd&&s.push(e),s=s.concat(t),(function(l){const h=l.filter((g=>g instanceof _d)).length,d=l.filter((g=>g instanceof yd)).length;if(h>1||h>0&&d>0)throw new ae(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class yd extends Ov{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new yd(e,t,s)}_apply(e){const t=this._parse(e);return Fv(e._query,t),new ls(e.firestore,e.converter,uf(e._query,t))}_parse(e){const t=fd(e.firestore);return(function(l,h,d,g,y,v,E){let I;if(y.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ae(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){ay(E,v);const W=[];for(const $ of E)W.push(oy(g,l,$));I={arrayValue:{values:W}}}else I=oy(g,l,E)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||ay(E,v),I=OC(d,h,E,v==="in"||v==="not-in");return pt.create(y,v,I)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class _d extends gd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new _d(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Nn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let h=o;const d=l.getFlattenedFilters();for(const g of d)Fv(h,g),h=uf(h,g)})(e._query,t),new ls(e.firestore,e.converter,uf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class vd extends Ov{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new vd(e,t)}_apply(e){const t=(function(o,l,h){if(o.startAt!==null)throw new ae(G.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ae(G.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Da(l,h)})(e._query,this._field,this._direction);return new ls(e.firestore,e.converter,(function(o,l){const h=o.explicitOrderBy.concat([l]);return new go(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function zC(r,e="asc"){const t=e,s=md("orderBy",r);return vd._create(s,t)}function oy(r,e,t){if(typeof(t=kn(t))=="string"){if(t==="")throw new ae(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!L_(e)&&t.indexOf("/")!==-1)throw new ae(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Qe.fromString(t));if(!_e.isDocumentKey(s))throw new ae(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return Ig(r,new _e(s))}if(t instanceof gt)return Ig(r,t._key);throw new ae(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qu(t)}.`)}function ay(r,e){if(!Array.isArray(r)||r.length===0)throw new ae(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Fv(r,e){const t=(function(o,l){for(const h of o)for(const d of h.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ae(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class $C{convertValue(e,t="none"){switch(yi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Te(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return Ei(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){var s,o,l;const t=(l=(o=(s=e.fields)==null?void 0:s[Pu].arrayValue)==null?void 0:o.values)==null?void 0:l.map((h=>ut(h.doubleValue)));return new tr(t)}convertGeoPoint(e){return new er(ut(e.latitude),ut(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=Gu(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Pa(e));default:return null}}convertTimestamp(e){const t=mi(e);return new Je(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Qe.fromString(e);qe(nv(s),9688,{name:e});const o=new ka(s.get(1),s.get(3)),l=new _e(s.popFirst(5));return o.isEqual(t)||Pr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qC(r,e,t){let s;return s=r?r.toFirestore(e):e,s}class _a{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zi extends Mv{constructor(e,t,s,o,l,h){super(e,t,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Eu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(md("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(G.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Zi._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Zi._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zi._jsonSchema={type:mt("string",Zi._jsonSchemaVersion),bundleSource:mt("string","DocumentSnapshot"),bundleName:mt("string"),bundle:mt("string")};class Eu extends Zi{data(e={}){return super.data(e)}}class ro{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new _a(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Eu(this._firestore,this._userDataWriter,s.key,s,new _a(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((d=>{const g=new Eu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new _a(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);return d.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const g=new Eu(o._firestore,o._userDataWriter,d.doc.key,d.doc,new _a(o._snapshot.mutatedKeys.has(d.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,v=-1;return d.type!==0&&(y=h.indexOf(d.doc.key),h=h.delete(d.doc.key)),d.type!==1&&(h=h.add(d.doc),v=h.indexOf(d.doc.key)),{type:HC(d.type),doc:g,oldIndex:y,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(G.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ro._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ff.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function HC(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te(61501,{type:r})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WC(r){r=kr(r,gt);const e=kr(r.firestore,_o);return CC(ud(e),r._key).then((t=>QC(e,r,t)))}ro._jsonSchemaVersion="firestore/querySnapshot/1.0",ro._jsonSchema={type:mt("string",ro._jsonSchemaVersion),bundleSource:mt("string","QuerySnapshot"),bundleName:mt("string"),bundle:mt("string")};class jv extends $C{constructor(e){super(),this.firestore=e}convertBytes(e){return new yn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gt(this.firestore,null,t)}}function Fu(r){r=kr(r,ls);const e=kr(r.firestore,_o),t=ud(e),s=new jv(e);return UC(r._query),RC(t,r._query).then((o=>new ro(e,s,r,o)))}function ba(r,e,t,...s){r=kr(r,gt);const o=kr(r.firestore,_o),l=fd(o);let h;return h=typeof(e=kn(e))=="string"||e instanceof rc?MC(l,"updateDoc",r._key,e,t,s):bC(l,"updateDoc",r._key,e),wd(o,[h.toMutation(r._key,Pn.exists(!0))])}function GC(r){return wd(kr(r.firestore,_o),[new Wf(r._key,Pn.none())])}function Uv(r,e){const t=kr(r.firestore,_o),s=is(r),o=qC(r.converter,e);return wd(t,[LC(fd(r.firestore),"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,Pn.exists(!1))]).then((()=>s))}function wd(r,e){return(function(s,o){const l=new Ar;return s.asyncQueue.enqueueAndForget((async()=>pC(await AC(s),o,l))),l.promise})(ud(r),e)}function QC(r,e,t){const s=t.docs.get(e._key),o=new jv(r);return new Zi(r,o,e._key,s,new _a(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){fo=o})(t1),di(new Rr("firestore",((s,{instanceIdentifier:o,options:l})=>{const h=s.getProvider("app").getImmediate(),d=new _o(new bI(s.getProvider("auth-internal")),new FI(h,s.getProvider("app-check-internal")),(function(y,v){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new ae(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ka(y.options.projectId,v)})(h,o),h);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),Xn(cg,hg,e),Xn(cg,hg,"esm2020")})();const Bv={apiKey:"AIzaSyD_xHPKkmkWi7dTSIbdBRLBeHr46ecwMlY",authDomain:"reddyfinance-905ad.firebaseapp.com",projectId:"reddyfinance-905ad",storageBucket:"reddyfinance-905ad.firebasestorage.app",messagingSenderId:"1072919359011",appId:"1:1072919359011:web:8e8d34563c5bdf2d330b96",measurementId:"G-HT5ERR1TD7"},zv=My(Bv);Bv.measurementId&&PI(zv);const _n=PC(zv),KC=()=>{var ve,Ne,Ce,Z,se,ie;const r=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],e=["morning","afternoon"],[t,s]=q.useState({}),[o,l]=q.useState(!1),[h,d]=q.useState("lines"),[g,y]=q.useState(null),[v,E]=q.useState(null),[I,L]=q.useState("line"),[W,$]=q.useState(""),F=_y(),J=async()=>{try{$("fetchingLines");const P=no(_n,"lines"),H=await Fu(P),le={};H.forEach(pe=>{le[pe.id]=pe.data()}),s(le)}catch(P){alert(P.message||P)}finally{$("")}};q.useEffect(()=>{J()},[]);const ne=async(P,H)=>{$("addLine");try{const le=await Uv(no(_n,"lines"),{line:P,password:H,days:{}});s(pe=>({...pe,[le.id]:{line:P,password:H,days:{}}}))}catch(le){alert(le.message||le)}finally{$("")}},Q=async(P,H)=>{const le=t[P];if(le.days&&Object.keys(le.days).includes(H)){alert(`Day '${H.charAt(0).toUpperCase()+H.slice(1)}' already exists for this line.`);return}$("addDay");try{const pe=is(_n,"lines",P),Se={...le.days,[H]:{sessions:["morning","afternoon"],startDate:null}};await ba(pe,{days:Se}),s(Re=>({...Re,[P]:{...Re[P],days:Se}}))}catch(pe){alert(pe.message||pe)}finally{$("")}},oe=async(P,H,le)=>{$("addSession");try{const pe=is(_n,"lines",P),Se=t[P],Re=Se.days[H]||{sessions:[],startDate:null},Ue=[...Re.sessions||[],le],De={...Se.days,[H]:{...Re,sessions:Ue}};await ba(pe,{days:De}),s($e=>({...$e,[P]:{...$e[P],days:De}}))}catch(pe){alert(pe.message||pe)}finally{$("")}},ge=async P=>{I==="line"?await ne(P.line,P.password):I==="day"?await Q(g,P.day):I==="session"&&await oe(g,v,P.session),l(!1)},ye=P=>{const H=t[P],le=window.prompt(`Enter password for ${H.line}:`);H&&H.password===le?(y(P),d("days")):window.alert("Incorrect password")},x=P=>{E(P),d("sessions")},S=P=>{var le;const H=((le=t[g])==null?void 0:le.line)||"";F(`/${g}-${H}/${v}/${P}`)},C=()=>{d("lines"),y(null),E(null)},D=()=>{d("days"),E(null)},k=Object.entries(t).map(([P,H])=>({id:P,line:H.line})),b=g&&((ve=t[g])!=null&&ve.days)?Object.keys(t[g].days):[],R=g&&v&&((Z=(Ce=(Ne=t[g])==null?void 0:Ne.days)==null?void 0:Ce[v])!=null&&Z.sessions)?t[g].days[v].sessions:[],Me=()=>{h==="lines"?(L("line"),l(!0)):h==="days"&&(L("day"),l(!0))};return U.jsxs("main",{className:"min-h-screen bg-gray-50 flex flex-col items-center p-6",children:[U.jsxs("div",{className:"mb-10 text-center",children:[U.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold text-emerald-700",children:"Reddy Finance"}),U.jsxs("p",{className:"mt-2 text-gray-600",children:[h==="lines"&&"Select a line",h==="days"&&`Days for ${g&&((se=t[g])!=null&&se.line)?t[g].line.toUpperCase():""}`,h==="sessions"&&`Sessions for ${g&&((ie=t[g])!=null&&ie.line)?t[g].line.toUpperCase():""} on ${v||""}`]})]}),W==="fetchingLines"&&U.jsx(Ry,{}),W===""&&U.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-2xl shadow-lg p-6 flex flex-col gap-4",children:[h==="lines"&&(k.length===0?U.jsx("h2",{children:"No lines found. Add a new line."}):k.map(({id:P,line:H})=>U.jsx("button",{onClick:()=>ye(P),className:"py-3 px-4 bg-emerald-50 rounded-lg text-emerald-700 text-lg md:text-xl text-center font-medium hover:bg-emerald-600 hover:text-white transition-all duration-200",children:H.toUpperCase()},P))),h==="days"&&U.jsxs(U.Fragment,{children:[U.jsx("button",{onClick:C,className:"self-start mb-4 px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:" Back to Lines"}),b.length===0?U.jsx("h2",{children:"No days found. Add a new day."}):b.map(P=>U.jsx("button",{onClick:()=>x(P),className:"py-3 px-4 bg-emerald-50 rounded-lg text-emerald-700 text-lg md:text-xl text-center font-medium hover:bg-emerald-600 hover:text-white transition-all duration-200",children:P.charAt(0).toUpperCase()+P.slice(1)},P))]}),h==="sessions"&&U.jsxs(U.Fragment,{children:[U.jsx("button",{onClick:D,className:"self-start mb-4 px-4 py-2 bg-gray-200 rounded hover:bg-gray-300",children:" Back to Days"}),R.length===0?U.jsx("h2",{children:"No sessions found."}):R.map(P=>U.jsx("button",{onClick:()=>S(P),className:"py-3 px-4 bg-emerald-50 rounded-lg text-emerald-700 text-lg md:text-xl text-center font-medium hover:bg-emerald-600 hover:text-white transition-all duration-200",children:P.charAt(0).toUpperCase()+P.slice(1)},P))]})]}),U.jsx("button",{onClick:Me,className:"fixed right-5 bottom-5 w-14 h-14 rounded-full bg-white shadow-2xl shadow-emerald-600 flex items-center justify-center transition cursor-pointer",children:U.jsx("img",{className:"w-10 h-10",src:"/reddyfinance/plus.svg",alt:"add-entry"})}),o&&U.jsx(RE,{loading:W,onSubmit:ge,days:r,sessions:e,setIsModalOpen:l,addMode:I})]})},YC=({borrower:r,onClose:e,onDelete:t})=>{const[s,o]=q.useState(!1),l=r.loan,h=()=>o(!0),d=()=>{o(!1),t&&t()},g=()=>o(!1);return U.jsx("div",{className:"fixed inset-0 bg-transparent flex items-center justify-center z-50",children:U.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-2xl",children:[U.jsxs("h2",{className:"text-xl font-bold text-emerald-700 mb-4",children:[l.cardNo,". ",r.name.toUpperCase()]}),U.jsx("div",{className:"space-y-3",children:U.jsxs("div",{className:"p-3 border rounded bg-emerald-50",children:[U.jsxs("p",{children:["Start date: ",l.startDate.split("-").reverse().join("/")]}),U.jsxs("p",{children:["Total amount: ",l.borrowed]}),U.jsxs("p",{children:["Total Repaid: ",l.payments.reduce((y,v)=>y+v.amount,0)]}),U.jsxs("p",{children:["Balance: ",l.borrowed-l.payments.reduce((y,v)=>y+v.amount,0)]}),r.mobileNo&&U.jsxs("p",{children:["Mobile: ",r.mobileNo," "," ",U.jsx("a",{href:`tel:${r.mobileNo}`,className:"inline-block ml-2 px-2 py-1 bg-emerald-600 text-white rounded hover:bg-emerald-700",title:"Call",children:"Call"})]}),r.location&&U.jsxs("p",{children:["Location: ",r.location]}),U.jsxs("div",{className:"mt-2",children:[U.jsx("h4",{className:"font-medium",children:"Payments:"}),U.jsx("ul",{className:"list-disc ml-5",children:l.payments.map((y,v)=>U.jsxs("li",{children:[y.date,": ",y.amount,y.amount===0&&U.jsx("span",{className:"text-red-500",children:" (Missed)"})]},v))})]})]})}),U.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[U.jsx("button",{onClick:h,className:"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700",children:"Delete"}),U.jsx("button",{onClick:e,className:"px-4 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700",children:"Close"})]}),s&&U.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-transparent bg-opacity-30",children:U.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-sm flex flex-col items-center",children:[U.jsx("p",{className:"mb-4 text-lg font-semibold text-gray-800",children:"Are you sure you want to delete this borrower?"}),U.jsxs("div",{className:"flex justify-between w-full",children:[U.jsx("button",{onClick:g,className:"px-4 py-2 rounded bg-gray-300 hover:bg-gray-400",children:"Cancel"}),U.jsx("button",{onClick:d,className:"px-4 py-2 rounded bg-red-600 text-white hover:bg-red-700",children:"Yes, Delete"})]})]})})]})})};function XC({borrower:r,onClose:e,dispatch:t,last5Weeks:s}){var J,ne;const{line:o,day:l,session:h}=If(),d=Array.isArray(s)?s:[],g=r.loan||{};if(g.startDate){const[Q,oe,ge]=g.startDate.split("-");`${ge.padStart(2,"0")}${oe.padStart(2,"0")}${Q}`}const y=new Date;d.findIndex(Q=>{const[oe,ge,ye]=Q.split("/").map(Number);return new Date(ye,ge-1,oe)<=y});let v=d;if(g.startDate){const[Q,oe,ge]=g.startDate.split("-"),ye=new Date(Q,oe-1,ge);v=d.filter(x=>{const[S,C,D]=x.split("/");return new Date(D,C-1,S)>ye})}const[E,I]=q.useState(v[0]||""),L=((ne=(J=g.payments)==null?void 0:J.find(Q=>Q.date===E))==null?void 0:ne.amount)||"",[W,$]=q.useState(L),F=async()=>{const Q=parseFloat(W);if(isNaN(Q)||Q<0||!E)return;const oe=is(_n,"lines",`${o}_${l}_${h}`,"borrowers",r.id),ge=await WC(oe);if(!ge.exists())return;const x={...ge.data().loan||{}};let S=Array.isArray(x.payments)?[...x.payments]:[];const C=S.findIndex(k=>k.date===E);C>=0?S[C]={...S[C],amount:Q}:S.push({date:E,amount:Q});const D={...x,payments:S};await ba(oe,{loan:D}),$(""),t&&t({type:"UPDATE_PAYMENT",payload:{loan:D}}),e()};return U.jsx("div",{className:"fixed inset-0 bg-transparent flex items-center justify-center z-50",children:U.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[U.jsxs("h2",{className:"text-lg font-bold text-emerald-700 mb-4",children:["Update ",r.name.toUpperCase()]}),U.jsxs("div",{className:"mb-4",children:[U.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Date"}),U.jsx("select",{value:E,onChange:Q=>{var ge,ye;I(Q.target.value);const oe=((ye=(ge=g.payments)==null?void 0:ge.find(x=>x.date===Q.target.value))==null?void 0:ye.amount)||"";$(oe)},className:"w-full border rounded px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500",children:v.map(Q=>U.jsx("option",{value:Q,children:Q},Q))})]}),U.jsxs("div",{className:"mb-4",children:[U.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),U.jsx("input",{type:"number",value:W,onChange:Q=>$(Q.target.value),className:"w-full border rounded px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Enter amount",autoFocus:!0})]}),U.jsxs("div",{className:"mt-4 flex justify-end gap-3",children:[U.jsx("button",{onClick:e,className:"px-4 py-2 rounded bg-gray-500 text-white hover:bg-gray-700",children:"Cancel"}),U.jsx("button",{onClick:F,disabled:!W||parseFloat(W)<0,className:"px-4 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-70",children:"Update"})]})]})})}function ly({newCardNo:r,onAdd:e,onClose:t,borrower:s,onRepay:o}){console.log(r);const l=!!s,[h,d]=q.useState(s?s.name:""),[g,y]=q.useState(""),v=new Date().toISOString().slice(0,10),[E,I]=q.useState(s&&s.loan&&s.loan.startDate?s.loan.startDate:v),[L,W]=q.useState(s&&s.mobileNo?s.mobileNo:""),[$,F]=q.useState(s&&s.location?s.location:""),{line:J,day:ne,session:Q}=If(),[oe,ge]=q.useState(!1),ye=async x=>{if(x.preventDefault(),!oe&&!(!h.trim()||!g||parseFloat(g)<0)){ge(!0);try{if(l&&s){o&&await o({...s,mobileNo:L||void 0,name:h.trim(),loan:{...s.loan,borrowed:parseFloat(g),startDate:E,payments:[]}}),t();return}const S={name:h.trim(),loan:{cardNo:r,borrowed:parseFloat(g),startDate:E,payments:[]}};L&&L.trim()!==""&&(S.mobileNo=L),$&&$.trim()!==""&&(S.location=$),e&&e(S);const C=no(_n,"lines"),D=await Fu(C);let k=null;if(D.forEach(b=>{b.data().line===J&&(k=b.id)}),k){const b=is(_n,"lines",k),R=D.docs.find(ve=>ve.id===k).data(),Me=R.days[ne]||{sessions:[],startDate:null};if(!o&&!Me.startDate){const ve={...R.days,[ne]:{...Me,startDate:E}};await ba(b,{days:ve})}}t()}finally{ge(!1)}}};return U.jsx("div",{className:"fixed inset-0 bg-transparent flex items-center justify-center z-50",children:U.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg w-full max-w-md",children:[U.jsx("h2",{className:"text-xl font-bold text-emerald-700 mb-4",children:l?"Repay & Renew Loan":"Add New Borrower"}),U.jsxs("form",{onSubmit:ye,className:"flex flex-col gap-4",children:[U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Borrower Name"}),U.jsx("input",{type:"text",value:h,onChange:x=>d(x.target.value),className:"w-full border rounded px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Enter borrower name",required:!0,autoFocus:!0,disabled:l})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount Borrowed"}),U.jsx("input",{type:"number",value:g,onChange:x=>y(x.target.value),className:"w-full border rounded px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Enter amount",min:"0",step:"0.01",required:!0})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Start Date"}),U.jsx("input",{type:"date",value:E,onChange:x=>I(x.target.value),className:"w-full border rounded px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500",required:!0})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location (optional)"}),U.jsx("input",{type:"text",value:$,onChange:x=>F(x.target.value),className:"w-full border rounded px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Enter location"})]}),U.jsxs("div",{children:[U.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Mobile Number (optional)"}),U.jsx("input",{type:"tel",value:L,onChange:x=>W(x.target.value),className:"w-full border rounded px-3 py-2 outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Enter mobile number",pattern:"[0-9]*",inputMode:"numeric"})]}),U.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[U.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-200 hover:bg-gray-300",children:"Cancel"}),U.jsx("button",{type:"submit",className:"px-4 py-2 rounded bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-60",disabled:oe,children:oe?l?"Renewing...":"Adding...":l?"Repay & Renew":"Add Borrower"})]})]})]})})}const JC=({last5Weeks:r,borrowers:e,setSelectedBorrower:t,setEditingBorrower:s,setRepayBorrower:o,totals:l})=>U.jsx("div",{className:"w-screen h-screen flex flex-col bg-white flex-1 overflow-auto",children:U.jsxs("table",{className:"w-full border-collapse",children:[U.jsx("thead",{className:"bg-emerald-100 sticky top-0 z-10",children:U.jsxs("tr",{children:[U.jsx("th",{className:"border px-3 py-2 text-left",children:"Card No"}),U.jsx("th",{className:"border px-3 py-2 text-left",children:"Name"}),U.jsx("th",{className:"border px-3 py-2 text-right",children:"Borrowed"}),U.jsx("th",{className:"border px-3 py-2 text-right",children:"Repaid"}),U.jsx("th",{className:"border px-3 py-2 text-right",children:"Balance"}),U.jsx("th",{className:"border px-3 py-2 text-center",children:"Action"}),r.map(h=>U.jsx("th",{className:"border px-3 py-2 text-right",children:h},h))]})}),U.jsx("tbody",{children:e.map(h=>{const d=h.loan;if(!d)return null;const g=d.payments.reduce((v,E)=>v+E.amount,0),y=d.borrowed-g;return U.jsxs("tr",{className:"hover:bg-emerald-50",children:[U.jsx("td",{className:"border border-black px-3 py-2 cursor-pointer text-emerald-700 hover:underline",onClick:()=>t(h),children:d.cardNo}),U.jsx("td",{className:"border border-black px-3 py-2 cursor-pointer text-emerald-700 hover:underline",onClick:()=>t(h),children:h.name}),U.jsx("td",{className:"border px-3 py-2 text-right",children:d.borrowed}),U.jsx("td",{className:"border px-3 py-2 text-right",children:g}),U.jsx("td",{className:"border px-3 py-2 text-right",children:y}),U.jsx("td",{className:"border px-3 py-2 text-center",children:y===0?U.jsx("button",{onClick:()=>o(h),className:"text-sm px-2 py-1 rounded bg-emerald-500 hover:bg-emerald-600 text-white",children:"Repay"}):U.jsx("button",{onClick:()=>s(h),className:"text-sm px-2 py-1 rounded bg-blue-500 hover:bg-blue-600 text-white",children:"Edit"})}),r.map(v=>{const E=d.payments.find(I=>I.date===v);return U.jsx("td",{className:"border px-3 py-2 text-right",children:E?E.amount:"X"},v)})]},h.id)})}),U.jsx("tfoot",{className:"bg-gray-100 font-semibold sticky bottom-0 z-10",children:U.jsxs("tr",{children:[U.jsx("td",{className:"border px-3 py-2",colSpan:2,children:"Totals"}),U.jsx("td",{className:"border px-3 py-2 text-right",children:l.borrowed}),U.jsx("td",{className:"border px-3 py-2 text-right",children:l.repaid}),U.jsx("td",{className:"border px-3 py-2 text-right",children:l.borrowed-l.repaid}),U.jsx("td",{className:"border px-3 py-2 text-center",children:""}),l.payments.map((h,d)=>U.jsx("td",{className:"border px-3 py-2 text-right",children:h},d))]})})]})});function ZC(r,e=1){let t;if(r){const[o,l,h]=r.split("-").map(Number);t=new Date(o,l-1,h)}else t=new Date;const s=(e-1)*5*7;return t.setDate(t.getDate()+s),Array.from({length:5},(o,l)=>{const h=new Date(t);return h.setDate(h.getDate()+l*7),h.toLocaleDateString("en-GB")})}function eR(){var Me;const{line:r,day:e,session:t}=If(),[s,o]=q.useState([]),[l,h]=q.useState(!0),[d,g]=q.useState(null),[y,v]=q.useState(1),E=ZC(d,y);q.useEffect(()=>{(async()=>{h(!0);const Ne=no(_n,"lines"),Ce=await Fu(Ne);let Z=null;Ce.forEach(le=>{le.data().line===r&&(Z=le.data())});let se=null;Z&&Z.days&&Z.days[e]&&(se=Z.days[e].startDate||null),g(se);const ie=BC(no(_n,"lines",`${r}_${e}_${t}`,"borrowers"),zC("loan.cardNo","asc")),H=(await Fu(ie)).docs.map(le=>({...le.data(),id:le.id}));o(H),h(!1)})()},[r,e,t]);const I=async ve=>{if(!E.map(se=>{const[ie,P,H]=se.split("/");return`${H}-${P.padStart(2,"0")}-${ie.padStart(2,"0")}`}).includes(ve.loan.startDate)){alert("Start date must be one of the current 5 dates shown in the table.");return}const Ce=no(_n,"lines",`${r}_${e}_${t}`,"borrowers"),Z=await Uv(Ce,ve);o(se=>[...se,{...ve,id:Z.id}])},L=async(ve,Ne)=>{const Ce=is(_n,"lines",`${r}_${e}_${t}`,"borrowers",ve);await ba(Ce,Ne),o(Z=>Z.map(se=>se.id===ve?{...se,...Ne}:se))},W=async ve=>{const Ne=is(_n,"lines",`${r}_${e}_${t}`,"borrowers",ve);await GC(Ne),o(Ce=>Ce.filter(Z=>Z.id!==ve))},[$,F]=q.useState(null),[J,ne]=q.useState(null),[Q,oe]=q.useState(!1),[ge,ye]=q.useState(null),x=q.useMemo(()=>{let ve=0,Ne=0,Ce=Array(5).fill(0);return s.forEach(Z=>{var P;const se=Z.loan;if(!se)return;ve+=se.borrowed;const ie=((P=se.payments)==null?void 0:P.reduce((H,le)=>H+le.amount,0))||0;Ne+=ie,E.forEach((H,le)=>{var Se;const pe=(Se=se.payments)==null?void 0:Se.find(Re=>Re.date===H);Ce[le]+=pe?pe.amount:0})}),{borrowed:ve,repaid:Ne,payments:Ce}},[s,E]),S=E[E.length-1],[C,D,k]=S.split("/").map(Number),b=new Date(k,D-1,C),R=s.filter(ve=>{const Ne=ve.loan;if(!Ne||!Ne.startDate)return!1;const[Ce,Z,se]=Ne.startDate.split("-").map(Number);return new Date(Ce,Z-1,se)<=b});return U.jsxs("div",{className:"w-screen h-screen flex flex-col bg-white relative",children:[U.jsxs("div",{className:"sticky top-0 z-20 flex justify-between items-center p-2 md:p-4 bg-emerald-700 text-white shadow",children:[U.jsxs("h1",{className:"text-lg font-semibold hidden md:block",children:[r.split("-")[1],"  ",e,"  ",t]}),U.jsxs("div",{className:"flex items-center gap-3 ml-auto",children:[U.jsx("button",{onClick:()=>v(ve=>Math.max(ve-1,1)),className:"px-3 py-1 rounded bg-emerald-600 hover:bg-emerald-500",children:"Prev"}),U.jsxs("span",{className:"text-sm font-medium hidden md:block",children:["Page ",y]}),U.jsx("span",{className:"text-sm font-medium md:hidden",children:y}),U.jsx("button",{onClick:()=>v(ve=>ve+1),className:"px-3 py-1 rounded bg-emerald-600 hover:bg-emerald-500",children:"Next"}),U.jsx("button",{onClick:()=>oe(!0),className:"w-8 h-8 ml-4 bg-white rounded-full p-1 cursor-pointer","aria-label":"Add Borrower",children:U.jsx("img",{src:"/reddyfinance/plus.svg",alt:"Add Borrower",className:"w-full h-full"})})]})]}),l?U.jsx("div",{className:"flex-1 flex items-center justify-center",children:U.jsx(Ry,{})}):U.jsx(JC,{last5Weeks:E,borrowers:R,setSelectedBorrower:F,setEditingBorrower:ne,setRepayBorrower:ye,totals:x}),$&&U.jsx(YC,{borrower:$,onClose:()=>F(null),onDelete:async()=>{await W($.id),F(null)}}),J&&U.jsx(XC,{borrower:J,dispatch:ve=>{ve.type==="UPDATE_PAYMENT"&&(o(Ne=>Ne.map(Ce=>Ce.id===J.id?{...Ce,loan:ve.payload.loan}:Ce)),L(J.id,{loan:ve.payload.loan}))},onClose:()=>ne(null),last5Weeks:E}),Q&&U.jsx(ly,{newCardNo:((Me=s[s.length-1])==null?void 0:Me.loan.cardNo)+1||1,onAdd:async ve=>{await I(ve),oe(!1)},onClose:()=>oe(!1)}),ge&&U.jsx(ly,{borrower:ge,onRepay:async ve=>{await L(ve.id,{loan:ve.loan}),ye(null)},onClose:()=>ye(null)})]})}const tR=()=>U.jsx(gE,{basename:"/reddyfinance",children:U.jsxs(G0,{children:[U.jsx(Qh,{path:"/",element:U.jsx(KC,{})}),U.jsx(Qh,{path:"/:line/:day/:session",element:U.jsx(eR,{})})]})});r0.createRoot(document.getElementById("root")).render(U.jsx(tR,{}));
